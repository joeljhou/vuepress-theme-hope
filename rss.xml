<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="https://www.geekyspace.cn/rss.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <atom:link href="https://www.geekyspace.cn/rss.xml" rel="self" type="application/rss+xml"/>
    <title></title>
    <link>https://www.geekyspace.cn/</link>
    <description></description>
    <language>zh-CN</language>
    <pubDate>Wed, 10 Jul 2024 23:20:25 GMT</pubDate>
    <lastBuildDate>Wed, 10 Jul 2024 23:20:25 GMT</lastBuildDate>
    <generator>@vuepress/plugin-feed</generator>
    <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
    <category>IDEA</category>
    <category>å®‰è£…å¤§å…¨</category>
    <category>Java</category>
    <category>Spring Boot</category>
    <category>Spring Data</category>
    <category>Spring</category>
    <category>ç¨‹åºäººç”Ÿ</category>
    <item>
      <title>2024æœ€æ–°IntelliJ IDEAä¸“ä¸šç‰ˆç¨³å®šæ­£ç‰ˆæ¿€æ´»ç </title>
      <link>https://www.geekyspace.cn/md/idea-tips/activation.html</link>
      <guid>https://www.geekyspace.cn/md/idea-tips/activation.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">2024æœ€æ–°IntelliJ IDEAä¸“ä¸šç‰ˆç¨³å®šæ­£ç‰ˆæ¿€æ´»ç </source>
      <description>2024æœ€æ–°IntelliJ IDEAä¸“ä¸šç‰ˆç¨³å®šæ­£ç‰ˆæ¿€æ´»ç  é€‚ç”¨äºMacç³»ç»Ÿ ä»…æ”¯æŒå®˜ç½‘ä¸“ä¸šç‰ˆ2020-2024çš„æ¿€æ´»ã€‚ä¸æ”¯æŒç¤¾åŒºç‰ˆ toolboxä¸‹è½½çš„IDEAã€‚ 1ï¸âƒ£ ç¬¬ä¸€æ­¥ï¼šä¸‹è½½æ¿€æ´»æ–‡ä»¶ https://h5.m.goofish.com/item?id=787912789834 2ï¸âƒ£ ç¬¬äºŒæ­¥ï¼šæ‰“å¼€æ¿€æ´»æ–‡ä»¶ macjihuo.zipï¼Œè§£å‹ç¼© 3...</description>
      <category>IDEA</category>
      <pubDate>Wed, 17 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>é€‚ç”¨äºMacç³»ç»Ÿ</h2>
<blockquote>
<p>ä»…æ”¯æŒå®˜ç½‘ä¸“ä¸šç‰ˆ2020-2024çš„æ¿€æ´»ã€‚ä¸æ”¯æŒç¤¾åŒºç‰ˆ toolboxä¸‹è½½çš„IDEAã€‚</p>
</blockquote>
<h3>1ï¸âƒ£ ç¬¬ä¸€æ­¥ï¼šä¸‹è½½æ¿€æ´»æ–‡ä»¶</h3>
<p><a href="https://h5.m.goofish.com/item?id=787912789834" target="_blank" rel="noopener noreferrer">https://h5.m.goofish.com/item?id=787912789834</a></p>
<h3>2ï¸âƒ£ ç¬¬äºŒæ­¥ï¼šæ‰“å¼€æ¿€æ´»æ–‡ä»¶ <code>macjihuo.zip</code>ï¼Œè§£å‹ç¼©</h3>
<h3>3ï¸âƒ£ ç¬¬ä¸‰æ­¥ï¼š"macjihuo"æ–‡ä»¶å¤¹ä¸Šå³é”®ï¼Œæ–°å»ºç»ˆç«¯çª—å£</h3>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404171725739.png" alt="macjihuo" tabindex="0" loading="lazy"><figcaption>macjihuo</figcaption></figure>
<h3>4ï¸âƒ£ ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œè„šæœ¬ï¼Œè¾“å…¥å¯¹åº”è½¯ä»¶çš„å‘½ä»¤-å›è½¦ï¼ˆçœ‹ä¸‹å›¾ï¼‰</h3>
<p><mark>è¿è¡Œå‘½ä»¤å‰ï¼šå…ˆæ‰“å¼€ä½ è¦æ¿€æ´»çš„è½¯ä»¶ã€‚ç„¶åå…³é—­è½¯ä»¶ï¼Œæœ€åè¾“å…¥å‘½ä»¤æ¿€æ´»è½¯ä»¶å“¦ã€‚</mark></p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>å¦‚æœä½ è¦æ¿€æ´»ideaï¼š     åˆ™è¾“å…¥ <span class="token function">sh</span> idea.sh
å¦‚æœä½ è¦æ¿€æ´»pycharmï¼š  åˆ™è¾“å…¥ <span class="token function">sh</span> pycharm.sh
å¦‚æœä½ è¦æ¿€æ´»datagripï¼š åˆ™è¾“å…¥ <span class="token function">sh</span> datagrip.sh
å¦‚æœä½ è¦æ¿€æ´»clionï¼š    åˆ™è¾“å…¥ <span class="token function">sh</span> clion.sh
å¦‚æœä½ è¦æ¿€æ´»golandï¼š   åˆ™è¾“å…¥ <span class="token function">sh</span> goland.sh
å¦‚æœä½ è¦æ¿€æ´»webstormï¼š åˆ™è¾“å…¥ <span class="token function">sh</span> webstorm.sh
å¦‚æœä½ è¦æ¿€æ´»phpstormï¼š åˆ™è¾“å…¥ <span class="token function">sh</span> phpstorm.sh
å¦‚æœä½ è¦æ¿€æ´»dataspellï¼šåˆ™è¾“å…¥ <span class="token function">sh</span> dataspell.sh
å¦‚æœä½ è¦æ¿€æ´»riderï¼š    åˆ™è¾“å…¥ <span class="token function">sh</span> rider.sh
</code></pre></div><figure><img src="http://img.geekyspace.cn/pictures/2024/202404171714345.png" alt="Success" tabindex="0" loading="lazy"><figcaption>Success</figcaption></figure>
<h2>é€‚ç”¨äºWindowsç³»ç»Ÿ</h2>
<blockquote>
<p>ä»…æ”¯æŒå®˜ç½‘ä¸“ä¸šç‰ˆ2020-2024çš„æ¿€æ´»ã€‚ä¸æ”¯æŒç¤¾åŒºç‰ˆ toolboxä¸‹è½½çš„</p>
</blockquote>
<h3>1ï¸âƒ£ ç¬¬ä¸€æ­¥ï¼šä¸‹è½½æ¿€æ´»æ–‡ä»¶</h3>
<p><a href="https://h5.m.goofish.com/item?id=787912789834" target="_blank" rel="noopener noreferrer">https://h5.m.goofish.com/item?id=787912789834</a></p>
<h3>2ï¸âƒ£ ç¬¬äºŒæ­¥ï¼šè§£å‹ä¸‹è½½çš„å‹ç¼©åŒ…</h3>
<h3>3ï¸âƒ£ ç¬¬ä¸‰æ­¥ï¼šæ‰“å¼€è§£å‹çš„â€œ<code>æ¿€æ´»ç -Winç³»ç»Ÿ</code>â€æ–‡ä»¶å¤¹ï¼Œ</h3>
<p><mark>åŒå‡»è¦æ¿€æ´»è½¯ä»¶çš„vbs</mark></p>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404171718775.png" alt="Double-click" tabindex="0" loading="lazy"><figcaption>Double-click</figcaption></figure>
<p><strong>â™¦â™¦æ¯”å¦‚ï¼š</strong></p>
<ul>
<li>è¦æ¿€æ´»pycharmï¼Œå°±è¿è¡Œ pycharmæ¿€æ´».vbs</li>
<li>è¦æ¿€æ´»IDEAï¼Œå°±è¿è¡Œ IDEAæ¿€æ´».vbs</li>
</ul>
<p>ç­‰å¾…å‡ºç° å¦‚ä¸‹ <code>Success</code> æç¤ºï¼Œå†æ¬¡æ‰“å¼€è½¯ä»¶å³å¯æ­£å¸¸ä½¿ç”¨ï¼</p>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404171718903.png" alt="Success" tabindex="0" loading="lazy"><figcaption>Success</figcaption></figure>
]]></content:encoded>
      <enclosure url="http://img.geekyspace.cn/pictures/2024/202404171725739.png" type="image/png"/>
    </item>
    <item>
      <title>å¼€å‘è€…å®‰è£…å¤§å…¨</title>
      <link>https://www.geekyspace.cn/md/installation-guide/</link>
      <guid>https://www.geekyspace.cn/md/installation-guide/</guid>
      <source url="https://www.geekyspace.cn/rss.xml">å¼€å‘è€…å®‰è£…å¤§å…¨</source>
      <description>å¼€å‘è€…å®‰è£…å¤§å…¨ è¯¥ä¸“æ ä¸»è¦æ•´ç†ä¸æ±‡æ€»å¼€å‘è€…å¸¸ç”¨çš„ç¼–ç¨‹ç¯å¢ƒã€ä¸­é—´ä»¶ç­‰å·¥å…·çš„å®‰è£…ï¼Œä»¥æŒ‡å¯¼å¼€å‘è€…å¿«é€Ÿæ­å»ºè‡ªå·±çš„éœ€è¦çš„å¼€å‘ç¯å¢ƒã€‚</description>
      <category>å®‰è£…å¤§å…¨</category>
      <pubDate>Tue, 23 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>è¯¥ä¸“æ ä¸»è¦æ•´ç†ä¸æ±‡æ€»å¼€å‘è€…å¸¸ç”¨çš„ç¼–ç¨‹ç¯å¢ƒã€ä¸­é—´ä»¶ç­‰å·¥å…·çš„å®‰è£…ï¼Œä»¥æŒ‡å¯¼å¼€å‘è€…å¿«é€Ÿæ­å»ºè‡ªå·±çš„éœ€è¦çš„å¼€å‘ç¯å¢ƒã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>Java 8-21ï¼šå‰æ²¿ç‰¹æ€§è§£è¯»ç³»åˆ—ï¼ˆæŒç»­è¿è½½ï¼‰</title>
      <link>https://www.geekyspace.cn/md/java-features/</link>
      <guid>https://www.geekyspace.cn/md/java-features/</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 8-21ï¼šå‰æ²¿ç‰¹æ€§è§£è¯»ç³»åˆ—ï¼ˆæŒç»­è¿è½½ï¼‰</source>
      <description>Java 8-21ï¼šå‰æ²¿ç‰¹æ€§è§£è¯»ç³»åˆ—ï¼ˆæŒç»­è¿è½½ï¼‰ï¼Œæˆªè‡³2023å¹´9æœˆä¸­æ—¬ï¼ŒJavaå·²è¾¾åˆ°ç¬¬21ç‰ˆæœ¬ã€‚ å°½ç®¡å¦‚æ­¤ï¼Œä¼—å¤šå¼€å‘è€…ä»åœæ»åœ¨Java 8çš„è®¤çŸ¥æ°´å¹³ã€‚ä¸ºå¡«è¡¥è¿™ä¸€å·®è·ï¼Œæˆ‘ä»¬æ¨å‡ºä¸“æ ï¼Œèšç„¦åˆ†äº«æœ€æ–°JavaçŸ¥è¯†ã€‚</description>
      <category>Java</category>
      <pubDate>Wed, 20 Dec 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>ä¸ºäº†å¸®åŠ©å¤§å®¶è·Ÿä¸Šæœ€æ–°çš„æŠ€æœ¯æ½®æµï¼Œè®¡åˆ’å¯åŠ¨ä¸€ä¸ªä¸“æ ï¼Œé‡ç‚¹åˆ†äº«Javaé¢†åŸŸçš„å‰æ²¿çŸ¥è¯†ã€‚
è¿™ä¸ªä¸“æ å°†è¯¦ç»†è§£è¯»ä»<strong>Java 8 - æœ€æ–°ç‰ˆæœ¬</strong>çš„å„ç§æœ‰è¶£çš„æ–°ç‰¹æ€§ã€‚
ä¼šæŒç»­ä¸æ–­åœ°å‘å¸ƒç›¸å…³å†…å®¹ï¼Œå¸Œæœ›å¤§å®¶èƒ½å¤Ÿå…³æ³¨å¹¶æ”¶è—èµ·æ¥ï¼Œè·Ÿéšæˆ‘ä»¬ä¸€èµ·æ·±å…¥äº†è§£Javaçš„æœ€æ–°è¿›å±•ï¼</p>
<p>è¯¦ç»†äº†è§£Java Enhancement Proposalsï¼ˆJEPsï¼‰åŠå…¶æœ€æ–°åŠ¨æ€</p>
<ul>
<li>ğŸš€ è®¿é—®å®˜æ–¹ç½‘ç«™ï¼š<a href="https://openjdk.java.net/jeps/" target="_blank" rel="noopener noreferrer">OpenJDK JEPs</a></li>
<li>â„ï¸ å‚è€ƒhowtodoinjavaåšå®¢ï¼š<a href="https://howtodoinjava.com/series/java-versions-features/" target="_blank" rel="noopener noreferrer">Java Versions and Features</a></li>
</ul>
<h2>Java 23(in development)</h2>
<h2>Java 22(GA 2024/03/19)</h2>
<ul>
<li>423:    Region Pinning for G1</li>
<li>447:    Statements before super(...) (Preview)</li>
<li>454:    Foreign Function &amp; Memory API</li>
<li>456:    Unnamed Variables &amp; Patterns</li>
<li>457:    Class-File API (Preview)</li>
<li>458:    Launch Multi-File Source-Code Programs</li>
<li>459:    String Templates (Second Preview)</li>
<li>460:    Vector API (Seventh Incubator)</li>
<li>461:    Stream Gatherers (Preview)</li>
<li>462:    Structured Concurrency (Second Preview)</li>
<li>463:    Implicitly Declared Classes and Instance Main Methods (Second Preview)</li>
<li>464:    Scoped Values (Second Preview)</li>
</ul>
<h2>Java 21(GA 2023/09/19)</h2>
<ul>
<li><a href="Java21/jep430-string-templates">430:    String Templates (Preview)</a></li>
<li><a href="Java21/jep431-sequenced-collections">431:    Sequenced Collections</a></li>
<li><a href="Java21/jep439-generational-zgc">439:    Generational ZGC</a></li>
<li><a href="Java21/jep440-record-partterns">440:    Record Patterns</a></li>
<li><a href="Java21/jep441-pattern-matching-for-switch">441:    Pattern Matching for switch</a></li>
<li>442:    Foreign Function &amp; Memory API (Third Preview)</li>
<li>443:    Unnamed Patterns and Variables (Preview)</li>
<li><a href="Java21/jep444-virtual-threads">444:    Virtual Threads</a></li>
<li>445:    Unnamed Classes and Instance Main Methods (Preview)</li>
<li>446:    Scoped Values (Preview)</li>
<li>448:    Vector API (Sixth Incubator)</li>
<li>449:    Deprecate the Windows 32-bit x86 Port for Removal</li>
<li>451:    Prepare to Disallow the Dynamic Loading of Agents</li>
<li>452:    Key Encapsulation Mechanism API</li>
<li>453:    Structured Concurrency (Preview)</li>
</ul>
<h2>Java 20(GA 2023/03/21)</h2>
<ul>
<li>429:    Scoped Values (Incubator)</li>
<li>432:    Record Patterns (Second Preview)</li>
<li>433:    Pattern Matching for switch (Fourth Preview)</li>
<li>434:    Foreign Function &amp; Memory API (Second Preview)</li>
<li>436:    Virtual Threads (Second Preview)</li>
<li>437:    Structured Concurrency (Second Incubator)</li>
<li>438:    Vector API (Fifth Incubator)</li>
</ul>
<h2>Java 19(GA 2022/09/20)</h2>
<ul>
<li>405:    Record Patterns (Preview)</li>
<li>422:    Linux/RISC-V Port</li>
<li>424:    Foreign Function &amp; Memory API (Preview)</li>
<li>425:    Virtual Threads (Preview)</li>
<li>426:    Vector API (Fourth Incubator)</li>
<li>427:    Pattern Matching for switch (Third Preview)</li>
<li>428:    Structured Concurrency (Incubator)</li>
</ul>
<h2>Java 18(GA 2022/03/22)</h2>
<ul>
<li><a href="Java18/jep400-utf8-by-default">400:    UTF-8 by Default</a></li>
<li><a href="Java18/jep408-simple-web-server">408:    Simple Web Server</a></li>
<li><a href="Java18/jep413-code-snippets-in-api-documentation">413:    Code Snippets in Java API Documentation</a></li>
<li>416:    Reimplement Core Reflection with Method Handles</li>
<li>417:    Vector API (Third Incubator)</li>
<li>418:    Internet-Address Resolution SPI</li>
<li>419:    Foreign Function &amp; Memory API (Second Incubator)</li>
<li>420:    Pattern Matching for switch (Second Preview)</li>
<li>421:    Deprecate Finalization for Removal</li>
</ul>
<h2>Java 17(GA 2021/09/14)</h2>
<ul>
<li>306:    Restore Always-Strict Floating-Point Semantics</li>
<li>356:    Enhanced Pseudo-Random Number Generators</li>
<li>382:    New macOS Rendering Pipeline</li>
<li>391:    macOS/AArch64 Port</li>
<li>398:    Deprecate the Applet API for Removal</li>
<li>403:    Strongly Encapsulate JDK Internals</li>
<li><a href="Java17/jep406-pattern-matching-for-switch-preview">406:    Pattern Matching for switch (Preview)</a></li>
<li>407:    Remove RMI Activation</li>
<li><a href="Java17/jep409-sealed-classes">409:    Sealed Classes</a></li>
<li>410:    Remove the Experimental AOT and JIT Compiler</li>
<li>411:    Deprecate the Security Manager for Removal</li>
<li>412:    Foreign Function &amp; Memory API (Incubator)</li>
<li>414:    Vector API (Second Incubator)</li>
<li>415:    Context-Specific Deserialization Filters</li>
</ul>
<h2>Java 16(GA 2021/03/16)</h2>
<ul>
<li>338:    Vector API (Incubator)</li>
<li>347:    Enable C++14 Language Features</li>
<li>357:    Migrate from Mercurial to Git</li>
<li>369:    Migrate to GitHub</li>
<li>376:    ZGC: Concurrent Thread-Stack Processing</li>
<li>380:    Unix-Domain Socket Channels</li>
<li>386:    Alpine Linux Port</li>
<li>387:    Elastic Metaspace</li>
<li>388:    Windows/AArch64 Port</li>
<li>389:    Foreign Linker API (Incubator)</li>
<li>390:    Warnings for Value-Based Classes</li>
<li>392:    Packaging Tool</li>
<li>393:    Foreign-Memory Access API (Third Incubator)</li>
<li><a href="Java16/jep394-pattern-matching-for-instanceof">394:    Pattern Matching for instanceof</a></li>
<li><a href="Java16/jep395-records">395:    Records</a></li>
<li>396:    Strongly Encapsulate JDK Internals by Default</li>
<li>397:    Sealed Classes (Second Preview)</li>
</ul>
<h2>Java 15(GA 2020/09/15)</h2>
<ul>
<li>339:    Edwards-Curve Digital Signature Algorithm (EdDSA)</li>
<li>360:    Sealed Classes (Preview)</li>
<li><a href="Java15/jep371-hidden-classes">371:    Hidden Classes</a></li>
<li>372:    Remove the Nashorn JavaScript Engine</li>
<li>373:    Reimplement the Legacy DatagramSocket API</li>
<li>374:    Disable and Deprecate Biased Locking</li>
<li>375:    Pattern Matching for instanceof (Second Preview)</li>
<li>377:    ZGC: A Scalable Low-Latency Garbage Collector</li>
<li><a href="Java15/jep378-text-blocks">378:    Text Blocks</a></li>
<li>379:    Shenandoah: A Low-Pause-Time Garbage Collector</li>
<li>381:    Remove the Solaris and SPARC Ports</li>
<li>383:    Foreign-Memory Access API (Second Incubator)</li>
<li>384:    Records (Second Preview)</li>
<li>385:    Deprecate RMI Activation for Removal</li>
</ul>
<h2>Java 14(GA 2020/03/17)</h2>
<ul>
<li>305:    Pattern Matching for instanceof (Preview)</li>
<li>343:    Packaging Tool (Incubator)</li>
<li>345:    NUMA-Aware Memory Allocation for G1</li>
<li>349:    JFR Event Streaming</li>
<li>352:    Non-Volatile Mapped Byte Buffers</li>
<li>358:    Helpful NullPointerExceptions</li>
<li>359:    Records (Preview)</li>
<li><a href="Java14/jep361-switch-expressions">361:    Switch Expressions (Standard)</a></li>
<li>362:    Deprecate the Solaris and SPARC Ports</li>
<li>363:    Remove the Concurrent Mark Sweep (CMS) Garbage Collector</li>
<li>364:    ZGC on macOS</li>
<li>365:    ZGC on Windows</li>
<li>366:    Deprecate the ParallelScavenge + SerialOld GC Combination</li>
<li>367:    Remove the Pack200 Tools and API</li>
<li>368:    Text Blocks (Second Preview)</li>
<li>370:    Foreign-Memory Access API (Incubator)</li>
</ul>
<h2>Java 13(GA 2019/09/17)</h2>
<ul>
<li>350: Dynamic CDS Archives</li>
<li>351: ZGC: Uncommit Unused Memory</li>
<li>353: Reimplement the Legacy Socket API</li>
<li>354: Switch Expressions (Preview)</li>
<li>355: Text Blocks (Preview)</li>
</ul>
<h2>Java 12(GA 2019/03/19)</h2>
<ul>
<li>189: Shenandoah: A Low-Pause-Time Garbage Collector (Experimental)</li>
<li>230: Microbenchmark Suite</li>
<li>325: Switch Expressions (Preview)</li>
<li>334: JVM Constants API</li>
<li>340: One AArch64 Port, Not Two</li>
<li>341: Default CDS Archives</li>
<li>344: Abortable Mixed Collections for G1</li>
<li>346: Promptly Return Unused Committed Memory from G1</li>
</ul>
<h2>Java 11(GA 2018/09/25)</h2>
<ul>
<li>181: Nest-Based Access Control</li>
<li>309: Dynamic Class-File Constants</li>
<li>315: Improve Aarch64 Intrinsics</li>
<li>318: Epsilon: A No-Op Garbage Collector</li>
<li><a href="Java11/jep320-remove-JavaEE-CORBA">320: Remove the Java EE and CORBA Modules</a></li>
<li>321: HTTP Client (Standard)</li>
<li>323: Local-Variable Syntax for Lambda Parameters</li>
<li>324: Key Agreement with Curve25519 and Curve448</li>
<li>327: Unicode 10</li>
<li>328: Flight Recorder</li>
<li>329: ChaCha20 and Poly1305 Cryptographic Algorithms</li>
<li>330: Launch Single-File Source-Code Programs</li>
<li>331: Low-Overhead Heap Profiling</li>
<li>332: Transport Layer Security (TLS) 1.3</li>
<li>333: ZGC: A Scalable Low-Latency Garbage Collector(Experimental)</li>
<li>335: Deprecate the Nashorn JavaScript Engine</li>
<li>336: Deprecate the Pack200 Tools and API</li>
</ul>
<h2>Java 10(GA 2018/03/20)</h2>
<ul>
<li><a href="Java10/jep286-local-variable-type-inference">286: Local-Variable Type Inference</a></li>
<li>296: Consolidate the JDK Forest into a Single Repository</li>
<li>304: Garbage-Collector Interface</li>
<li>307: Parallel Full GC for G1</li>
<li>310: Application Class-Data Sharing</li>
<li>312: Thread-Local Handshakes</li>
<li>313: Remove the Native-Header Generation Tool (Javah)</li>
<li>314: Additional Unicode Language-Tag Extensions</li>
<li>316: Heap Allocation on Alternative Memory Devices</li>
<li>317: Experimental Java-Based JIT Compiler</li>
<li>319: Root Certificates</li>
<li>322: Time-Based Release Versioning</li>
</ul>
<h2>Java 9(GA 2017/09/21)</h2>
<ul>
<li>102: Process API Updates</li>
<li>110: HTTP 2 Client</li>
<li>143: Improve Contended Locking</li>
<li>158: Unified JVM Logging</li>
<li>165: Compiler Control</li>
<li>193: Variable Handles</li>
<li>197: Segmented Code Cache</li>
<li>199: Smart Java Compilation, Phase Two</li>
<li>200: The Modular JDK</li>
<li>201: Modular Source Code</li>
<li>211: Elide Deprecation Warnings on Import Statements</li>
<li>212: Resolve Lint and Doclint Warnings</li>
<li>213: Milling Project Coin</li>
<li>214: Remove GC Combinations Deprecated in JDK 8</li>
<li>215: Tiered Attribution for javac</li>
<li>216: Process Import Statements Correctly</li>
<li>217: Annotations Pipeline 2.0</li>
<li>219: Datagram Transport Layer Security (DTLS)</li>
<li>220: Modular Run-Time Images</li>
<li>221: Simplified Doclet API</li>
<li><a href="Java9/jep222-jshell">222: jshell: The Java Shell (Read-Eval-Print Loop)</a></li>
<li>223: New Version-String Scheme</li>
<li>224: HTML5 Javadoc</li>
<li>225: Javadoc Search</li>
<li>226: UTF-8 Property Files</li>
<li>227: Unicode 7.0</li>
<li>228: Add More Diagnostic Commands</li>
<li>229: Create PKCS12 Keystores by Default</li>
<li>231: Remove Launch-Time JRE Version Selection</li>
<li>232: Improve Secure Application Performance</li>
<li>233: Generate Run-Time Compiler Tests Automatically</li>
<li>235: Test Class-File Attributes Generated by javac</li>
<li>236: Parser API for Nashorn</li>
<li>237: Linux/AArch64 Port</li>
<li>238: Multi-Release JAR Files</li>
<li>240: Remove the JVM TI hprof Agent</li>
<li>241: Remove the jhat Tool</li>
<li>243: Java-Level JVM Compiler Interface</li>
<li>244: TLS Application-Layer Protocol Negotiation Extension</li>
<li>245: Validate JVM Command-Line Flag Arguments</li>
<li>246: Leverage CPU Instructions for GHASH and RSA</li>
<li>247: Compile for Older Platform Versions</li>
<li>248: Make G1 the Default Garbage Collector</li>
<li>249: OCSP Stapling for TLS</li>
<li>250: Store Interned Strings in CDS Archives</li>
<li>251: Multi-Resolution Images</li>
<li>252: Use CLDR Locale Data by Default</li>
<li>253: Prepare JavaFX UI Controls &amp; CSS APIs for Modularization</li>
<li>254: Compact Strings</li>
<li>255: Merge Selected Xerces 2.11.0 Updates into JAXP</li>
<li>256: BeanInfo Annotations</li>
<li>257: Update JavaFX/Media to Newer Version of GStreamer</li>
<li>258: HarfBuzz Font-Layout Engine</li>
<li>259: Stack-Walking API</li>
<li>260: Encapsulate Most Internal APIs</li>
<li>261: Module System</li>
<li>262: TIFF Image I/O</li>
<li>263: HiDPI Graphics on Windows and Linux</li>
<li>264: Platform Logging API and Service</li>
<li>265: Marlin Graphics Renderer</li>
<li>266: More Concurrency Updates</li>
<li>267: Unicode 8.0</li>
<li>268: XML Catalogs</li>
<li><a href="Java9/jep269-convenience-factory-methods-for-collections">269: Convenience Factory Methods for Collections</a></li>
<li>270: Reserved Stack Areas for Critical Sections</li>
<li>271: Unified GC Logging</li>
<li>272: Platform-Specific Desktop Features</li>
<li>273: DRBG-Based SecureRandom Implementations</li>
<li>274: Enhanced Method Handles</li>
<li>275: Modular Java Application Packaging</li>
<li>276: Dynamic Linking of Language-Defined Object Models</li>
<li>277: Enhanced Deprecation</li>
<li>278: Additional Tests for Humongous Objects in G1</li>
<li>279: Improve Test-Failure Troubleshooting</li>
<li>280: Indify String Concatenation</li>
<li>281: HotSpot C++ Unit-Test Framework</li>
<li>282: jlink: The Java Linker</li>
<li>283: Enable GTK 3 on Linux</li>
<li>284: New HotSpot Build System</li>
<li>285: Spin-Wait Hints</li>
<li>287: SHA-3 Hash Algorithms</li>
<li>288: Disable SHA-1 Certificates</li>
<li>289: Deprecate the Applet API</li>
<li>290: Filter Incoming Serialization Data</li>
<li>291: Deprecate the Concurrent Mark Sweep (CMS) Garbage Collector</li>
<li>292: Implement Selected ECMAScript 6 Features in Nashorn</li>
<li>294: Linux/s390x Port</li>
<li>295: Ahead-of-Time Compilation</li>
<li>297: Unified arm32/arm64 Port</li>
<li>298: Remove Demos and Samples</li>
<li>299: Reorganize Documentation</li>
</ul>
<h2>Java 8(GA 2014/03/18)</h2>
]]></content:encoded>
    </item>
    <item>
      <title>Spring Boot å…¥é—¨æ•™ç¨‹</title>
      <link>https://www.geekyspace.cn/md/spring-boot/</link>
      <guid>https://www.geekyspace.cn/md/spring-boot/</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Spring Boot å…¥é—¨æ•™ç¨‹</source>
      <description>Spring Boot æ•™ç¨‹</description>
      <category>Spring Boot</category>
      <pubDate>Fri, 15 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
]]></content:encoded>
    </item>
    <item>
      <title>SpringBoot å¿«é€Ÿå…¥é—¨</title>
      <link>https://www.geekyspace.cn/md/spring-boot/quickstart.html</link>
      <guid>https://www.geekyspace.cn/md/spring-boot/quickstart.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">SpringBoot å¿«é€Ÿå…¥é—¨</source>
      <description>SpringBoot å¿«é€Ÿå…¥é—¨</description>
      <category>Spring Boot</category>
      <pubDate>Fri, 15 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
]]></content:encoded>
    </item>
    <item>
      <title>Spring Data JPA</title>
      <link>https://www.geekyspace.cn/md/spring-data-jpa/</link>
      <guid>https://www.geekyspace.cn/md/spring-data-jpa/</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Spring Data JPA</source>
      <description>Spring Data JPA ç›®å½• Spring Data JPA å¿«é€Ÿå…¥é—¨</description>
      <category>Spring Data</category>
      <pubDate>Thu, 04 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>ç›®å½•</h2>
<ul>
<li><a href="/spring-data-jpa/jetbrains/getting-started">Spring Data JPA å¿«é€Ÿå…¥é—¨</a></li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Windowsã€Officeæ¿€æ´»å¯†é’¥ï¼Œè„šæœ¬ï¼Œç¨‹åº</title>
      <link>https://www.geekyspace.cn/md/installation-guide/os/windows-office-activation.html</link>
      <guid>https://www.geekyspace.cn/md/installation-guide/os/windows-office-activation.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Windowsã€Officeæ¿€æ´»å¯†é’¥ï¼Œè„šæœ¬ï¼Œç¨‹åº</source>
      <description>Windowsã€Officeæ¿€æ´»å¯†é’¥ï¼Œè„šæœ¬ï¼Œç¨‹åº â‘  å¾®è½¯æ­£ç‰ˆç§˜é’¥ï¼ˆå®˜æ–¹ï¼‰ 01.Windowsç³»ç»Ÿæ¿€æ´» Win+R æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥å‘½ä»¤ æ‰“å¼€â€œç³»ç»Ÿæ¿€æ´»â€çª—å£ï¼Œç‚¹å‡»â€œæ›´æ”¹â€æŒ‰é’® æ›´æ”¹äº§å“å¯†é’¥æ›´æ”¹äº§å“å¯†é’¥ è¾“å…¥â€œç§˜é’¥â€ï¼Œç‚¹å‡»â€œä¸‹ä¸€é¡µâ€ è¿›è¡Œ â€œæ¿€æ´»â€ ï¼è·å– å¾®è½¯Windowså®˜æ–¹æ­£ç‰ˆç§˜é’¥ è¾“å…¥äº§å“å¯†é’¥è¾“å…¥äº§å“å¯†é’¥ â€œæ¿€æ´»â€æˆåŠŸ Windowså®˜æ–¹å¯†é’¥æ¿€...</description>
      <category>å®‰è£…å¤§å…¨</category>
      <pubDate>Tue, 23 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>â‘  å¾®è½¯æ­£ç‰ˆç§˜é’¥ï¼ˆå®˜æ–¹ï¼‰</h2>
<h3>01.Windowsç³»ç»Ÿæ¿€æ´»</h3>
<ol>
<li><code>Win+R</code> æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥å‘½ä»¤</li>
</ol>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>slui <span class="token number">3</span>
</code></pre></div><ol start="2">
<li>æ‰“å¼€â€œç³»ç»Ÿæ¿€æ´»â€çª—å£ï¼Œç‚¹å‡»â€œæ›´æ”¹â€æŒ‰é’®</li>
</ol>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404232040995.png" alt="æ›´æ”¹äº§å“å¯†é’¥" tabindex="0" loading="lazy"><figcaption>æ›´æ”¹äº§å“å¯†é’¥</figcaption></figure>
<ol start="3">
<li>è¾“å…¥â€œç§˜é’¥â€ï¼Œç‚¹å‡»â€œä¸‹ä¸€é¡µâ€ è¿›è¡Œ â€œæ¿€æ´»â€ ï¼è·å– <a href="https://learn.microsoft.com/zh-cn/windows-server/get-started/kms-client-activation-keys" target="_blank" rel="noopener noreferrer">å¾®è½¯Windowså®˜æ–¹æ­£ç‰ˆç§˜é’¥</a></li>
</ol>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404232318292.png" alt="è¾“å…¥äº§å“å¯†é’¥" tabindex="0" loading="lazy"><figcaption>è¾“å…¥äº§å“å¯†é’¥</figcaption></figure>
<ol start="4">
<li>â€œæ¿€æ´»â€æˆåŠŸ</li>
</ol>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404232327475.png" alt="Windowså®˜æ–¹å¯†é’¥æ¿€æ´»" tabindex="0" loading="lazy"><figcaption>Windowså®˜æ–¹å¯†é’¥æ¿€æ´»</figcaption></figure>
<h3>02.Officeè½¯ä»¶æ¿€æ´»</h3>
<ol>
<li><strong>æ‰“å¼€Officeåº”ç”¨ç¨‹åºï¼š</strong> å¯åŠ¨<code>Word</code>ã€<code>Excel</code>æˆ–<code>PowerPoint</code>ç­‰</li>
<li><strong>è®¿é—®æ–‡ä»¶èœå•ï¼š</strong> åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œç‚¹å‡»å·¦ä¸Šè§’çš„"æ–‡ä»¶"èœå•</li>
<li><strong>ç‚¹å‡»è´¦æˆ·ï¼š</strong> åœ¨æ–‡ä»¶èœå•ä¸­ï¼Œé€‰æ‹©"è´¦æˆ·"</li>
<li><strong>æ›´æ”¹äº§å“å¯†é’¥ï¼š</strong> åœ¨è´¦æˆ·é¡µé¢ï¼Œæ‰¾åˆ°å¹¶ç‚¹å‡»"æ›´æ”¹äº§å“å¯†é’¥"</li>
<li><strong>è¾“å…¥äº§å“å¯†é’¥ï¼š</strong> åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­è¾“å…¥ä½ çš„25ä½å¯†é’¥ ï¼è·å– <a href="https://learn.microsoft.com/zh-cn/deployoffice/vlactivation/gvlks" target="_blank" rel="noopener noreferrer">å¾®è½¯Officeå®˜æ–¹æ­£ç‰ˆç§˜é’¥</a></li>
<li><strong>æ¿€æ´»Officeï¼š</strong> è¾“å…¥å¯†é’¥åï¼Œç‚¹å‡»"ç»§ç»­"æˆ–"æ¿€æ´»äº§å“"</li>
</ol>
<h2>â‘¡ æ¿€æ´»è„šæœ¬ï¼ˆåŸç†ï¼‰</h2>
<blockquote>
<p>ä¸€é”®æ¿€æ´»è„šæœ¬ï¼š<a href="https://wwi.lanzoup.com/b0foh27ne" target="_blank" rel="noopener noreferrer">https://wwi.lanzoup.com/b0foh27ne</a>, å¯†ç ï¼š<code>gkjb</code></p>
</blockquote>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404231900072.png" alt="è„šæœ¬-æŒç»­æ›´æ–°" tabindex="0" loading="lazy"><figcaption>è„šæœ¬-æŒç»­æ›´æ–°</figcaption></figure>
<h3>01.è„šæœ¬æ¿€æ´»å‘½ä»¤</h3>
<p><strong>å°†å¯†é’¥å†™å…¥ç³»ç»Ÿï¼Œå®ç°æ¿€æ´»</strong></p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>slmgr /ipk XXXXX-XXXXX-XXXXX-XXXXX-XXXXX
</code></pre></div><p>å¦‚æœä½ æœ‰æ–°çš„é›¶å”®äº§å“å¯†é’¥ï¼Œå°† <code>X</code> æ›¿æ¢ä¸ºå®é™…çš„å¯†é’¥ï¼Œè¿è¡Œä»¥ä¸Šå‘½ä»¤å³å¯æ¿€æ´»</p>
<h3>02.è„šæœ¬æ¿€æ´»ç½‘ç«™æ¨è</h3>
<p><a href="https://kms.cx/" target="_blank" rel="noopener noreferrer">KMSä¸€é”®æ¿€æ´»windows/officeç½‘ç«™</a></p>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404240116136.png" alt="KMSä¸€é”®æ¿€æ´»windows/officeç½‘ç«™" tabindex="0" loading="lazy"><figcaption>KMSä¸€é”®æ¿€æ´»windows/officeç½‘ç«™</figcaption></figure>
<h2>â‘¢ æ¿€æ´»ç¨‹åºï¼ˆæ¨èï¼‰</h2>
<blockquote>
<p>è·å– <a href="https://m.tb.cn/h.g0ZtnKz?tk=OoXyWIKR74J" target="_blank" rel="noopener noreferrer">ä¸€é”®æ¿€æ´»ç¨‹åº</a> ,æä¾›å¤šç§æ¿€æ´»æ–¹å¼</p>
</blockquote>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404231900370.png" alt="ç¨‹åº-æŒç»­æ›´æ–°" tabindex="0" loading="lazy"><figcaption>ç¨‹åº-æŒç»­æ›´æ–°</figcaption></figure>
<div class="hint-container note">
<p class="hint-container-title">æ³¨æ„ï¼šä½¿ç”¨ä¸€é”®æ¿€æ´»ç¨‹åºï¼Œéœ€å…ˆå…³é—­ç”µè„‘ç›¸å…³çš„æ€æ¯’ç¨‹åº</p>
<ul>
<li><a href="https://support.microsoft.com/zh-cn/windows/%E5%85%B3%E9%97%AD-windows-%E5%AE%89%E5%85%A8%E4%B8%AD%E5%BF%83%E4%B8%AD%E7%9A%84defender-%E9%98%B2%E7%97%85%E6%AF%92%E4%BF%9D%E6%8A%A4-99e6004f-c54c-8509-773c-a4d776b77960" target="_blank" rel="noopener noreferrer">å…³é—­ Windows å®‰å…¨ä¸­å¿ƒä¸­çš„Defender é˜²ç—…æ¯’ä¿æŠ¤</a></li>
<li><a href="http://www.fastaux.com/index.php?c=show&amp;id=54" target="_blank" rel="noopener noreferrer">360å®‰å…¨å«å£«è®¾ç½®ç™½åå•</a></li>
<li><a href="https://www.eyunsou.com/360sd/gongnneg/bmd/" target="_blank" rel="noopener noreferrer">360æ€æ¯’è½¯ä»¶æ€ä¹ˆæ·»åŠ æ–‡ä»¶ç™½åå•</a></li>
</ul>
</div>
<h3>01.æ•°å­—æ¿€æ´»å·¥å…· HWID_KMS38_CN_62</h3>
<p><strong>æ¦‚è¿°</strong></p>
<p><code>HWID_KMS38_CN_62.exe</code> æ˜¯ä¸€ç§<strong>æ•°å­—æ¿€æ´»å·¥å…·</strong>ï¼Œä¸»è¦ç”¨äºæ¿€æ´» Microsoft Windows æ“ä½œç³»ç»Ÿã€‚å®ƒé‡‡ç”¨ HWID æŠ€æœ¯ï¼Œç”Ÿæˆç¡¬ä»¶æ ‡è¯†ç¬¦å¹¶å°†å…¶å‘é€åˆ°
Microsoft çš„æ¿€æ´»æœåŠ¡å™¨è¿›è¡ŒéªŒè¯ï¼Œå®ç°ç³»ç»Ÿé•¿æœŸæ¿€æ´»ã€‚</p>
<p><strong>æ¿€æ´»æ­¥éª¤</strong></p>
<ol>
<li>é¼ æ ‡å³é”®ç‚¹å‡»â€œæ‰“å¼€â€ï¼Œè¿›å…¥ç¨‹åºä¸­</li>
</ol>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404232343700.png" alt="æ­£åœ¨å¯åŠ¨" tabindex="0" loading="lazy"><figcaption>æ­£åœ¨å¯åŠ¨</figcaption></figure>
<ol start="2">
<li>è¿›å…¥ç¨‹åºç•Œé¢åï¼Œå·¥ä½œæ¨¡å¼é€‰æ‹©â€œ<mark>å®‰è£…æ•°å­—å¯†é’¥</mark>ï¼ˆHWIDï¼‰â€ï¼Œç‚¹å‡»â€œå¼€å§‹â€</li>
</ol>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404232345572.png" alt="æ•°å­—å¯†é’¥æ¿€æ´»" tabindex="0" loading="lazy"><figcaption>æ•°å­—å¯†é’¥æ¿€æ´»</figcaption></figure>
<ol start="3">
<li>å®Œæˆåæ‰§è¡Œ<a href="#%E4%B8%80%E9%94%AE%E6%BF%80%E6%B4%BB%E8%84%9A%E6%9C%AC">ä¸€é”®æ¿€æ´»è„šæœ¬</a>ä¸­çš„<code>06.æŸ¥çœ‹æ˜¯å¦æ°¸ä¹…æ¿€æ´».bat</code>éªŒè¯æ¿€æ´»çŠ¶æ€</li>
</ol>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404232347627.png" alt="è®¡ç®—æœºå·²æ°¸ä¹…æ¿€æ´»" tabindex="0" loading="lazy"><figcaption>è®¡ç®—æœºå·²æ°¸ä¹…æ¿€æ´»</figcaption></figure>
<h3>02.KMSæ¿€æ´»å·¥å…· DragonKMS</h3>
<p>äº’è”ç½‘è®ºå›ä¸Šçš„çŸ¥åæ¿€æ´»å·¥å…·ï¼Œä¹Ÿæ˜¯æˆ‘ä¸ªäººå¸¸ç”¨çš„æ¿€æ´»å·¥å…·ï¼Œå¸¸ç”¨äºæ¿€æ´»Windowså’ŒOfficeå…¨å®¶æ¡¶ï¼Œé€šè¿‡è”ç½‘KMSæ¿€æ´»</p>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404232356474.png" alt="MicroKMSç¥é¾™ç‰ˆ" tabindex="0" loading="lazy"><figcaption>MicroKMSç¥é¾™ç‰ˆ</figcaption></figure>
<h3>03.å¼€æºæ¿€æ´»å·¥å…· HEU_KMS_Activator</h3>
<p>ä»…ä¾›ç ”ç©¶æ¿€æ´»åŸç†ä½¿ç”¨ï¼Œåœ¨â€œæ™ºèƒ½æ¿€æ´»â€ä¸­ç‚¹å‡»â€œå¼€å§‹â€ï¼Œå³æŒ‰ç…§æœ€ä½³æ¿€æ´»æ–¹å¼"æ•°å­—è®¸å¯è¯/KMS38/OEM/KMS"ä¾æ¬¡æ¿€æ´»ï¼Œç›´åˆ°æ¿€æ´»æˆåŠŸ</p>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404240021458.png" alt="æ™ºèƒ½æ¿€æ´»ï¼ˆå³æ•°å­—è®¸å¯è¯/KMS38/OEM/KMSä¾æ¬¡æ¿€æ´»ï¼‰" tabindex="0" loading="lazy"><figcaption>æ™ºèƒ½æ¿€æ´»ï¼ˆå³æ•°å­—è®¸å¯è¯/KMS38/OEM/KMSä¾æ¬¡æ¿€æ´»ï¼‰</figcaption></figure>
<p>ç­‰å¾…ä¸€ä¼šï¼Œæ¿€æ´»æˆåŠŸåæç¤º</p>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404240027800.png" alt="Success" tabindex="0" loading="lazy"><figcaption>Success</figcaption></figure>
<h3>04.å°é©¬æ¿€æ´»å·¥å…· KMS10</h3>
<p>è€ç‰Œæ¿€æ´»å·¥å…·ï¼Œæ–‡ä»¶å¤§å°ä»…1Mï¼Œæˆ‘ä»¥å‰è¿˜ç”¨æ¥æ¿€æ´»Win7ï¼Œå¯ä»¥æƒ³è±¡å¹´ä»£çš„ä¹…è¿œã€‚æ”¯æŒç¦»çº¿æ¿€æ´»ï¼Œæ°¸ä¹…æœ‰æ•ˆï¼Œæ— éœ€è€ƒè™‘æ¿€æ´»æ—¶é™ã€‚officeç‰ˆæœ¬ä¸ºretailçš„ç”¨æˆ·è¯·è‡ªè¡Œè½¬æ¢ç‰ˆæœ¬åˆ°volumeï¼Œå³channel
switchã€‚</p>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404240037901.png" alt="å°é©¬æ¿€æ´»å·¥å…·" tabindex="0" loading="lazy"><figcaption>å°é©¬æ¿€æ´»å·¥å…·</figcaption></figure>
<h3>05.å¤§ç¥åˆ¶ä½œ W10DigitalActivation</h3>
<p>å¤§ç¥Ratiborusåˆ¶ä½œçš„ï¼Œå®ƒè¿˜æœ‰å¼€å‘æ¿€æ´»Officeçš„ <strong>KMSAuto++</strong> å·¥å…·ï¼Œä»¥åŠå¯å®šåˆ¶åŒ–å®‰è£…Officeçš„ <strong>Office2013-2021 C2R Install</strong>
ã€‚å¯ä»¥å…³æ³¨å®ƒçš„<a href="https://twitter.com/ratiborus58" target="_blank" rel="noopener noreferrer">Twitter</a>ã€‚</p>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404240055203.png" alt="WIN0-HWIDæ•°å­—æ°¸ä¹…æ¿€æ´»" tabindex="0" loading="lazy"><figcaption>WIN0-HWIDæ•°å­—æ°¸ä¹…æ¿€æ´»</figcaption></figure>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404240057039.png" alt="æ°¸ä¹…æ¿€æ´»" tabindex="0" loading="lazy"><figcaption>æ°¸ä¹…æ¿€æ´»</figcaption></figure>
<h3>06.äº‘èŒæ¿€æ´»å·¥å…· CMWTAT_Digital</h3>
<p>äº‘èŒ Windows 10 æ¿€æ´»å·¥å…·ï¼Œä¸“é—¨ç”¨äºæ•°å­—æƒåˆ©æ¿€æ´»çš„è½¯ä»¶ã€‚æœ¬è½¯ä»¶æ˜¯ä¸€æ¬¾ä½¿ç”¨CSharpç¼–å†™çš„ Windows 10 æ•°å­—æƒåˆ©æ¿€æ´»å·¥å…·</p>
<figure><img src="http://img.geekyspace.cn/pictures/2024/202404240106825.png" alt="äº‘èŒ Windows 10 æ¿€æ´»å·¥å…·" tabindex="0" loading="lazy"><figcaption>äº‘èŒ Windows 10 æ¿€æ´»å·¥å…·</figcaption></figure>
]]></content:encoded>
      <enclosure url="http://img.geekyspace.cn/pictures/2024/202404232040995.png" type="image/png"/>
    </item>
    <item>
      <title>Java 10 æ–°ç‰¹æ€§ï¼šå±€éƒ¨å˜é‡ç±»å‹æ¨æ–­</title>
      <link>https://www.geekyspace.cn/md/java-features/Java10/jep286-local-variable-type-inference.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java10/jep286-local-variable-type-inference.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 10 æ–°ç‰¹æ€§ï¼šå±€éƒ¨å˜é‡ç±»å‹æ¨æ–­</source>
      <description>Java 10 æ–°ç‰¹æ€§ï¼šå±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ Java 10 å¼•å…¥äº†ä¸€é¡¹æ–°çš„è¯­è¨€ç‰¹æ€§ï¼Œå³å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼ˆLocal-Variable Type Inferenceï¼‰ï¼Œ å®ƒå…è®¸åœ¨å±€éƒ¨å˜é‡å£°æ˜æ—¶ï¼Œæ ¹æ®å˜é‡çš„åˆå§‹å€¼ï¼Œæ¨æ–­å‡ºå˜é‡çš„æ•°æ®ç±»å‹ã€‚ è¯­æ³• å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­çš„è¯­æ³•éå¸¸ç®€å•ï¼Œåªéœ€è¦å°† var å…³é”®å­—ä½œä¸ºå±€éƒ¨å˜é‡çš„ç±»å‹å³å¯ã€‚ ç¤ºä¾‹ ç›¸æ¯”ä¼ ç»Ÿçš„æ–¹å¼å’Œ Java ...</description>
      <category>Java</category>
      <pubDate>Sat, 23 Dec 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Java 10 å¼•å…¥äº†ä¸€é¡¹æ–°çš„è¯­è¨€ç‰¹æ€§ï¼Œå³<strong>å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­</strong>ï¼ˆLocal-Variable Type Inferenceï¼‰ï¼Œ
å®ƒå…è®¸åœ¨å±€éƒ¨å˜é‡å£°æ˜æ—¶ï¼Œæ ¹æ®å˜é‡çš„åˆå§‹å€¼ï¼Œæ¨æ–­å‡ºå˜é‡çš„æ•°æ®ç±»å‹ã€‚</p>
<h2>è¯­æ³•</h2>
<p>å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­çš„è¯­æ³•éå¸¸ç®€å•ï¼Œåªéœ€è¦å°† <code>var</code> å…³é”®å­—ä½œä¸ºå±€éƒ¨å˜é‡çš„ç±»å‹å³å¯ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è‡ªåŠ¨æ¨æ–­ ArrayList&lt;String&gt;</span>
<span class="token keyword">var</span> stream <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// è‡ªåŠ¨æ¨æ–­ Stream&lt;String&gt;</span>
</code></pre></div><h2>ç¤ºä¾‹</h2>
<p>ç›¸æ¯”ä¼ ç»Ÿçš„æ–¹å¼å’Œ Java 7 çš„é’»çŸ³æ“ä½œç¬¦ï¼ˆDiamond Operatorï¼‰ï¼ŒJava 10 çš„å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ä½¿å¾—ä»£ç æ›´åŠ ç²¾ç‚¼ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// ä¼ ç»Ÿæ–¹å¼ï¼ˆç­‰å·ä¸¤è¾¹éƒ½éœ€è¦ï¼‰</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Java7çš„é’»çŸ³æ“ä½œç¬¦ï¼ˆDiamond Operatorï¼‰ï¼ˆåªéœ€è¦åœ¨å·¦è¾¹ç”³æ˜ç±»å‹å³å¯ï¼‰</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Java10çš„å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼ˆç±»å‹åœ¨ç­‰å·å³è¾¹å†³å®šï¼‰</span>
<span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨ä½¿ç”¨ var è¿›è¡Œå±€éƒ¨å˜é‡ç±»å‹æ¨æ–­æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>å¿…é¡»åœ¨å£°æ˜çš„åŒæ—¶è¿›è¡Œåˆå§‹åŒ–</li>
<li>ä»…é™äºå±€éƒ¨å˜é‡ï¼Œä¸èƒ½ç”¨äºå®šä¹‰æˆå‘˜å˜é‡ã€æ–¹æ³•å‚æ•°å’Œè¿”å›ç±»å‹</li>
<li>æ¯æ¬¡åªèƒ½å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œä¸èƒ½å¤åˆå£°æ˜å¤šä¸ªå˜é‡</li>
</ol>
<p>é€šè¿‡ä½¿ç”¨å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¸å¤±ä»£ç å¯è¯»æ€§çš„å‰æä¸‹ï¼Œå‡å°‘äº†å†—ä½™çš„ç±»å‹å£°æ˜ï¼Œä½¿å¾—ä»£ç æ›´åŠ ç®€æ´æ¸…æ™°ã€‚
è¿™ä¸€ç‰¹æ€§å°¤å…¶åœ¨Lambdaè¡¨è¾¾å¼ã€é›†åˆåˆå§‹åŒ–ç­‰åœºæ™¯ä¸‹è¡¨ç°çªå‡ºï¼Œæé«˜äº†ä»£ç çš„ä¹¦å†™æ•ˆç‡ã€‚
åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œåˆç†è¿ç”¨å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼Œå°†æœ‰åŠ©äºä»£ç çš„ç»´æŠ¤å’Œé˜…è¯»ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>Java 11 æ–°ç‰¹æ€§ ï¼šç§»é™¤JavaEEå’ŒCORBAæ¨¡å—ä»¥åŠJavaFX</title>
      <link>https://www.geekyspace.cn/md/java-features/Java11/jep320-remove-JavaEE-CORBA.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java11/jep320-remove-JavaEE-CORBA.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 11 æ–°ç‰¹æ€§ ï¼šç§»é™¤JavaEEå’ŒCORBAæ¨¡å—ä»¥åŠJavaFX</source>
      <description>Java 11 æ–°ç‰¹æ€§ ï¼šç§»é™¤JavaEEå’ŒCORBAæ¨¡å—ä»¥åŠJavaFX Java 11 ä¸­ç§»é™¤äº† Java EE å’Œ CORBA æ¨¡å—ï¼ŒåŒæ—¶ JavaFX ä¹Ÿè¢«å‰¥ç¦»ï¼Œä½†ä»å¯ä½œä¸ºç‹¬ç«‹æ¨¡å—ä½¿ç”¨ã€‚ Java9 å¼ƒç”¨è¿‡ç¨‹ åœ¨ Java 9 ä¸­ï¼ŒJava EE å’Œ CORBA æ¨¡å—è¢«æ ‡è®°ä¸º @Deprecatedï¼Œä¸ºå¼€å‘è€…æä¾›äº†é€‚åº”æœŸã€‚ Java11 å½»åº•åˆ ...</description>
      <category>Java</category>
      <pubDate>Sun, 24 Dec 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Java 11 ä¸­ç§»é™¤äº† <code>Java EE</code> å’Œ <code>CORBA</code> æ¨¡å—ï¼ŒåŒæ—¶ <code>JavaFX</code> ä¹Ÿè¢«å‰¥ç¦»ï¼Œä½†ä»å¯ä½œä¸ºç‹¬ç«‹æ¨¡å—ä½¿ç”¨ã€‚</p>
<h2>Java9 å¼ƒç”¨è¿‡ç¨‹</h2>
<p>åœ¨ Java 9 ä¸­ï¼Œ<code>Java EE</code> å’Œ <code>CORBA</code> æ¨¡å—è¢«æ ‡è®°ä¸º @Deprecatedï¼Œä¸ºå¼€å‘è€…æä¾›äº†é€‚åº”æœŸã€‚</p>
<h2>Java11 å½»åº•åˆ é™¤</h2>
<p>Java 11 å®Œå…¨åˆ é™¤äº†ä»¥ä¸‹ä¹ä¸ªæ¨¡å—ï¼š</p>
<ul>
<li>java.xml.wsï¼ˆåŒ…å« JAX-WSã€SAAJ å’Œ Web æœåŠ¡å…ƒæ•°æ®ï¼‰</li>
<li>java.xml.bindï¼ˆJAXBï¼‰</li>
<li>java.activation(JAF)</li>
<li>java.xml.ws.annotationï¼ˆå¸¸ç”¨æ³¨è§£ï¼‰</li>
<li>java.corbaï¼ˆCORBAï¼‰</li>
<li>java.transaction(JTA)</li>
<li>java.se.ee (ä»¥ä¸Š6ä¸ªæ¨¡å—çš„èšåˆæ¨¡å—)</li>
<li>jdk.xml.ws (JAX-WS å·¥å…·)</li>
<li>jdk.xml.bind (JAXB å·¥å…·)</li>
</ul>
<p>åˆ é™¤åçš„å½±å“ï¼š</p>
<ul>
<li>æºä»£ç ä» OpenJDK å­˜å‚¨åº“ä¸­åˆ é™¤</li>
<li>åœ¨ JDK è¿è¡Œæ—¶æ˜ åƒä¸­å°†ä¸åŒ…å«è¿™äº›ç±»</li>
<li>ç›¸å…³å·¥å…·å°†ä¸å†å¯ç”¨:
<ul>
<li>wsgen and wsimport (æ¥è‡ª jdk.xml.ws)</li>
<li>schemagen and xjc (æ¥è‡ª jdk.xml.bind)</li>
<li>idlj, orbd, servertool, and tnamesrv (æ¥è‡ª java.corba)</li>
</ul>
</li>
<li>JNDI CosNaming æä¾›è€… (æ¥è‡ª java.corba) å°†ä¸å†å¯ç”¨</li>
<li>ä¸å†æœ‰å‘½ä»¤è¡Œæ ‡å¿—èƒ½å¤Ÿå¯ç”¨å®ƒä»¬ï¼Œå°±åƒ JDK 9 ä¸Šçš„ --add-modules ä¸€æ ·</li>
</ul>
<h2>JavaFX ç§»é™¤</h2>
<p><code>JavaFX</code> åœ¨ Java 11 ä¸­è¢«ç§»é™¤ï¼Œä½†ä»å¯ä»¥ä½œä¸ºç‹¬ç«‹æ¨¡å—ä½¿ç”¨ã€‚
å¼€å‘è€…éœ€è¦é¢å¤–çš„é…ç½®å’Œä¾èµ–ï¼Œä»¥åœ¨é¡¹ç›®ä¸­ç»§ç»­ä½¿ç”¨ JavaFX æŠ€æœ¯ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>Java 14 æ–°ç‰¹æ€§ï¼šswitchè¡¨è¾¾å¼å¢å¼º</title>
      <link>https://www.geekyspace.cn/md/java-features/Java14/jep361-switch-expressions.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java14/jep361-switch-expressions.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 14 æ–°ç‰¹æ€§ï¼šswitchè¡¨è¾¾å¼å¢å¼º</source>
      <description>Java 14 æ–°ç‰¹æ€§ï¼šswitchè¡¨è¾¾å¼å¢å¼º Java 14(JEP 361)å¼•å…¥äº† switch è¡¨è¾¾å¼çš„æ–°ç‰¹æ€§ï¼Œå…¶ä¸­åŒ…æ‹¬äº† &amp;quot;ç®­å¤´æ ‡ç­¾ï¼ˆcase ... -&amp;gt;ï¼‰&amp;quot; å’Œ yield è¯­å¥çš„å¢å¼ºï¼Œ åŒæ—¶æ”¯æŒ Lambda è¯­æ³•ï¼Œä½¿å¾—ä»£ç æ›´åŠ çµæ´»ã€ç®€æ´ï¼Œå¹¶ä¸ºæœªæ¥çš„æ¨¡å¼åŒ¹é…(JEP 305)ç‰¹æ€§åšå¥½äº†å‡†å¤‡ã€‚ ä¼ ç»Ÿçš„switchè¯­å¥ é¦–å…ˆï¼Œè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä¼ ...</description>
      <category>Java</category>
      <pubDate>Mon, 25 Dec 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Java 14(JEP 361)å¼•å…¥äº† switch è¡¨è¾¾å¼çš„æ–°ç‰¹æ€§ï¼Œå…¶ä¸­åŒ…æ‹¬äº† "<strong>ç®­å¤´æ ‡ç­¾</strong>ï¼ˆ<code>case ... -&gt;</code>ï¼‰" å’Œ <code>yield</code> è¯­å¥çš„å¢å¼ºï¼Œ
åŒæ—¶æ”¯æŒ <code>Lambda</code> è¯­æ³•ï¼Œä½¿å¾—ä»£ç æ›´åŠ çµæ´»ã€ç®€æ´ï¼Œå¹¶ä¸ºæœªæ¥çš„<strong>æ¨¡å¼åŒ¹é…</strong>(JEP 305)ç‰¹æ€§åšå¥½äº†å‡†å¤‡ã€‚</p>
<h2>ä¼ ç»Ÿçš„switchè¯­å¥</h2>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä¼ ç»Ÿçš„switchè¯­å¥ï¼Œå®ƒä»¬åœ¨å¤„ç†å¤šä¸ªæ¡ä»¶æ—¶å¯èƒ½æ˜¾å¾—æœ‰äº›å†—é•¿ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">switch</span> <span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">MONDAY</span><span class="token operator">:</span>
    <span class="token keyword">case</span> <span class="token constant">FRIDAY</span><span class="token operator">:</span>
    <span class="token keyword">case</span> <span class="token constant">SUNDAY</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">TUESDAY</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">THURSDAY</span><span class="token operator">:</span>
    <span class="token keyword">case</span> <span class="token constant">SATURDAY</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">WEDNESDAY</span><span class="token operator">:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¼ ç»Ÿçš„ switch è¯­å¥å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li>è®¾è®¡å—åˆ°Cå’ŒC++ç­‰ä½çº§è¯­è¨€çš„å½±å“ï¼Œä¸”é»˜è®¤æ”¯æŒfall throughè¯­ä¹‰</li>
<li>è¿‡å¤šçš„<code>break</code>è¯­å¥ä½¿å¾—ä»£ç æ˜¾å¾—å†—é•¿</li>
</ol>
<h2>switchè¡¨è¾¾å¼å¢å¼º</h2>
<h3>ç®­å¤´æ ‡ç­¾ï¼ˆcase L -&gt;ï¼‰</h3>
<ol>
<li>å¼•å…¥äº†ä¸€ç§æ–°çš„å¼€å…³æ ‡ç­¾"<code>case L -&gt;</code>"ï¼Œç”¨äºè¡¨ç¤ºåªæœ‰ä¸€ä¸ªåˆ†æ”¯çš„æƒ…å†µ</li>
<li>å…è®¸æ¯ç§æƒ…å†µä¸‹æœ‰å¤šä¸ªå¸¸é‡ï¼Œç”¨é€—å·åˆ†éš”</li>
<li>æ ‡ç­¾å³ä¾§çš„ä»£ç ä»…é™äºè¡¨è¾¾å¼ã€å—æˆ–æŠ›å‡ºå¼‚å¸¸throwè¯­å¥</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">switch</span> <span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">MONDAY</span><span class="token punctuation">,</span> <span class="token constant">FRIDAY</span><span class="token punctuation">,</span> <span class="token constant">SUNDAY</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">TUESDAY</span>                <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">THURSDAY</span><span class="token punctuation">,</span> <span class="token constant">SATURDAY</span>     <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">WEDNESDAY</span>              <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>å±€éƒ¨å˜é‡ç‹¬ç«‹ä½œç”¨åŸŸ</h3>
<p>åœ¨ Java 14 ä¸­ï¼Œå…è®¸åœ¨æ¯ä¸ªåˆ†æ”¯ä¸­å£°æ˜å±€éƒ¨å˜é‡ï¼Œé¿å…å—ä¸­å˜é‡å‘½åå†²çªå’Œè¯¯ç”¨ã€‚</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>switch (day) {
    case MONDAY:
    case TUESDAY:
        int temp = ...     // 'temp'çš„ä½œç”¨åŸŸå»¶ç»­åˆ° }
        break;
    case WEDNESDAY:
    case THURSDAY:
        int temp2 = ...    // ä¸èƒ½å°†æ­¤å˜é‡å‘½åä¸º'temp'
        break;
    default:
        int temp3 = ...    // ä¸èƒ½å°†æ­¤å˜é‡å‘½åä¸º'temp'
}
</code></pre></div><h3>switchè¡¨è¾¾å¼</h3>
<p>Switch è¡¨è¾¾å¼è¢«å¼•å…¥ï¼Œå…è®¸å°† <code>switch</code> è¯­å¥ç”¨ä½œè¡¨è¾¾å¼ï¼Œé€šè¿‡ <code>Lambda</code> è¯­æ³•ï¼Œæ ¹æ®è¾“å…¥å€¼è¿”å›ä¸åŒçš„ç»“æœã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// æ ¹æ®è¾“å…¥å€¼`k`çš„ä¸åŒï¼Œè¿”å›ä¸åŒçš„å­—ç¬¦ä¸²ï¼Œå¹¶é€šè¿‡`System.out.println`æ‰“å°ç»“æœ</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">howMany</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span>  <span class="token number">1</span> <span class="token operator">-&gt;</span> <span class="token string">"one"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span>  <span class="token number">2</span> <span class="token operator">-&gt;</span> <span class="token string">"two"</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span> <span class="token operator">-&gt;</span> <span class="token string">"many"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Switchè¡¨è¾¾å¼çš„å¸¸è§å½¢å¼å¦‚ä¸‹ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">T</span> result <span class="token operator">=</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">L1</span> <span class="token operator">-&gt;</span> e1<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">L2</span> <span class="token operator">-&gt;</span> e2<span class="token punctuation">;</span>
    <span class="token keyword">default</span> <span class="token operator">-&gt;</span> e3<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><blockquote>
<p>Switchè¡¨è¾¾å¼æ˜¯å¤šæ€è¡¨è¾¾å¼ï¼ˆpoly expressionï¼‰ã€‚</p>
<p>å¤šæ€æ€§æ˜¯æŒ‡åœ¨ç¼–è¯‘æ—¶ä¸ç¡®å®šå…·ä½“ç±»å‹ï¼Œè€Œåœ¨è¿è¡Œæ—¶ç¡®å®šç±»å‹çš„ç‰¹æ€§ã€‚</p>
</blockquote>
<h3>yieldè¯­å¥è¿”å›å€¼</h3>
<p>å…è®¸åœ¨switchè¡¨è¾¾å¼ä¸­ä½¿ç”¨<code>yield</code>è¯­å¥ï¼Œè€Œä¸æ˜¯ä½¿ç”¨<code>break</code>è¯­å¥ï¼Œç”¨äºè¿”å›ä¸€ä¸ªå€¼ï¼Œç»“æŸswitchè¡¨è¾¾å¼çš„æ‰§è¡Œã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">int</span> numLetters <span class="token operator">=</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">MONDAY</span><span class="token punctuation">,</span> <span class="token constant">FRIDAY</span><span class="token punctuation">,</span> <span class="token constant">SUNDAY</span> <span class="token operator">-&gt;</span> <span class="token number">6</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">TUESDAY</span>                <span class="token operator">-&gt;</span> <span class="token number">7</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">THURSDAY</span><span class="token punctuation">,</span> <span class="token constant">SATURDAY</span>     <span class="token operator">-&gt;</span> <span class="token number">8</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">WEDNESDAY</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> temp <span class="token operator">=</span> <span class="token function">performComplexCalculation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// åœ¨è¿™é‡Œè¿›è¡Œä¸€äº›å¤æ‚çš„è®¡ç®—</span>
        <span class="token keyword">yield</span> temp<span class="token punctuation">;</span>                              <span class="token comment">// ä½¿ç”¨yieldè¿”å›è®¡ç®—ç»“æœ</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2>å‘å±•è„‰ç»œ</h2>
<p>è¿½æº¯JEP 361çš„å‘å±•å†ç¨‹ï¼šä»JDK 12é¢„è§ˆç‰ˆ(JEP 325)åˆ°JDK 13é¢„è§ˆç‰ˆ(JEP 354)ï¼Œ
è™½ç„¶éƒ¨åˆ†åŠŸèƒ½åœ¨æ—©æœŸç‰ˆæœ¬ä¸­å·²ç»å‡ºç°ï¼Œä½†å»ºè®®åœ¨ JDK 14 åŠä»¥åçš„ç‰ˆæœ¬ä¸­ä½¿ç”¨ï¼Œä»¥è·å¾—æ›´å¥½çš„ç¨³å®šæ€§å’Œæ”¯æŒã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>Java 15 æ–°ç‰¹æ€§ï¼šéšè—ç±»ï¼ˆHidden Classesï¼‰</title>
      <link>https://www.geekyspace.cn/md/java-features/Java15/jep371-hidden-classes.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java15/jep371-hidden-classes.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 15 æ–°ç‰¹æ€§ï¼šéšè—ç±»ï¼ˆHidden Classesï¼‰</source>
      <description>Java 15 æ–°ç‰¹æ€§ï¼šéšè—ç±»ï¼ˆHidden Classesï¼‰ éšè—ç±»ï¼ˆHidden Classesï¼‰ æä¾›äº†ä¸€ç§åœ¨è¿è¡Œæ—¶ç”Ÿæˆç±»çš„æœºåˆ¶ï¼Œåœ¨ç¼–è¯‘æ—¶æœªçŸ¥ï¼Œå¹¶ä¸”ä¸èƒ½ç›´æ¥åœ¨æºä»£ç ä¸­å¼•ç”¨ï¼Œ éœ€è¦é€šè¿‡åå°„é—´æ¥ä½¿ç”¨å®ƒä»¬ï¼Œéšè—ç±»æ˜¯ä¸ºæ¡†æ¶è®¾è®¡çš„ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š åŠ¨æ€ç”Ÿæˆå†…éƒ¨ç±»ï¼šéšè—ç±»å¤©ç”Ÿä¸ºæ¡†æ¶è®¾è®¡ï¼Œåœ¨è¿è¡Œæ—¶ç”Ÿæˆå†…éƒ¨ç±» åå°„è®¿é—®é™åˆ¶ï¼šéšè—ç±»åªèƒ½é€šè¿‡åå°„è®¿é—®ï¼Œä¸èƒ½ç›´æ¥è¢«å…¶ä»–...</description>
      <category>Java</category>
      <pubDate>Tue, 26 Dec 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p><strong>éšè—ç±»</strong>ï¼ˆHidden Classesï¼‰ æä¾›äº†ä¸€ç§åœ¨è¿è¡Œæ—¶ç”Ÿæˆç±»çš„æœºåˆ¶ï¼Œåœ¨ç¼–è¯‘æ—¶æœªçŸ¥ï¼Œå¹¶ä¸”ä¸èƒ½ç›´æ¥åœ¨æºä»£ç ä¸­å¼•ç”¨ï¼Œ
éœ€è¦é€šè¿‡åå°„é—´æ¥ä½¿ç”¨å®ƒä»¬ï¼Œéšè—ç±»æ˜¯ä¸ºæ¡†æ¶è®¾è®¡çš„ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>åŠ¨æ€ç”Ÿæˆå†…éƒ¨ç±»</strong>ï¼šéšè—ç±»å¤©ç”Ÿä¸ºæ¡†æ¶è®¾è®¡ï¼Œåœ¨è¿è¡Œæ—¶ç”Ÿæˆå†…éƒ¨ç±»</li>
<li><strong>åå°„è®¿é—®é™åˆ¶</strong>ï¼šéšè—ç±»åªèƒ½é€šè¿‡åå°„è®¿é—®ï¼Œä¸èƒ½ç›´æ¥è¢«å…¶ä»–ç±»çš„å­—èŠ‚ç è®¿é—®</li>
<li><strong>ç‹¬ç«‹åŠ è½½å’Œå¸è½½</strong>ï¼šéšè—ç±»å¯ä»¥ç‹¬ç«‹äºå…¶ä»–ç±»åŠ è½½å’Œå¸è½½</li>
<li><strong>æ¡†æ¶æ‰©å±•æ€§</strong>ï¼šé€‚ç”¨äºéœ€è¦åœ¨è¿è¡Œæ—¶ç”Ÿæˆç±»çš„æ¡†æ¶ï¼Œæé«˜è¯­è¨€çš„çµæ´»æ€§å’Œæ•ˆç‡</li>
</ul>
<h2>åŸç†</h2>
<h2>æ¡†æ¶ä¸­åº”ç”¨</h2>
<p><a href="https://bugs.openjdk.org/browse/JDK-8220607" target="_blank" rel="noopener noreferrer">https://bugs.openjdk.org/browse/JDK-8220607</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>Java 15 æ–°ç‰¹æ€§ï¼šæ–‡æœ¬å—ï¼ˆText Blocksï¼‰</title>
      <link>https://www.geekyspace.cn/md/java-features/Java15/jep378-text-blocks.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java15/jep378-text-blocks.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 15 æ–°ç‰¹æ€§ï¼šæ–‡æœ¬å—ï¼ˆText Blocksï¼‰</source>
      <description>Java 15 æ–°ç‰¹æ€§ï¼šæ–‡æœ¬å—ï¼ˆText Blocksï¼‰ Java 15(JEP 378)å¼•å…¥äº†æ–‡æœ¬å—ï¼ˆText Blocksï¼‰è¿™ä¸€æ–°ç‰¹æ€§ï¼Œæ—¨åœ¨ç®€åŒ–å¤šè¡Œå­—ç¬¦ä¸²çš„è¡¨ç¤ºï¼Œæé«˜ä»£ç å¯è¯»æ€§ï¼Œå¹¶å‡å°‘åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨è½¬ä¹‰ç¬¦çš„éœ€æ±‚ã€‚ æ–‡æœ¬å—é€šè¿‡å¼•å…¥ä¸‰ä¸ªåŒå¼•å·çš„èƒ–åˆ†éš”ç¬¦ï¼ˆ&amp;quot;&amp;quot;&amp;quot;ï¼‰æ¥å®ç°ï¼ŒåŒæ—¶æ”¯æŒè½¬ä¹‰åºåˆ—ï¼Œä¸ºå¼€å‘äººå‘˜æä¾›æ›´ç›´è§‚ã€æ˜“è¯»çš„å­—ç¬¦ä¸²å¤„ç†æ–¹å¼ã€‚ å¿«é€Ÿä¸Šæ‰‹ HTMLç¤º...</description>
      <category>Java</category>
      <pubDate>Wed, 27 Dec 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Java 15(JEP 378)å¼•å…¥äº†<strong>æ–‡æœ¬å—</strong>ï¼ˆText Blocksï¼‰è¿™ä¸€æ–°ç‰¹æ€§ï¼Œæ—¨åœ¨ç®€åŒ–å¤šè¡Œå­—ç¬¦ä¸²çš„è¡¨ç¤ºï¼Œæé«˜ä»£ç å¯è¯»æ€§ï¼Œå¹¶å‡å°‘åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨è½¬ä¹‰ç¬¦çš„éœ€æ±‚ã€‚
æ–‡æœ¬å—é€šè¿‡å¼•å…¥ä¸‰ä¸ªåŒå¼•å·çš„<strong>èƒ–åˆ†éš”ç¬¦</strong>ï¼ˆ<code>"""</code>ï¼‰æ¥å®ç°ï¼ŒåŒæ—¶æ”¯æŒè½¬ä¹‰åºåˆ—ï¼Œä¸ºå¼€å‘äººå‘˜æä¾›æ›´ç›´è§‚ã€æ˜“è¯»çš„å­—ç¬¦ä¸²å¤„ç†æ–¹å¼ã€‚</p>
<h2>å¿«é€Ÿä¸Šæ‰‹</h2>
<p><strong>HTMLç¤ºä¾‹</strong></p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// ä½¿ç”¨â€œä¸€ç»´â€å­—ç¬¦ä¸²æ–‡å­—</span>
<span class="token class-name">String</span> html <span class="token operator">=</span> <span class="token string">"&lt;html&gt;\n"</span> <span class="token operator">+</span>
              <span class="token string">"    &lt;body&gt;\n"</span> <span class="token operator">+</span>
              <span class="token string">"        &lt;p&gt;Hello, world&lt;/p&gt;\n"</span> <span class="token operator">+</span>
              <span class="token string">"    &lt;/body&gt;\n"</span> <span class="token operator">+</span>
              <span class="token string">"&lt;/html&gt;\n"</span><span class="token punctuation">;</span>

<span class="token comment">// ä½¿ç”¨â€œäºŒç»´â€æ–‡æœ¬å—</span>
<span class="token class-name">String</span> html <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
              &lt;html&gt;
                  &lt;body&gt;
                      &lt;p&gt;Hello, world&lt;/p&gt;
                  &lt;/body&gt;
              &lt;/html&gt;
              """</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>SQLç¤ºä¾‹</strong></p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token comment">// ä½¿ç”¨â€œä¸€ç»´â€å­—ç¬¦ä¸²æ–‡å­—</span>
String query <span class="token operator">=</span> <span class="token string">"SELECT \"EMP_ID\", \"LAST_NAME\" FROM \"EMPLOYEE_TB\"\n"</span> <span class="token operator">+</span>
               <span class="token string">"WHERE \"CITY\" = 'INDIANAPOLIS'\n"</span> <span class="token operator">+</span>
               <span class="token string">"ORDER BY \"EMP_ID\", \"LAST_NAME\";\n"</span><span class="token punctuation">;</span>

<span class="token comment">// ä½¿ç”¨â€œäºŒç»´â€æ–‡æœ¬å—</span>
String query <span class="token operator">=</span> <span class="token string">"""
               SELECT "</span>EMP_ID<span class="token string">", "</span>LAST_NAME<span class="token string">" FROM "</span>EMPLOYEE_TB<span class="token string">"
               WHERE "</span>CITY<span class="token string">" = 'INDIANAPOLIS'
               ORDER BY "</span>EMP_ID<span class="token string">", "</span>LAST_NAME<span class="token string">";
               """</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Polyglotè¯­è¨€ç¤ºä¾‹</strong></p>
<div class="language-polyglot" data-ext="polyglot" data-title="polyglot"><pre class="language-polyglot"><code>// ä½¿ç”¨â€œä¸€ç»´â€å­—ç¬¦ä¸²æ–‡å­—
ScriptEngine engine = new ScriptEngineManager().getEngineByName("js");
Object obj = engine.eval("function hello() {\n" +
                         "    print('\"Hello, world\"');\n" +
                         "}\n" +
                         "\n" +
                         "hello();\n");

// ä½¿ç”¨â€œäºŒç»´â€æ–‡æœ¬å—
ScriptEngine engine = new ScriptEngineManager().getEngineByName("js");
Object obj = engine.eval("function hello() {\n" +
                         "    print('\"Hello, world\"');\n" +
                         "}\n" +
                         "\n" +
                         "hello();\n");
</code></pre></div><h2>ç¼–è¯‘æ—¶å¤„ç†</h2>
<p>æ–‡æœ¬å—æ˜¯Stringç±»å‹çš„å¸¸é‡è¡¨è¾¾å¼ï¼Œç±»ä¼¼äºå­—ç¬¦ä¸²å­—é¢é‡ã€‚ç„¶è€Œï¼Œä¸å­—ç¬¦ä¸²å­—é¢å€¼ä¸åŒï¼Œæ–‡æœ¬å—çš„å†…å®¹åœ¨ç¼–è¯‘æ—¶ç»å†ä¸‰ä¸ªæ­¥éª¤çš„å¤„ç†ï¼š<mark>è¡Œç»ˆæ­¢ç¬¦çš„è§„èŒƒåŒ–</mark>ã€<mark>é™„å¸¦ç™½è‰²ç©ºé—´çš„ç§»é™¤</mark>å’Œ<mark>è§£é‡Šè½¬ä¹‰åºåˆ—</mark>ï¼š</p>
<ol>
<li>è½¬æ¢å†…å®¹çš„è¡Œç»ˆæ­¢ç¬¦
<ul>
<li>è¡Œç»ˆæ­¢ç¬¦ä»CRï¼ˆ\u000Dï¼‰å’ŒCRLFï¼ˆ\u000D\u000Aï¼‰è§„èŒƒåŒ–ä¸º<code>LFï¼ˆ\u000Aï¼‰</code></li>
</ul>
</li>
<li>åˆ é™¤å†…å®¹å‘¨å›´é™„å¸¦çš„ç™½è‰²ç©ºé—´ï¼ˆç”¨äºåŒ¹é…Javaæºä»£ç çš„ç¼©è¿›ï¼‰</li>
<li>è§£é‡Šå†…å®¹ä¸­çš„è½¬ä¹‰åºåˆ—ï¼Œæ‰§è¡Œè§£é‡Šä½œä¸ºæœ€åä¸€æ­¥å¼€å‘äººå‘˜å¯ä»¥ç¼–å†™è½¬ä¹‰åºåˆ—ï¼Œå¦‚\nï¼Œè€Œä¸ä¼šè¢«å‰é¢çš„æ­¥éª¤ä¿®æ”¹æˆ–åˆ é™¤</li>
</ol>
<p>å¤„ç†åçš„å†…å®¹ä»¥<code>CONSTANT_String_info</code>å½¢å¼è®°å½•åœ¨<strong>ç±»æ–‡ä»¶çš„å¸¸é‡æ± </strong>ä¸­ï¼Œè¿è¡Œæ—¶ï¼Œæ–‡æœ¬å—è¢«è®¡ç®—ä¸ºStringçš„å®ä¾‹ã€‚</p>
<h2>æ–°å¢è½¬ä¹‰åºåˆ—</h2>
<p>ä¸ºäº†æ›´ç²¾ç»†åœ°æ§åˆ¶<mark>æ¢è¡Œç¬¦</mark>å’Œ<mark>ç©ºæ ¼</mark>çš„å¤„ç†ï¼Œå¼•å…¥äº†ä¸¤ä¸ªæ–°çš„è½¬ä¹‰åºåˆ—ï¼š\ &lt;line-terminator&gt; å’Œ \sã€‚</p>
<h3>æ¢è¡Œç¬¦ \ &lt;line-terminator&gt;</h3>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// ä¼ ç»Ÿæ–¹å¼</span>
<span class="token class-name">String</span> literal <span class="token operator">=</span> <span class="token string">"Lorem ipsum dolor sit amet, consectetur adipiscing "</span> <span class="token operator">+</span>
                 <span class="token string">"elit, sed do eiusmod tempor incididunt ut labore "</span> <span class="token operator">+</span>
                 <span class="token string">"et dolore magna aliqua."</span><span class="token punctuation">;</span>

<span class="token comment">// ä½¿ç”¨ \ &lt;line-terminator\&gt;</span>
<span class="token class-name">String</span> text <span class="token operator">=</span> <span class="token string">""</span>"
              <span class="token class-name">Lorem</span> ipsum dolor sit amet<span class="token punctuation">,</span> consectetur adipiscing \
              elit<span class="token punctuation">,</span> sed <span class="token keyword">do</span> eiusmod tempor incididunt ut labore \
              et dolore magna aliqua<span class="token punctuation">.</span>\
              <span class="token string">""</span>"<span class="token punctuation">;</span>
</code></pre></div><blockquote>
<p>Tipsï¼š å› ä¸ºå­—ç¬¦å’Œä¼ ç»Ÿå­—ç¬¦ä¸²ä¸å…è®¸åµŒå…¥æ¢è¡Œç¬¦ï¼Œæ‰€ä»¥\ &lt;line-terminator&gt; è½¬ä¹‰åºåˆ—åªé€‚ç”¨äºæ–‡æœ¬å—</p>
</blockquote>
<h3>å•ä¸ªç©ºæ ¼ \s</h3>
<p>æ–°çš„ \s è½¬ä¹‰åºåˆ—ç®€å•åœ°è½¬æ¢ä¸ºå•ä¸ªç©ºæ ¼ï¼ˆ\u0020ï¼‰</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// ä½¿ç”¨ \s ä¿æŒå›ºå®šé•¿åº¦</span>
<span class="token class-name">String</span> colors <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
    red  \s
    green\s
    blue \s
    """</span><span class="token punctuation">;</span>
</code></pre></div><p>è½¬ä¹‰åºåˆ—ç›´åˆ°å»é™¤æ— æ„ä¹‰çš„ç©ºæ ¼åæ‰è¢«è§£é‡Šï¼Œ\s å¯ä»¥ä½œä¸ºæ …æ ï¼Œé˜²æ­¢å°¾éšç©ºæ ¼è¢«å»é™¤ã€‚
åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæ¯è¡Œæœ«å°¾ä½¿ç”¨ \s å¯ä»¥ç¡®ä¿æ¯è¡Œé•¿åº¦æ°å¥½ä¸ºå…­ä¸ªå­—ç¬¦ã€‚</p>
<h2>æ–‡æœ¬å—è¿æ¥</h2>
<p>æ–‡æœ¬å—çš„è¿æ¥æ˜¯å¼•å…¥çš„ä¸€ä¸ªæ–¹ä¾¿çš„ç‰¹æ€§ï¼Œä½¿å¾—å­—ç¬¦ä¸²çš„æ‹¼æ¥å˜å¾—æ›´åŠ ç®€æ´ã€‚
åœ¨è¿æ¥æ—¶ï¼Œç›¸é‚»çš„æ–‡æœ¬å—å°†è‡ªåŠ¨åˆå¹¶ï¼Œæ— éœ€æ˜¾å¼ä½¿ç”¨åŠ å·è¿æ¥æ“ä½œç¬¦ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// å­—ç¬¦ä¸²å’Œæ–‡æœ¬å—è¿æ¥</span>
<span class="token class-name">String</span> code <span class="token operator">=</span> <span class="token string">"public void print(Object o) {"</span> <span class="token operator">+</span>
              <span class="token triple-quoted-string string">"""
                  System.out.println(Objects.toString(o));
              }
              """</span><span class="token punctuation">;</span>
                      
<span class="token comment">// ç›¸é‚»çš„æ–‡æœ¬å—å°†è‡ªåŠ¨åˆå¹¶ï¼Œæ— éœ€æ˜¾å¼ä½¿ç”¨åŠ å·è¿æ¥æ“ä½œç¬¦</span>
<span class="token class-name">String</span> code <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
              public void print(Object o) {
              """</span>
              <span class="token triple-quoted-string string">"""
                  System.out.println(Objects.toString(o));
              }
              """</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œä¸¤ä¸ªç›¸é‚»çš„æ–‡æœ¬å—ä¼šè‡ªåŠ¨è¿æ¥ï¼Œå½¢æˆä¸€ä¸ªæ•´ä½“çš„å­—ç¬¦ä¸²ã€‚
è¿™ç§è‡ªåŠ¨è¿æ¥çš„ç‰¹æ€§è®©ä»£ç æ›´åŠ æ¸…æ™°ï¼Œå‡å°‘äº†å†—ä½™çš„æ‹¼æ¥æ“ä½œã€‚</p>
<h2>æ–‡æœ¬å—æ–°æ–¹æ³•</h2>
<p>æ–‡æœ¬å—å¼•å…¥äº†ä¸€äº›æ–°æ–¹æ³•ï¼Œä»¥ä¾¿æ›´æ–¹ä¾¿åœ°å¤„ç†å¤šè¡Œå­—ç¬¦ä¸²ï¼š</p>
<ul>
<li><code>String::stripIndent()</code>ï¼šå»é™¤å¤šè¡Œå­—ç¬¦ä¸²çš„å‰å¯¼ç©ºæ ¼</li>
<li><code>String::translateEscapes()</code>ï¼šè½¬ä¹‰å¤šè¡Œå­—ç¬¦ä¸²ä¸­çš„è½¬ä¹‰å­—ç¬¦</li>
<li><code>String::formatted()</code>ï¼šåœ¨æ–‡æœ¬å—ä¸­ä½¿ç”¨å ä½ç¬¦è¿›è¡Œå€¼æ›¿æ¢</li>
<li><code>String::lines()ï¼š</code>ï¼šå°†å¤šè¡Œå­—ç¬¦ä¸²æ‹†åˆ†ä¸ºè¡Œçš„æµï¼Œæ–¹ä¾¿é€è¡Œå¤„ç†ã€‚</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Java 16 æ–°ç‰¹æ€§ï¼šinstanceof æ¨¡å¼åŒ¹é…</title>
      <link>https://www.geekyspace.cn/md/java-features/Java16/jep394-pattern-matching-for-instanceof.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java16/jep394-pattern-matching-for-instanceof.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 16 æ–°ç‰¹æ€§ï¼šinstanceof æ¨¡å¼åŒ¹é…</source>
      <description>Java 16 æ–°ç‰¹æ€§ï¼šinstanceof æ¨¡å¼åŒ¹é… Java 16 å¼•å…¥äº†instanceofæ¨¡å¼åŒ¹é…çš„å¢å¼ºè¯­æ³•ï¼Œç”¨äºæ›´ç®€ä¾¿åœ°åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªç±»çš„å®ä¾‹å¹¶è¿›è¡Œç›¸åº”çš„å±€éƒ¨ç±»å‹è½¬æ¢ã€‚ instanceof åŸºç¡€ç”¨æ³• è¿™ä¸ªå¼ºåˆ¶è½¬æ¢é€šå¸¸æ˜¯åœ¨ instanceof æ£€æŸ¥ä¹‹å çš„ç¬¬ä¸€ä»¶äº‹ï¼Œæ‰€ä»¥ä¸ºä»€ä¹ˆä¸å›´ç»•å®ƒä¼˜åŒ–ä¸€ä¸‹è¯­æ³•å‘¢ï¼Ÿ instanceof å¢å¼ºç”¨æ³• è‹¥ ...</description>
      <category>Java</category>
      <pubDate>Thu, 28 Dec 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Java 16 å¼•å…¥äº†<code>instanceof</code><strong>æ¨¡å¼åŒ¹é…</strong>çš„å¢å¼ºè¯­æ³•ï¼Œç”¨äºæ›´ç®€ä¾¿åœ°åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªç±»çš„å®ä¾‹å¹¶è¿›è¡Œç›¸åº”çš„<strong>å±€éƒ¨ç±»å‹è½¬æ¢</strong>ã€‚</p>
<h2>instanceof åŸºç¡€ç”¨æ³•</h2>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> someString <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> obj<span class="token punctuation">;</span>  <span class="token comment">// å¼ºåˆ¶ç±»å‹è½¬æ¢</span>
    <span class="token comment">// ... </span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™ä¸ª<strong>å¼ºåˆ¶è½¬æ¢</strong>é€šå¸¸æ˜¯åœ¨ <code>instanceof</code> æ£€æŸ¥ä¹‹å çš„ç¬¬ä¸€ä»¶äº‹ï¼Œæ‰€ä»¥ä¸ºä»€ä¹ˆä¸å›´ç»•å®ƒä¼˜åŒ–ä¸€ä¸‹è¯­æ³•å‘¢ï¼Ÿ</p>
<h2>instanceof å¢å¼ºç”¨æ³•</h2>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">String</span> someString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token comment">// è¿™é‡Œ someString è¶…å‡ºäº†ä½œç”¨åŸŸ</span>
</code></pre></div><ol>
<li>è‹¥ <code>instanceof</code> æ£€æŸ¥æˆåŠŸï¼Œå°†è‡ªåŠ¨å°†å˜é‡è½¬æ¢ä¸ºæŒ‡å®šç±»å‹</li>
<li>å®šä¹‰çš„å˜é‡å®è´¨ä¸Šæ˜¯ä¸€ä¸ª<strong>å±€éƒ¨å˜é‡</strong>ï¼Œåªåœ¨ifè¯­å¥çš„èŒƒå›´å†…å¯è§</li>
</ol>
<h2>å¸¸è§ç”¨æ³•å»ºè®®</h2>
<p>ä¸ä»…å¦‚æ­¤ï¼ä½¿ç”¨æ¨¡å¼åŒ¹é…ï¼Œæˆ‘ä»¬å¯ä»¥æ›´çµæ´»åœ°åº”ç”¨æ¡ä»¶æµ‹è¯•ã€‚</p>
<ul>
<li>
<p>åˆ©ç”¨å·²å®šä¹‰çš„ objï¼Œåœ¨ä¸éœ€è¦é¢å¤–åµŒå¥—çš„æƒ…å†µä¸‹åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥â€œAwesomeâ€å¼€å¤´</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// ä»¥å‰</span>
<span class="token keyword">return</span> <span class="token punctuation">(</span>someObject <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> someObject<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"Awesome"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç°åœ¨</span>
<span class="token keyword">return</span> someObject <span class="token keyword">instanceof</span> <span class="token class-name">String</span> someString <span class="token operator">&amp;&amp;</span> someString<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"Awesome"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li>
<li>
<p>ç”šè‡³åœ¨ equals æ–¹æ³•ä¸­ï¼Œä»£ç ä¼šæ›´åŠ ç®€æ´</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// ä»¥å‰</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Integer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value <span class="token operator">==</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç°åœ¨</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Integer</span> i<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> value <span class="token operator">==</span> i<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li>
</ul>
<p>å¤šä¹ˆä¸åŒï¼ç°åœ¨ä»£ç ç®€æ´è€Œç›´è§‚ã€‚</p>
<h2>å‘å±•è„‰ç»œ</h2>
<p>è¯¥åŠŸèƒ½ç»å†äº†2ä¸ªé¢„è§ˆç‰ˆæœ¬ï¼ˆJDK 14ä¸­çš„JEP 305ã€JDK 15ä¸­çš„JEP 375ï¼‰ï¼Œæœ€ç»ˆå®šç¨¿äºJDK 16ä¸­çš„JEP 394ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>Java 16 æ–°ç‰¹æ€§ï¼šrecordç±»</title>
      <link>https://www.geekyspace.cn/md/java-features/Java16/jep395-records.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java16/jep395-records.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 16 æ–°ç‰¹æ€§ï¼šrecordç±»</source>
      <description>Java 16 æ–°ç‰¹æ€§ï¼šrecordç±» Java 16 å¼•å…¥çš„è®°å½•ç±»ï¼ˆRecords Classesï¼‰æ˜¯ä¸€ç§ç”¨äºç®€åŒ–ä¸å¯å˜æ•°æ®ç®¡ç†çš„ç‰¹æ®Šç±»ã€‚ å®ƒé€šè¿‡ç´§å‡‘çš„è¯­æ³•æä¾›äº†å¯¹ä¸å¯å˜æ•°æ®çš„æ”¯æŒï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå¸¸è§çš„æ–¹æ³•ï¼Œ å¦‚equals()ã€hashCode()å’ŒtoString()ç­‰ï¼Œä»è€Œå‡å°‘äº†å¼€å‘è€…çš„æ ·æ¿ä»£ç ã€‚ ä¼ ç»ŸJava Beané—®é¢˜ åœ¨å¤„ç†ä¸å¯å˜æ•°æ®æ—¶ï¼Œä¼ ...</description>
      <category>Java</category>
      <pubDate>Fri, 29 Dec 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Java 16 å¼•å…¥çš„<strong>è®°å½•ç±»</strong>ï¼ˆRecords Classesï¼‰æ˜¯ä¸€ç§ç”¨äºç®€åŒ–ä¸å¯å˜æ•°æ®ç®¡ç†çš„ç‰¹æ®Šç±»ã€‚
å®ƒé€šè¿‡ç´§å‡‘çš„è¯­æ³•æä¾›äº†å¯¹ä¸å¯å˜æ•°æ®çš„æ”¯æŒï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå¸¸è§çš„æ–¹æ³•ï¼Œ
å¦‚<code>equals()</code>ã€<code>hashCode()</code>å’Œ<code>toString()</code>ç­‰ï¼Œä»è€Œå‡å°‘äº†å¼€å‘è€…çš„æ ·æ¿ä»£ç ã€‚</p>
<h2>ä¼ ç»ŸJava Beané—®é¢˜</h2>
<p>åœ¨å¤„ç†ä¸å¯å˜æ•°æ®æ—¶ï¼Œä¼ ç»Ÿçš„Java Beanå­˜åœ¨â€œ<mark>ç¹ç</mark>â€å’Œâ€œ<mark>å†—é•¿</mark>â€çš„é—®é¢˜ã€‚
ä¸ºäº†ç®¡ç†å°‘é‡å€¼çš„ä¸å¯å˜æ•°æ®ï¼Œå¼€å‘è€…éœ€è¦ç¼–å†™å¤§é‡ä½ä»·å€¼ã€é‡å¤ä¸”å®¹æ˜“å‡ºé”™çš„ä»£ç ï¼Œ
åŒ…æ‹¬<code>æ„é€ å‡½æ•°</code>ã€<code>è®¿é—®å™¨(getter/setter)</code>ã€<code>equals</code>ã€<code>hashCode</code>ã€<code>toString</code>ç­‰ã€‚</p>
<p>ä¾‹å¦‚ï¼Œç”¨äºæºå¸¦xå’Œyåæ ‡çš„ç±»é€šå¸¸ä¼šæ¼”å˜æˆä»¥ä¸‹ç¹çå½¢å¼ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> x<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> y<span class="token punctuation">;</span>

    <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">int</span> <span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>o <span class="token keyword">instanceof</span> <span class="token class-name">Point</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token class-name">Point</span> other <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Point</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span>
        <span class="token keyword">return</span> other<span class="token punctuation">.</span>x <span class="token operator">==</span> x <span class="token operator">&amp;&amp;</span> other<span class="token punctuation">.</span>y <span class="token operator">==</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">hash</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"Point[x=%d, y=%d]"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>å¼•å…¥recordç±»</h2>
<p><strong>è¯­æ³•å¦‚ä¸‹</strong>ï¼šä½¿ç”¨ <code>record</code><mark>å…³é”®å­—</mark>ï¼ŒæŒ‡å®š<mark>ç±»åç§°</mark>ä¸º Pointï¼Œå®šä¹‰<mark>å‚æ•°åˆ—è¡¨</mark> x å’Œ y ä½œä¸ºç»„ä»¶</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">record</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><p>recordç”³æ˜çš„ç±»ï¼Œå…·å¤‡è¿™äº›ç‰¹ç‚¹ï¼š</p>
<ol>
<li>å®ƒæ˜¯ä¸€ä¸ª<code>final</code>ç±»</li>
<li>è‡ªåŠ¨å®ç°<code>equals</code>ã€<code>hashCode</code>ã€<code>toString</code>å‡½æ•°</li>
<li>æˆå‘˜å˜é‡å‡ä¸º<code>public</code>å±æ€§</li>
</ol>
<p>æ‰€ä»¥ï¼Œå¯¹äºä¹‹å‰å†™çš„Pointç±»ï¼Œå®ƒç­‰ä»·äºä¸€ä¸ªè¿™æ ·çš„ç±»ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// Recordç±»å£°æ˜ï¼Œä½¿ç”¨recordå…³é”®å­—ï¼Œåç§°ä¸ºPointï¼Œå¸¦æœ‰ä¸¤ä¸ªå‚æ•°xå’Œy</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. è‡ªåŠ¨ç”Ÿæˆæˆå‘˜å˜é‡ï¼ˆfieldsï¼‰</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> x<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> y<span class="token punctuation">;</span>

    <span class="token comment">// 2. è‡ªåŠ¨ç”Ÿæˆæ„é€ å‡½æ•°(constructor)</span>
    <span class="token keyword">public</span> <span class="token class-name">Point</span><span class="token punctuation">(</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 3. è‡ªåŠ¨ç”Ÿæˆçš„è®¿é—®æ–¹æ³•</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> x <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> y <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 4. è‡ªåŠ¨ç”Ÿæˆequalså’ŒhashCodeæ–¹æ³•</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> equals <span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// å®ç°ç›¸ç­‰æ€§æ¯”è¾ƒçš„é€»è¾‘</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> hashCode <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ç”Ÿæˆå“ˆå¸Œç çš„é€»è¾‘</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 5. è‡ªåŠ¨ç”ŸæˆtoStringæ–¹æ³•</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> toString <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"Point{"</span> <span class="token operator">+</span>
                <span class="token string">"x="</span> <span class="token operator">+</span> x <span class="token operator">+</span>
                <span class="token string">", y="</span> <span class="token operator">+</span> y <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é€šè¿‡ä½¿ç”¨recordç±»ï¼Œä½ å¯ä»¥æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘è€Œä¸æ˜¯æ ·æ¿ä»£ç ï¼Œæé«˜äº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h2>æ˜¾ç¤ºå£°æ˜ç´§å‡‘æ„é€ å‡½æ•°</h2>
<p>æœªæ˜¾å¼å£°æ˜æ„é€ å‡½æ•°æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”ŸæˆåŒ…å«æ‰€æœ‰æˆå‘˜å˜é‡çš„éšå¼æ„é€ å‡½æ•°ã€‚
å½“æ˜¾å¼å£°æ˜ç´§å‡‘æ„é€ å‡½æ•°å¯ä»¥<mark>çœç•¥å½¢å¼å‚æ•°åˆ—è¡¨</mark>ã€ç¼–è¯‘ååœ¨æ„é€ å‡½æ•°çš„æœ«å°¾<mark>è‡ªåŠ¨åˆ†é…</mark>ç»™ç›¸åº”çš„å½¢å¼å‚æ•°ï¼ˆthis.x = x;ï¼‰ã€‚</p>
<ul>
<li>
<p><strong>éªŒè¯å‚æ•°</strong>çš„ç´§å‡‘æ„é€ å‡½æ•°</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">record</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">,</span> <span class="token class-name">String</span> author<span class="token punctuation">,</span> <span class="token keyword">int</span> pageCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Book</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>pageCount <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"é¡µæ•°å¿…é¡»å¤§äºé›¶."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li>
<li>
<p><strong>è§„èŒƒ</strong>çš„ç´§å‡‘æ„é€ å‡½æ•°</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// è®°å½•ç±» Rational è¡¨ç¤ºæœ‰ç†æ•°ï¼ŒåŒ…å«åˆ†å­ï¼ˆnumï¼‰å’Œåˆ†æ¯ï¼ˆdenomï¼‰ä¸¤ä¸ªæˆå‘˜å˜é‡</span>
<span class="token keyword">record</span> <span class="token class-name">Rational</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token keyword">int</span> denom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Rational</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> gcd <span class="token operator">=</span> <span class="token function">gcd</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> denom<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è®¡ç®—æœ€å¤§å…¬çº¦æ•°</span>
        num <span class="token operator">/=</span> gcd<span class="token punctuation">;</span>                 <span class="token comment">// å°†åˆ†å­é™¤ä»¥æœ€å¤§å…¬çº¦æ•°</span>
        denom <span class="token operator">/=</span> gcd<span class="token punctuation">;</span>               <span class="token comment">// å°†åˆ†æ¯é™¤ä»¥æœ€å¤§å…¬çº¦æ•°</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™ä¸ªå£°æ˜ç­‰åŒäºä¼ ç»Ÿçš„æ„é€ å‡½æ•°å½¢å¼ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">record</span> <span class="token class-name">Rational</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token keyword">int</span> denom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Rational</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token keyword">int</span> demon<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// é€»è¾‘ä»£ç </span>
        <span class="token keyword">int</span> gcd <span class="token operator">=</span> <span class="token function">gcd</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> denom<span class="token punctuation">)</span><span class="token punctuation">;</span>
        num <span class="token operator">/=</span> gcd<span class="token punctuation">;</span>
        denom <span class="token operator">/=</span> gcd<span class="token punctuation">;</span>
        <span class="token comment">// èµ‹å€¼ä»£ç </span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>denom <span class="token operator">=</span> denom<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li>
<li>
<p>è®°å½•ç±»<strong>è¯­ä¹‰ä¸€è‡´æ€§</strong></p>
<p>ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹æ–¹å¼å£°æ˜çš„è®°å½•ç±»Rï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">record</span> <span class="token class-name">R</span><span class="token punctuation">(</span><span class="token class-name">T1</span> c1<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token class-name">Tn</span> cn<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœé€šè¿‡ä»¥ä¸‹æ–¹å¼å¤åˆ¶Rçš„å®ä¾‹r1ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">R</span> r2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">R</span><span class="token punctuation">(</span>r1<span class="token punctuation">.</span><span class="token function">c1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> r1<span class="token punctuation">.</span><span class="token function">c2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> r1<span class="token punctuation">.</span><span class="token function">cn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åˆ™å‡è®¾ r1 ä¸æ˜¯ç©ºå¼•ç”¨ï¼Œè¡¨è¾¾å¼ r1.equals(r2) æ€»æ˜¯ä¸º trueã€‚
è¿™æ˜¯å› ä¸ºè®°å½•ç±»çš„éšå¼å£°æ˜çš„ equals æ–¹æ³•ä¿è¯äº†ç›¸åŒå­—æ®µå€¼çš„ä¸¤ä¸ªè®°å½•å®ä¾‹ç›¸ç­‰ã€‚</p>
<blockquote>
<p>Tips: ç¨‹åºå‘˜éœ€è¦è°¨æ…ç¡®ä¿æ˜¾å¼å£°æ˜çš„æ–¹æ³•ç»´æŒè¯­ä¹‰ä¸€è‡´æ€§</p>
</blockquote>
</li>
<li>
<p>é¿å…ä¸è‰¯é£æ ¼çš„ä»£ç </p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">record</span> <span class="token class-name">SmallPoint</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">100</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">100</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ˜¯ä¸€ä¸ªä¸è‰¯é£æ ¼çš„ä»£ç ï¼Œè¿åäº†è¯­ä¹‰ä¸€è‡´æ€§çš„åŸåˆ™ï¼Œè®¿é—®å™¨<code>x()</code>,<code>y()</code>æ–¹æ³•è°ƒæ•´ç±»å®ä¾‹çš„çŠ¶æ€ï¼›
<strong>æ”¹è¿›å»ºè®®</strong>ï¼Œ å¦‚æœéœ€è¦é™åˆ¶åæ ‡å€¼çš„èŒƒå›´ï¼Œåº”è¯¥åœ¨æ„é€ å‡½æ•°æˆ–å…¶ä»–æ˜ç¡®çš„ä½ç½®å¤„ç†ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">record</span> <span class="token class-name">SmallPoint</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç´§å‡‘æ„é€ å‡½æ•°ä¸­é™åˆ¶åæ ‡å€¼çš„èŒƒå›´</span>
  <span class="token keyword">public</span> <span class="token class-name">SmallPoint</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li>
</ul>
<h2>å‘å±•è„‰ç»œ</h2>
<p><code>record</code> ç±»æœ€åˆåœ¨JDK 14é¢„è§ˆç‰ˆ(JEP 359)æå‡ºï¼Œéšååœ¨JDK 15é¢„è§ˆç‰ˆ(JEP 384)å†æ¬¡æ¨å‡ºã€‚
æœ€ç»ˆï¼Œå®ƒåœ¨JDK 16ä¸­(JEP 395)æ­£å¼å‘å¸ƒï¼Œæˆä¸ºJavaè¯­è¨€çš„ä¸€é¡¹é‡è¦ç‰¹æ€§ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>Java 17 æ–°ç‰¹æ€§ï¼šswitchæ¨¡å¼åŒ¹é…ï¼ˆPreviewï¼‰</title>
      <link>https://www.geekyspace.cn/md/java-features/Java17/jep406-pattern-matching-for-switch-preview.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java17/jep406-pattern-matching-for-switch-preview.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 17 æ–°ç‰¹æ€§ï¼šswitchæ¨¡å¼åŒ¹é…ï¼ˆPreviewï¼‰</source>
      <description>Java 17 æ–°ç‰¹æ€§ï¼šswitchæ¨¡å¼åŒ¹é…ï¼ˆPreviewï¼‰ å½“caseæ ‡ç­¾å¯ä»¥æœ‰æ¨¡å¼æ—¶ï¼Œæœ‰å¦‚ä¸‹å››ä¸ªä¸»è¦çš„è®¾è®¡é—®é¢˜ï¼Œæˆ‘ä»¬ä¸€ä¸€æ¥çœ‹ï¼š å¢å¼ºç±»å‹æ£€æŸ¥ switchè¡¨è¾¾å¼å’Œè¯­å¥çš„å®Œæ•´æ€§ æ¨¡å¼å˜é‡å£°æ˜çš„ä½œç”¨åŸŸ å¤„ç†null æ¨¡å¼åŒ¹é…è®¾è®¡ å¢å¼ºç±»å‹æ£€æŸ¥ é€šè¿‡æ‰©å±•switchæ¨¡å¼åŒ¹é…çš„caseæ ‡ç­¾ï¼Œç°åœ¨æ”¯æŒé™¤äº†åŸå§‹æ•°æ®ç±»å‹ï¼ˆcharã€byteã€short æˆ– i...</description>
      <category>Java</category>
      <pubDate>Sat, 30 Dec 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>å½“caseæ ‡ç­¾å¯ä»¥æœ‰æ¨¡å¼æ—¶ï¼Œæœ‰å¦‚ä¸‹å››ä¸ªä¸»è¦çš„è®¾è®¡é—®é¢˜ï¼Œæˆ‘ä»¬ä¸€ä¸€æ¥çœ‹ï¼š</p>
<ol>
<li>å¢å¼ºç±»å‹æ£€æŸ¥</li>
<li>switchè¡¨è¾¾å¼å’Œè¯­å¥çš„å®Œæ•´æ€§</li>
<li>æ¨¡å¼å˜é‡å£°æ˜çš„ä½œç”¨åŸŸ</li>
<li>å¤„ç†null</li>
</ol>
<h2>æ¨¡å¼åŒ¹é…è®¾è®¡</h2>
<h3>å¢å¼ºç±»å‹æ£€æŸ¥</h3>
<p>é€šè¿‡æ‰©å±•<code>switch</code>æ¨¡å¼åŒ¹é…çš„<code>case</code>æ ‡ç­¾ï¼Œç°åœ¨æ”¯æŒé™¤äº†<strong>åŸå§‹æ•°æ®ç±»å‹</strong>ï¼ˆ<code>char</code>ã€<code>byte</code>ã€<code>short</code> æˆ– <code>int</code>ï¼‰ä¹‹å¤–ï¼Œ
ç›¸åº”çš„<strong>åŒ…è£…ç±»</strong>ï¼ˆ<code>Character</code>ã€<code>Byte</code>ã€<code>Short</code> æˆ– <code>Integer</code>ï¼‰ã€<code>String</code> ä»¥åŠ<code>Enum</code>ç±»å‹ç­‰<strong>ä»»ä½•å¼•ç”¨ç±»å‹</strong>ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">record</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">enum</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span> <span class="token constant">RED</span><span class="token punctuation">,</span> <span class="token constant">GREEN</span><span class="token punctuation">,</span> <span class="token constant">BLUE</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">typeTester</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token keyword">null</span>     <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">String</span> s <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"String"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">Color</span> c  <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Enumï¼Œé¢œè‰²å…·æœ‰ "</span> <span class="token operator">+</span> <span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token string">" ä¸ªå€¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">Point</span> p  <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Record Class: "</span> <span class="token operator">+</span> p<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ia <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Arrayï¼Œé•¿åº¦ä¸º"</span> <span class="token operator">+</span> ia<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span>       <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å…¶ä»–æƒ…å†µ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote>
<p><strong>æ³¨æ„âš ï¸ï¼šè¦é¿å…æ¨¡å¼æ ‡ç­¾æ”¯é…</strong>ï¼ˆç¼–è¯‘å¼‚å¸¸ï¼‰</p>
<p>å¦‚æœä¸€ä¸ªæ¨¡å¼æ ‡ç­¾åœ¨switchå—ä¸­è¢«å…ˆå‰çš„æ¨¡å¼æ ‡ç­¾æ”¯é…, æˆ–è€…å­˜åœ¨å¤šä¸ªå…¨åŒ¹é…çš„æ ‡ç­¾ï¼ˆdefault å’Œ totalç±»å‹æ¨¡å¼ï¼‰, åˆ™ä¼šäº§ç”Ÿç¼–è¯‘æ—¶é”™è¯¯ã€‚</p>
</blockquote>
<ul>
<li>ä¾‹1: æ¨¡å¼ <code>case CharSequence cs</code> æ”¯é… <code>case String s</code> ,å› ä¸º String æ˜¯ CharSequence çš„å­ç±»</li>
<li>ä¾‹2: æ€»æ¨¡å¼çš„æƒ…å†µï¼Œå¦‚ <code>case p</code> æ”¯é… <code>case null</code> æ¨¡å¼,å› ä¸ºæ€»æ¨¡å¼åŒ¹é…æ‰€æœ‰å€¼ï¼ŒåŒ…æ‹¬null</li>
<li>ä¾‹3: æ¨¡å¼ <code>case p</code> æ”¯é… <code>case p &amp;&amp; e</code> ,å› ä¸ºæ»¡è¶³ç¬¬ä¸€ä¸ªæ¨¡å¼çš„å€¼ä¹Ÿæ»¡è¶³ç¬¬äºŒä¸ªæ¨¡å¼</li>
<li>ä¾‹4: æ¨¡å¼ <code>case String s</code> æ”¯é…äº†å¸¦æ¡ä»¶çš„æ¨¡å¼ <code>case String s &amp;&amp; s.length() &gt; 0</code></li>
</ul>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">switch</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token class-name">CharSequence</span> cs <span class="token operator">-&gt;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸€ä¸ªé•¿åº¦ä¸º"</span> <span class="token operator">+</span> cs<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"çš„åºåˆ—"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token class-name">String</span> s <span class="token operator">-&gt;</span>    <span class="token comment">// ç¼–è¯‘é”™è¯¯ - æ¨¡å¼è¢«å‰ä¸€ä¸ªæ¨¡å¼æ”¯é…</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š"</span> <span class="token operator">+</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>switchè¡¨è¾¾å¼å’Œè¯­å¥çš„å®Œæ•´æ€§</h3>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œé€šè¿‡æ·»åŠ <code>default</code>æ ‡ç­¾ï¼Œå¯ä»¥ç¡®ä¿<code>switch</code>å—çš„å®Œæ•´æ€§ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printType</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token class-name">String</span> s <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"String"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">Integer</span> i <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Integer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Other"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœswitchè¡¨è¾¾å¼çš„ç±»å‹æ˜¯<strong>å¯†å°ç±»</strong>(<a href="https://openjdk.org/jeps/409" target="_blank" rel="noopener noreferrer">JEP 409</a>)ï¼Œ
åˆ™ç±»å‹è¦†ç›–æ£€æŸ¥ä¼šè€ƒè™‘å¯†å°ç±»çš„permitså­å¥ï¼Œä»¥ç¡®ä¿switchå—çš„å®Œæ•´æ€§ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå¯†å°æ¥å£Animalçš„ç¤ºä¾‹ï¼ŒåŒ…æ‹¬Dogå’ŒCatä¸¤ä¸ªå…è®¸çš„å­ç±»ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">sealed</span> <span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token keyword">permits</span> <span class="token class-name">Dog</span><span class="token punctuation">,</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">getSound</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token class-name">Dog</span> d <span class="token operator">-&gt;</span> <span class="token string">"Woof!"</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">Cat</span> c <span class="token operator">-&gt;</span> <span class="token string">"Meow!"</span><span class="token punctuation">;</span>
        <span class="token comment">// no default needed!</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äºç¼–è¯‘å™¨çŸ¥é“åªæœ‰Dogå’ŒCatæ˜¯å¯èƒ½çš„ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥ä¸éœ€è¦<code>default</code>æ ‡ç­¾ã€‚
åŒæ ·ï¼Œå¯¹äºæšä¸¾ç±»ï¼Œæ¯ä¸ªå¸¸é‡éƒ½æœ‰ä¸€ä¸ªå­å¥ï¼Œä¹Ÿä¸éœ€è¦defaultæ ‡ç­¾ã€‚</p>
<h3>æ¨¡å¼å˜é‡å£°æ˜çš„ä½œç”¨åŸŸ</h3>
<p><code>instanceof</code>(<a href="https://openjdk.org/jeps/394" target="_blank" rel="noopener noreferrer">JEP 394</a>)è¿›è¡Œ<strong>æ¨¡å¼åŒ¹é…</strong>ï¼Œ
<strong>æ¨¡å¼å˜é‡</strong>çš„ä½œç”¨åŸŸé™å®šåœ¨<code>åŒ¹é…çš„æ¡ä»¶è¡¨è¾¾å¼</code>å’Œç›¸åº”çš„<code>then</code>å—ä¸­ã€‚ å¦‚æœåŒ¹é…å¤±è´¥ï¼Œæ¨¡å¼å˜é‡åœ¨<code>else</code>å—ä¸­ä¸å¯è§ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>o <span class="token keyword">instanceof</span> <span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Not a string"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>switch</code>è¯­å¥çš„<code>case</code>æ ‡ç­¾è¿›è¡Œ<strong>æ¨¡å¼åŒ¹é…</strong>ï¼Œæœ‰ä»¥ä¸‹ä¸¤æ¡è§„åˆ™ï¼š</p>
<ol>
<li>
<p><code>-&gt;</code>å½¢å¼ï¼šä½œç”¨åŸŸåŒ…æ‹¬ç®­å¤´å³ä¾§çš„è¡¨è¾¾å¼ã€å—æˆ– throw è¯­å¥</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token class-name">Character</span> c <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">charValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Ding!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Character"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">case</span> <span class="token class-name">Integer</span> i <span class="token operator">-&gt;</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">"Invalid Integer argument of value "</span> <span class="token operator">+</span> i<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li>
<li>
<p><code>:</code>å½¢å¼ï¼Œåˆ™å…¶ä½œç”¨åŸŸåŒ…æ‹¬è¯­å¥ç»„çš„å—è¯­å¥ï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª<code>switch</code>æ ‡ç­¾æˆ–å…¶ä»–æ§åˆ¶æµè¯­å¥</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token class-name">Character</span> c<span class="token operator">:</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">charValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Ding "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">charValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Tab "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"character"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li>
</ol>
<h3>å¤„ç†null</h3>
<p>å¼•å…¥æ–°çš„<code>null</code>æ ‡ç­¾ï¼Œç”¨äºæ˜ç¡®å¤„ç†é€‰æ‹©è¡¨è¾¾å¼ä¸º<code>null</code>çš„æƒ…å†µ</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// test(null) ä¸å†æŠ›å‡ºNullPointerExceptionï¼Œè€Œæ˜¯æ‰“å° "null!"</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token keyword">null</span>     <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"null!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">String</span> s <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"String"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span>       <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Something else"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç”±ç©ºæ ‡ç­¾äº§ç”Ÿçš„æ–°æ ‡ç­¾å½¢å¼ï¼Œ JDK 16ä¸­ï¼Œ<code>switch</code>å—æ”¯æŒä¸¤ç§é£æ ¼ï¼Œ</p>
<ol>
<li><code>:</code> å½¢å¼ï¼Œå…è®¸<code>fallthrough</code>ï¼Œå¤šä¸ªæ ‡ç­¾é€šå¸¸å†™ä¸º<code>case l1: case l2:</code></li>
<li><code>-&gt;</code>å½¢å¼ï¼Œä¸å…è®¸<code>fallthrough</code>ï¼Œå¤šä¸ªæ ‡ç­¾å†™ä¸º<code>case l1, l2-&gt;</code></li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// å¤„ç† null å’Œ String æ ‡ç­¾ï¼Œä½¿ç”¨ : å½¢å¼</span>
<span class="token keyword">switch</span> <span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">case</span> <span class="token keyword">null</span><span class="token operator">:</span> <span class="token keyword">case</span> <span class="token class-name">String</span> s<span class="token operator">:</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"String, including null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">break</span><span class="token punctuation">;</span>
   <span class="token comment">// æ›´å¤šçš„ cases...</span>

<span class="token punctuation">}</span>

<span class="token comment">// ç»“åˆ null case å’Œ default æ ‡ç­¾ï¼Œä½¿ç”¨ -&gt; å½¢å¼</span>
<span class="token keyword">switch</span> <span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// æ›´å¤šçš„ cases...</span>
   <span class="token keyword">case</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">default</span> <span class="token operator">-&gt;</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"The rest (including null)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>ä¿æŠ¤æ¨¡å¼å’Œæ‹¬å·æ¨¡å¼</h2>
<p>ä¸ºäº†å¢å¼ºä»£ç çš„å¯è¯»æ€§å¹¶é¿å…æ­§ä¹‰ï¼Œå¼•å…¥äº†ä¸¤ç§æ–°çš„æ¨¡å¼åŒ¹é…æŠ€æœ¯ï¼š</p>
<ul>
<li>ä¿æŠ¤æ¨¡å¼ (guarded patterns)ï¼Œå…è®¸åœ¨æ¨¡å¼åŒ¹é…æˆåŠŸåæ·»åŠ ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼</li>
<li>æ‹¬å·æ¨¡å¼ (parenthesized patterns)ï¼Œå°†æ¨¡å¼æ”¾åœ¨æ‹¬å·ä¸­ï¼Œé¿å…æ­§ä¹‰ï¼Œæ§åˆ¶é¡ºåº</li>
</ul>
<p>åœ¨æˆåŠŸåŒ¹é…æ¨¡å¼åï¼Œæˆ‘ä»¬ç»å¸¸ä¼šè¿›ä¸€æ­¥æµ‹è¯•åŒ¹é…ç»“æœã€‚è¿™ä¼šå¯¼è‡´ä»£ç å˜å¾—ç¹çï¼Œä¾‹å¦‚ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token class-name">String</span> s<span class="token operator">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨<strong>ä¿æŠ¤æ¨¡å¼</strong>ï¼Œå†™æˆ<code>p &amp;&amp; e</code>æ”¹è¿›ä¸Šé¢çš„ä»£ç ï¼Œä½¿å…¶æ›´åŠ ç®€æ´</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token class-name">String</span> s <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">-&gt;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token keyword">case</span> <span class="token class-name">String</span> s                    <span class="token operator">-&gt;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote>
<p>JDK 17ä¸­è¿˜åŠ å…¥äº†<strong>æ‹¬å·æ¨¡å¼</strong>ï¼Œä»¥é¿å…è§£ææ­§ä¹‰ã€‚æ”¯æŒæ‹¬å·å†…å†™å…¥<code>(p)</code> å…¶ä¸­pæ˜¯ä¸€ä¸ªæ¨¡å¼ã€‚åœ¨JDK 21ä¸­ï¼Œæ‹¬å·æ¨¡å¼è¢«ç§»é™¤ã€‚</p>
</blockquote>
<h2>å¯ç”¨é¢„è§ˆåŠŸèƒ½</h2>
<p>Previewé˜¶æ®µçš„åŠŸèƒ½å¹¶ä¸æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œéœ€è¦åœ¨ç¼–è¯‘å’Œè¿è¡Œæ—¶å¯ç”¨ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">java</span> --enable-preview <span class="token parameter variable">--source</span> <span class="token number">17</span> PatternMatching.java
</code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Java 17 æ–°ç‰¹æ€§ï¼šsealedç±»</title>
      <link>https://www.geekyspace.cn/md/java-features/Java17/jep409-sealed-classes.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java17/jep409-sealed-classes.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 17 æ–°ç‰¹æ€§ï¼šsealedç±»</source>
      <description>Java 17 æ–°ç‰¹æ€§ï¼šsealedç±» Java 17 ä¸­å¼•å…¥äº†å¯†å°ç±»ï¼ˆSealed Classesï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§é™åˆ¶çš„ç±»å’Œæ¥å£ï¼Œ å¯ä»¥æ§åˆ¶å“ªäº›ç±»ç»§æ‰¿æˆ–å®ç°å®ƒï¼Œä¿è¯åœ¨ç¼–è¯‘æ—¶å°±èƒ½å¤Ÿç¡®å®šç±»çš„ç»§æ‰¿å…³ç³»ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ å¯†å°ç±»è¯­æ³• å¯†å°ç±»çš„å£°æ˜ä½¿ç”¨å…³é”®å­— sealedï¼Œå¹¶é€šè¿‡ permits å…³é”®å­—å£°æ˜å…è®¸ç»§æ‰¿æˆ–å®ç°çš„ç±»ã€‚ å¯†å°ç±»å¯¹å…¶å…è®¸çš„å­ç±»æ–½åŠ ...</description>
      <category>Java</category>
      <pubDate>Sun, 31 Dec 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Java 17 ä¸­å¼•å…¥äº†<strong>å¯†å°ç±»</strong>ï¼ˆSealed Classesï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§é™åˆ¶çš„ç±»å’Œæ¥å£ï¼Œ
å¯ä»¥æ§åˆ¶å“ªäº›ç±»ç»§æ‰¿æˆ–å®ç°å®ƒï¼Œä¿è¯åœ¨ç¼–è¯‘æ—¶å°±èƒ½å¤Ÿç¡®å®šç±»çš„ç»§æ‰¿å…³ç³»ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h2>å¯†å°ç±»è¯­æ³•</h2>
<p>å¯†å°ç±»çš„å£°æ˜ä½¿ç”¨å…³é”®å­— <code>sealed</code>ï¼Œå¹¶é€šè¿‡ <code>permits</code> å…³é”®å­—å£°æ˜å…è®¸ç»§æ‰¿æˆ–å®ç°çš„ç±»ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// å¯†å°ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">sealed</span> <span class="token keyword">class</span> ç±»å <span class="token keyword">extends</span> çˆ¶ç±»å <span class="token keyword">permits</span> å­ç±»å<span class="token number">1</span><span class="token punctuation">,</span> å­ç±»å<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç±»çš„æˆå‘˜</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¯†å°æ¥å£</span>
<span class="token keyword">public</span> <span class="token keyword">sealed</span> <span class="token keyword">interface</span> æ¥å£å <span class="token keyword">extends</span> çˆ¶æ¥å£å <span class="token keyword">permits</span> å­ç±»å<span class="token number">1</span><span class="token punctuation">,</span> å­ç±»å<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ¥å£çš„æˆå‘˜</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯†å°ç±»å¯¹å…¶å…è®¸çš„å­ç±»æ–½åŠ äº†ä¸‰ä¸ªçº¦æŸï¼š</p>
<ol>
<li>å¯†å°ç±»åŠå…¶å…è®¸çš„å­ç±»å¿…é¡»å±äºåŒä¸€ä¸ªæ¨¡å—æˆ–åŒä¸€åŒ…ï¼ˆå¯¹äºæœªå‘½åæ¨¡å—ï¼‰</li>
<li>æ¯ä¸ªå…è®¸çš„å­ç±»å¿…é¡»ç›´æ¥æ‰©å±•å¯†å°ç±»</li>
<li>æ¯ä¸ªå…è®¸çš„å­ç±»å¿…é¡»ä½¿ç”¨ä¿®é¥°ç¬¦æè¿°å…¶ç»§æ‰¿å…³ç³»ï¼š
<ul>
<li><code>final</code>ï¼šè¡¨ç¤ºè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿ï¼ˆè®°å½•ç±»éšå¼å£°æ˜ä¸º <code>final</code>ï¼‰</li>
<li><code>sealed</code>ï¼šè¡¨ç¤ºè¯¥ç±»å¯ä»¥è¢«ç»§æ‰¿ï¼Œä½†åªèƒ½è¢«å…è®¸çš„å­ç±»ç»§æ‰¿</li>
<li><code>non-sealed</code>ï¼šè¡¨ç¤ºè¯¥ç±»å¯ä»¥è¢«ç»§æ‰¿ï¼Œä¸”å¯ä»¥è¢«ä»»æ„ç±»ç»§æ‰¿</li>
</ul>
</li>
</ol>
<h2>å†å²é™åˆ¶ç»§æ‰¿æ‰‹æ®µ</h2>
<p>å¯¹äºç»§æ‰¿èƒ½åŠ›çš„é™åˆ¶ï¼ŒJava è¯­è¨€å·²ç»æä¾›äº†ä»¥ä¸‹å‡ ç§æ‰‹æ®µï¼š</p>
<ol>
<li><code>final</code>ä¿®é¥°ç±»ï¼Œè¿™æ ·ç±»å°±æ— æ³•è¢«ç»§æ‰¿äº†</li>
<li>æ„é€ å‡½æ•°å£°æ˜ä¸º<code>private</code>æˆ–<code>package-private</code>ï¼Œåˆ™åªèƒ½åœ¨åŒä¸€ç±»æˆ–åŒä¸€åŒ…ä¸­åˆ›å»ºè¯¥ç±»çš„å­ç±»</li>
</ol>
<h2>å‘å±•è„‰ç»œ</h2>
<p>è¯¥åŠŸèƒ½ç»å†äº†2ä¸ªé¢„è§ˆç‰ˆæœ¬ï¼ˆJDK 15ä¸­çš„JEP 360ã€JDK 16ä¸­çš„JEP 397ï¼‰ï¼Œæœ€ç»ˆå®šç¨¿äºJDK 17ä¸­çš„JEP 409ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>Java 18 æ–°ç‰¹æ€§ï¼šæŒ‡å®šUTF-8ä¸ºé»˜è®¤å­—ç¬¦é›†</title>
      <link>https://www.geekyspace.cn/md/java-features/Java18/jep400-utf8-by-default.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java18/jep400-utf8-by-default.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 18 æ–°ç‰¹æ€§ï¼šæŒ‡å®šUTF-8ä¸ºé»˜è®¤å­—ç¬¦é›†</source>
      <description>Java 18 æ–°ç‰¹æ€§ï¼šæŒ‡å®šUTF-8ä¸ºé»˜è®¤å­—ç¬¦é›† åœ¨Java 18ä¸­ï¼Œå°†UTF-8æŒ‡å®šä¸ºæ ‡å‡†Java API çš„é»˜è®¤å­—ç¬¦é›†ï¼Œ ä»¥æé«˜Javaç¨‹åºåœ¨ä¸åŒå®ç°ã€æ“ä½œç³»ç»Ÿã€åŒºåŸŸè®¾ç½®å’Œé…ç½®ä¸‹çš„ä¸€è‡´æ€§ã€‚ ç›®æ ‡ ä½¿Javaç¨‹åºåœ¨ä¾èµ–é»˜è®¤å­—ç¬¦é›†çš„ä»£ç ä¸Šæ›´åŠ å¯é¢„æµ‹å’Œå¯ç§»æ¤ æ˜ç¡®æ ‡å‡†Java APIåœ¨ä½•å¤„ä½¿ç”¨é»˜è®¤å­—ç¬¦é›† åœ¨æ ‡å‡†Java APIä¸­ç»Ÿä¸€ä½¿ç”¨UTF-8ï¼Œé™¤äº†...</description>
      <category>Java</category>
      <pubDate>Mon, 01 Jan 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>åœ¨Java 18ä¸­ï¼Œå°†<code>UTF-8</code>æŒ‡å®šä¸ºæ ‡å‡†Java API çš„é»˜è®¤å­—ç¬¦é›†ï¼Œ
ä»¥æé«˜Javaç¨‹åºåœ¨ä¸åŒå®ç°ã€æ“ä½œç³»ç»Ÿã€åŒºåŸŸè®¾ç½®å’Œé…ç½®ä¸‹çš„ä¸€è‡´æ€§ã€‚</p>
<h2>ç›®æ ‡</h2>
<ul>
<li>ä½¿Javaç¨‹åºåœ¨ä¾èµ–é»˜è®¤å­—ç¬¦é›†çš„ä»£ç ä¸Šæ›´åŠ å¯é¢„æµ‹å’Œ<strong>å¯ç§»æ¤</strong></li>
<li>æ˜ç¡®æ ‡å‡†Java APIåœ¨ä½•å¤„ä½¿ç”¨é»˜è®¤å­—ç¬¦é›†</li>
<li>åœ¨æ ‡å‡†Java APIä¸­ç»Ÿä¸€ä½¿ç”¨UTF-8ï¼Œé™¤äº†æ§åˆ¶å°I/O</li>
</ul>
<p>å°½ç®¡è¿™é¡¹å·¥ä½œå¯èƒ½ä¼šå‘ç°æ–°çš„ä¾¿åˆ©æ–¹æ³•å¯èƒ½ä¼šä½¿ç°æœ‰çš„APIæ›´æ˜“äºä½¿ç”¨ï¼Œä½†è¿™ä¸€æ›´æ”¹å¹¶ä¸æ˜¯è¦å¼ƒç”¨æˆ–åˆ é™¤ä¾èµ–é»˜è®¤å­—ç¬¦é›†çš„æ ‡å‡†Java APIã€‚</p>
<h2>åŠ¨æœº</h2>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒJava API ä¼šæ ¹æ®<strong>è¿è¡Œæ—¶ç¯å¢ƒ</strong>ï¼ˆæ“ä½œç³»ç»Ÿã€ç”¨æˆ·çš„åŒºåŸŸè®¾ç½®ç­‰ï¼‰é€‰æ‹©é»˜è®¤å­—ç¬¦é›†ã€‚
ä¸ºäº†æé«˜ Java API çš„ä¸€è‡´æ€§å¹¶é™ä½æ½œåœ¨çš„å…¼å®¹æ€§é—®é¢˜ï¼Œæˆ‘ä»¬å»ºè®®å°†æ‰€æœ‰ Java API ç»Ÿä¸€ä½¿ç”¨ <code>UTF-8</code> ä½œä¸ºé»˜è®¤å­—ç¬¦é›†ã€‚
å°½ç®¡è¿™ä¸€å˜æ›´å¯èƒ½å¯¹è¿ç§»åˆ° JDK 18 çš„ç¨‹åºäº§ç”Ÿå…¼å®¹æ€§å½±å“ï¼Œä½†æˆ‘ä»¬æä¾›äº†ä¸€ä¸ª <code>COMPAT</code> é€‰é¡¹ï¼Œå…è®¸æ¢å¤åˆ°ä¹‹å‰çš„è¡Œä¸ºï¼Œå³é»˜è®¤å­—ç¬¦é›†å–å†³äºç¯å¢ƒã€‚</p>
<h2>æè¿°</h2>
<h3>å…¼å®¹æ€§å±å®³ç¤ºä¾‹</h3>
<p>åœ¨MacOSä¸Šä»¥<code>UTF-8</code>ç¼–ç çš„æ—¥è¯­æ–‡æœ¬æ–‡ä»¶åœ¨Windowsä¸Šä»¥ç¾è‹±æˆ–æ—¥è¯­åŒºåŸŸè®¾ç½®è¯»å–æ—¶è¢«æŸå</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>FileReader</span><span class="token punctuation">(</span>â€œhello<span class="token punctuation">.</span>txtâ€<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> â€œã“ã‚“ã«ã¡ã¯â€ <span class="token punctuation">(</span>macOS<span class="token punctuation">)</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>FileReader</span><span class="token punctuation">(</span>â€œhello<span class="token punctuation">.</span>txtâ€<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> â€œÃ£<span class="token operator">?</span>â€œÃ£â€šâ€œÃ£<span class="token operator">?</span>Â«Ã£<span class="token operator">?</span>Â¡Ã£<span class="token operator">?</span> â€ <span class="token punctuation">(</span><span class="token class-name">Windows</span> <span class="token punctuation">(</span>en<span class="token operator">-</span><span class="token constant">US</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>FileReader</span><span class="token punctuation">(</span>â€œhello<span class="token punctuation">.</span>txtâ€<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> â€œç¸ºã‚©ç¸ºã€‚ç¸ºãƒƒâ€ <span class="token punctuation">(</span><span class="token class-name">Windows</span> <span class="token punctuation">(</span>ja<span class="token operator">-</span><span class="token constant">JP</span><span class="token punctuation">)</span>
</code></pre></div><h3>æŸ¥è¯¢é»˜è®¤å­—ç¬¦é›†</h3>
<p>é€šè¿‡æ–¹æ³• <code>java.nio.charset.Charset.defaultCharset()</code> å¯ä»¥è·å–é»˜è®¤å­—ç¬¦é›†ã€‚</p>
<p>å¦å¤–ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥å¿«é€ŸæŸ¥çœ‹å½“å‰ JDK çš„é»˜è®¤å­—ç¬¦é›†ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>java <span class="token operator">-</span><span class="token class-name">XshowSettings</span><span class="token operator">:</span>properties <span class="token operator">-</span>version <span class="token number">2</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span><span class="token number">1</span> <span class="token operator">|</span> grep file<span class="token punctuation">.</span>encoding
</code></pre></div><p>å¦‚æœæƒ³åœ¨æ‰€æœ‰ Java ç‰ˆæœ¬ä¸Šè·å–ä»ç¯å¢ƒä¸­ç¡®å®šçš„å­—ç¬¦é›†ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// è·å–native.encodingç³»ç»Ÿå±æ€§ï¼ˆåœ¨Java 18åŠæ›´é«˜ç‰ˆæœ¬ä¸Šèµ‹å€¼ï¼‰</span>
<span class="token class-name">String</span> encoding <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"native.encoding"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦é€‰æ‹©å­—ç¬¦é›†ï¼Œå¦‚æœencodingä¸ä¸ºnullï¼Œåˆ™ä½¿ç”¨æŒ‡å®šå­—ç¬¦é›†ï¼Œå¦åˆ™ä½¿ç”¨é»˜è®¤å­—ç¬¦é›†</span>
<span class="token class-name">Charset</span> cs <span class="token operator">=</span> <span class="token punctuation">(</span>encoding <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>encoding<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">defaultCharset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ä½¿ç”¨æŒ‡å®šå­—ç¬¦é›†åˆ›å»º FileReader å¯¹è±¡ï¼Œæ‰“å¼€åä¸º "file.txt" çš„æ–‡ä»¶</span>
<span class="token keyword">var</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"file.txt"</span><span class="token punctuation">,</span> cs<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3>å…¼å®¹ä½¿ç”¨é»˜è®¤å­—ç¬¦é›†APIï¼ˆè¿ç§»ï¼‰</h3>
<p>å¤šä¸ªæ ‡å‡† Java API ä½¿ç”¨é»˜è®¤å­—ç¬¦é›†ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>åœ¨ java.io åŒ…ä¸­ï¼ŒInputStreamReaderã€FileReaderã€OutputStreamWriterã€FileWriter å’Œ PrintStream
æä¾›äº†æ„é€ å‡½æ•°ï¼Œç”¨äºåˆ›å»ºä½¿ç”¨é»˜è®¤å­—ç¬¦é›†è¿›è¡Œç¼–ç æˆ–è§£ç çš„è¯»å–å™¨ã€å†™å…¥å™¨å’Œæ‰“å°æµ</li>
<li>åœ¨ java.util åŒ…ä¸­ï¼ŒFormatter å’Œ Scanner æä¾›äº†æ„é€ å‡½æ•°ï¼Œä½¿ç”¨é»˜è®¤å­—ç¬¦é›†è¿›è¡Œæ“ä½œ</li>
<li>åœ¨ java.net åŒ…ä¸­ï¼ŒURLEncoder å’Œ URLDecoder æä¾›äº†ä½¿ç”¨é»˜è®¤å­—ç¬¦é›†çš„å·²å¼ƒç”¨æ–¹æ³•</li>
</ul>
<p>æˆ‘ä»¬å°†æ›´æ–°æ‰€æœ‰ä½¿ç”¨ Charset.defaultCharset() è¿›è¡Œäº¤å‰å¼•ç”¨çš„æ ‡å‡† Java API çš„è§„èŒƒã€‚
è¿™äº› API åŒ…æ‹¬ä¸Šè¿°æåˆ°çš„ APIï¼Œä½†ä¸åŒ…æ‹¬ System.out å’Œ System.errï¼Œå®ƒä»¬çš„å­—ç¬¦é›†å°†ç”± Console.charset() æŒ‡å®šã€‚</p>
<h3>file.encoding å’Œ native.encoding ç³»ç»Ÿå±æ€§</h3>
<p><code>file.encoding</code> æ˜¯ Java è™šæ‹Ÿæœºçš„ç³»ç»Ÿå±æ€§ï¼Œç”¨äºæŒ‡å®šé»˜è®¤çš„å­—ç¬¦ç¼–ç </p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-Dfile.encoding</span><span class="token operator">=</span>COMPAT   <span class="token comment"># COMPAT æ¨¡å¼, é»˜è®¤å­—ç¬¦é›†å–å†³äºç¯å¢ƒ</span>
<span class="token function">java</span> <span class="token parameter variable">-Dfile.encoding</span><span class="token operator">=</span>UTF-8    <span class="token comment"># UTF-8 æ¨¡å¼, é»˜è®¤å­—ç¬¦é›†ä¸ºUTF-8</span>
</code></pre></div><p><code>native.encoding</code> åœ¨Java 17 ä¸­å¼•å…¥ï¼Œè¯¥å±æ€§æä¾›äº†åº•å±‚ä¸»æœºç¯å¢ƒçš„å­—ç¬¦ç¼–ç åç§°</p>
<p>Javaå†…éƒ¨ä½¿ç”¨äº†ä¸‰ä¸ªå­—ç¬¦é›†ç›¸å…³çš„ç³»ç»Ÿå±æ€§ï¼Œå®ƒä»¬ç›®å‰æœªæŒ‡å®šä¸”ä¸å—æ”¯æŒã€‚è¿™é‡Œç®€è¦è®°å½•ä¸€ä¸‹ï¼š</p>
<ol>
<li><code>sun.stdout.encoding</code></li>
<li><code>sun.stderr.encoding</code></li>
<li><code>sun.jnu.encoding</code>ï¼š</li>
</ol>
<blockquote>
<p>Tipsï¼šå¯¹äºJDK(8-17)ï¼šå¼ºçƒˆå»ºè®®å¼€å‘äººå‘˜ä½¿ç”¨<code>java -Dfile.encoding=UTF-8</code>æŒ‡å®šé»˜è®¤å­—ç¬¦é›†ä¸ºUTF-8å¯åŠ¨ç¨‹åº</p>
</blockquote>
<h3>æºæ–‡ä»¶ç¼–ç </h3>
<p>Javaè¯­è¨€å…è®¸æºä»£ç ä½¿ç”¨<code>UTF-16</code>ç¼–ç æ–¹å¼è¡¨è¾¾<code>Unicode</code>å­—ç¬¦ï¼Œå¹¶ä¸”è¿™ä¸å—é»˜è®¤å­—ç¬¦é›†UTF-8çš„å½±å“ã€‚
ä½†æ˜¯ï¼Œ<code>javac</code>ç¼–è¯‘å™¨ä¼šå—åˆ°å½±å“ï¼Œå› ä¸ºå®ƒéœ€è¦å°†æºä»£ç è½¬æ¢ä¸ºå¹³å°é»˜è®¤çš„å­—ç¬¦é›†ï¼Œé™¤éé€šè¿‡<code>-encoding</code>é€‰é¡¹è¿›è¡Œé…ç½®</p>
<p>å¦‚æœæºæ–‡ä»¶ä»¥éUTF-8ç¼–ç ä¿å­˜å¹¶åœ¨è¾ƒæ—©çš„JDKä¸Šè¿›è¡Œç¼–è¯‘ï¼Œç„¶ååœ¨JDK 18æˆ–æ›´é«˜ç‰ˆæœ¬ä¸Šé‡æ–°ç¼–è¯‘ï¼Œå¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚
ä¾‹å¦‚ï¼Œå¦‚æœéUTF-8æºæ–‡ä»¶ä¸­çš„å­—ç¬¦ä¸²æ–‡å­—åŒ…å«éASCIIå­—ç¬¦ï¼Œåˆ™åœ¨JDK 18æˆ–æ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œé™¤éä½¿ç”¨<code>-encoding</code>é€‰é¡¹ï¼Œå¦åˆ™è¿™äº›æ–‡å­—å¯èƒ½ä¼šè¢«<code>javac</code>é”™è¯¯è§£é‡Šã€‚</p>
<p>åœ¨ä½¿ç”¨UTF-8ä½œä¸ºé»˜è®¤å­—ç¬¦é›†çš„JDKä¸Šç¼–è¯‘ä¹‹å‰ï¼Œå¼ºçƒˆå»ºè®®å¼€å‘äººå‘˜é€šè¿‡åœ¨å½“å‰JDKï¼ˆ8-17ï¼‰ä¸Šä½¿ç”¨javac -encoding UTF-8 ... è¿›è¡Œç¼–è¯‘æ¥æ£€æŸ¥å­—ç¬¦é›†é—®é¢˜ã€‚
å¦å¤–ï¼Œå–œæ¬¢ä»¥éUTF-8ç¼–ç ä¿å­˜æºæ–‡ä»¶çš„å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡å°†JDK 17åŠæ›´é«˜ç‰ˆæœ¬ä¸Šçš„<code>-encoding</code>é€‰é¡¹è®¾ç½®ä¸º<code>native.encoding</code>ç³»ç»Ÿå±æ€§çš„å€¼ï¼Œé˜²æ­¢javacå‡å®šUTF-8ã€‚</p>
<h3>æ—§ç‰ˆé»˜è®¤å­—ç¬¦é›†ï¼ˆUS-ASCIIï¼‰</h3>
<p>åœ¨JDK 17åŠæ›´æ—©ç‰ˆæœ¬ä¸­ï¼Œåç§°<code>default</code>ä¼šè¢«è¯†åˆ«ä¸º<code>US-ASCII</code>å­—ç¬¦é›†çš„åˆ«åã€‚</p>
<p>åœ¨JDK 18ä¸­ï¼Œé»˜è®¤å­—ç¬¦é›†<code>UTF-8</code>ï¼Œä¿ç•™<code>default</code>ä½œä¸º<code>US-ASCII</code>çš„åˆ«åå°†ä¼šéå¸¸æ··ä¹±ï¼Œäºæ˜¯é‡æ–°å®šä¹‰<code>default</code>ä¸å†æ˜¯<code>US-ASCII</code>çš„åˆ«åã€‚</p>
<p>Javaç¨‹åºä½¿ç”¨æšä¸¾å¸¸é‡StandardCharsets.US_ASCIIæ¥æ˜ç¡®å…¶å¼€å‘äººå‘˜æ„å›¾ï¼Œè€Œä¸æ˜¯å‘Charset.forName(...)ä¼ é€’å­—ç¬¦ä¸²ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨JDK 18ä¸­ï¼Œ<code>Charset.forName("default")</code>å°†æŠ›å‡º UnsupportedCharsetExceptionã€‚
è¿™å°†ä¸ºå¼€å‘äººå‘˜æä¾›æ£€æµ‹åˆ°è¿™ç§æƒ¯ç”¨æ³•å¹¶è¿ç§»åˆ°US-ASCIIæˆ–Charset.defaultCharset()ç»“æœçš„æœºä¼šã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>Java 18 æ–°ç‰¹æ€§ï¼šç®€å•WebæœåŠ¡å™¨</title>
      <link>https://www.geekyspace.cn/md/java-features/Java18/jep408-simple-web-server.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java18/jep408-simple-web-server.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 18 æ–°ç‰¹æ€§ï¼šç®€å•WebæœåŠ¡å™¨</source>
      <description>Java 18 æ–°ç‰¹æ€§ï¼šç®€å•WebæœåŠ¡å™¨ Java 18 å¼•å…¥äº†ç®€å•WebæœåŠ¡å™¨ï¼ˆSimple Web Serverï¼‰ï¼Œä¸€ä¸ªä¸“ä¸ºæ•™è‚²æˆ–éæ­£å¼ä»»åŠ¡è®¾è®¡çš„æœ€å°HTTPæœåŠ¡å™¨ï¼Œä¸ºå•ä¸ªç›®å½•å±‚æ¬¡ç»“æ„æä¾›æœåŠ¡ã€‚ åŸºäºJDKä¸­çš„com.sun.net.httpserveråŒ…å®ç°ï¼Œæ—¨åœ¨ç®€åŒ–æœåŠ¡å™¨çš„åˆ›å»ºå’Œè¯·æ±‚å¤„ç†è¿‡ç¨‹ã€‚ ä¸»è¦ç‰¹ç‚¹ï¼š ä¸èƒ½æ›¿ä»£æˆç†Ÿçš„å•†ä¸šæœåŠ¡å™¨ï¼Œå¦‚Jetty...</description>
      <category>Java</category>
      <pubDate>Tue, 02 Jan 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Java 18 å¼•å…¥äº†<strong>ç®€å•WebæœåŠ¡</strong>å™¨ï¼ˆSimple Web Serverï¼‰ï¼Œä¸€ä¸ªä¸“ä¸ºæ•™è‚²æˆ–éæ­£å¼ä»»åŠ¡è®¾è®¡çš„æœ€å°HTTPæœåŠ¡å™¨ï¼Œä¸ºå•ä¸ªç›®å½•å±‚æ¬¡ç»“æ„æä¾›æœåŠ¡ã€‚
åŸºäºJDKä¸­çš„<code>com.sun.net.httpserver</code>åŒ…å®ç°ï¼Œæ—¨åœ¨ç®€åŒ–æœåŠ¡å™¨çš„åˆ›å»ºå’Œè¯·æ±‚å¤„ç†è¿‡ç¨‹ã€‚</p>
<p>ä¸»è¦ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ä¸èƒ½æ›¿ä»£æˆç†Ÿçš„å•†ä¸šæœåŠ¡å™¨ï¼Œå¦‚<code>Jetty</code>ã€<code>Nginx</code> å’Œ <code>Apache Tomcat</code>ç­‰</li>
<li>ä¸æä¾›èº«ä»½éªŒè¯ã€è®¿é—®æ§åˆ¶æˆ–åŠ å¯†ç­‰å®‰å…¨åŠŸèƒ½</li>
<li>ä»…æ”¯æŒHTTP/1.1ï¼Œä¸æ”¯æŒHTTPS</li>
<li>ä»…æ”¯æŒGETã€HEADè¯·æ±‚ï¼Œå¦åˆ™è¿”å› 501 Not Implemented æˆ– 405 Not Allowed</li>
</ul>
<h2>å‘½ä»¤è¡Œå·¥å…·</h2>
<p>ä¸ºäº†å¼€å§‹ä½¿ç”¨ç®€å•WebæœåŠ¡å™¨ï¼Œæ‚¨éœ€è¦å‡†å¤‡ä¸€ä¸ª<code>index.html</code>æ–‡ä»¶ï¼Œå¹¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>æ‰“å¼€ç»ˆç«¯ã€‚</li>
<li>è¾“å…¥å‘½ä»¤ï¼š<code>jwebserver</code>ã€‚</li>
</ol>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ jwebserver
</code></pre></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨å°†ç»‘å®šåˆ°æœ¬åœ°å›ç¯åœ°å€ï¼Œå¹¶åœ¨ç«¯å£8000ä¸Šæä¾›æœåŠ¡ã€‚çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>Binding to loopback by default. For all interfaces use <span class="token string">"-b 0.0.0.0"</span> or <span class="token string">"-b ::"</span><span class="token builtin class-name">.</span>
Serving /cwd and its subdirectories on <span class="token number">127.0</span>.0.1 port <span class="token number">8000</span>
URL: http://127.0.0.1:8000/
</code></pre></div><p>å°è¯•è®¿é—®ä¸€ä¸‹ <code>http://127.0.0.1:8000/</code> ï¼Œå°±å¯ä»¥è·å¾—ä¹‹å‰å‡†å¤‡çš„HTMLå†…å®¹äº†ã€‚</p>
<h3>æ”¯æŒçš„å‘½ä»¤è¡Œé€‰é¡¹</h3>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>é€‰é¡¹ï¼š
       <span class="token parameter variable">-h</span> æˆ– -? æˆ– <span class="token parameter variable">--help</span>
              æ‰“å°å¸®åŠ©ä¿¡æ¯å¹¶é€€å‡º.

       <span class="token parameter variable">-b</span> addr æˆ– --bind-address addr
              æŒ‡å®šç»‘å®šçš„åœ°å€ã€‚é»˜è®¤ï¼š127.0.0.1æˆ–::1ï¼ˆå›ç¯åœ°å€ï¼‰ã€‚è¦ä½¿ç”¨æ‰€æœ‰æ¥å£ï¼Œè¯·ä½¿ç”¨ <span class="token parameter variable">-b</span> <span class="token number">0.0</span>.0.0 æˆ– <span class="token parameter variable">-b</span> ::.

       <span class="token parameter variable">-d</span> <span class="token function">dir</span> æˆ– <span class="token parameter variable">--directory</span> <span class="token function">dir</span>
              æŒ‡å®šè¦æä¾›æœåŠ¡çš„ç›®å½•ã€‚é»˜è®¤ï¼šå½“å‰ç›®å½•.

       <span class="token parameter variable">-o</span> level æˆ– <span class="token parameter variable">--output</span> level
              æŒ‡å®šè¾“å‡ºæ ¼å¼ã€‚none <span class="token operator">|</span> info <span class="token operator">|</span> verboseã€‚é»˜è®¤ï¼šinfo.

       <span class="token parameter variable">-p</span> port æˆ– <span class="token parameter variable">--port</span> port
              æŒ‡å®šè¦ç›‘å¬çš„ç«¯å£ã€‚é»˜è®¤ï¼š8000.

       <span class="token parameter variable">-version</span> æˆ– <span class="token parameter variable">--version</span>
              æ‰“å°ç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡ºã€‚

       è¦åœæ­¢æœåŠ¡å™¨ï¼Œè¯·æŒ‰ Ctrl + C.
</code></pre></div><h2>APIç¼–ç¨‹æ–¹å¼</h2>
<p>å°½ç®¡å‘½ä»¤è¡Œå·¥å…·æä¾›äº†ä¾¿åˆ©ï¼Œä½†ä¸ºäº†æ›´çµæ´»åœ°å®šåˆ¶å¤„ç†ç¨‹åºçš„è¡Œä¸ºï¼Œä¸ç°æœ‰ä»£ç é›†æˆï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæˆ‘ä»¬å¼•å…¥äº†æ–°çš„APIã€‚</p>
<blockquote>
<p>æ–°çš„APIä¸­å¼•å…¥äº†ä¸‰ä¸ªæ–°çš„ç±»æ˜¯<code>SimpleFileServer</code>ã€<code>HttpHandlers</code>å’Œ<code>Request</code>ï¼Œ
æ¯ä¸ªç±»éƒ½æ„å»ºåœ¨<code>com.sun.net.httpserver</code>åŒ…ä¸­çš„ç°æœ‰ç±»å’Œæ¥å£ä¸Šï¼š<code>HttpServer</code>ã€<code>HttpHandler</code>ã€<code>Filter</code>å’Œ<code>HttpExchange</code>ã€‚</p>
</blockquote>
<h3>ç®€å•æ–‡ä»¶æœåŠ¡å™¨ï¼ˆSimpleFileServerï¼‰</h3>
<p><code>SimpleFileServer</code>æ”¯æŒåˆ›å»ºæ–‡ä»¶æœåŠ¡å™¨ã€æ–‡ä»¶æœåŠ¡å™¨å¤„ç†ç¨‹åºå’Œè¾“å‡ºè¿‡æ»¤å™¨ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>net<span class="token punctuation">.</span>httpserver</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">SimpleFileServer</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ›å»ºæ–‡ä»¶æœåŠ¡å™¨å®ä¾‹</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token number">1</span> <span class="token function">createFileServer</span><span class="token punctuation">(</span>
        <span class="token class-name">InetSocketAddress</span> addr<span class="token punctuation">,</span> <span class="token class-name">Path</span> rootDirectory<span class="token punctuation">,</span> <span class="token class-name">OutputLevel</span> outputLevel<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>          
    
    <span class="token comment">// åˆ›å»ºæ–‡ä»¶æœåŠ¡å™¨å¤„ç†ç¨‹åº</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">HttpHandler</span> <span class="token function">createFileHandler</span><span class="token punctuation">(</span>
        <span class="token class-name">Path</span> rootDirectory<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
    
    <span class="token comment">// åˆ›å»ºè¾“å‡ºè¿‡æ»¤å™¨</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Filter</span> <span class="token function">createOutputFilter</span><span class="token punctuation">(</span>
        <span class="token class-name">OutputStream</span> out<span class="token punctuation">,</span> <span class="token class-name">OutputLevel</span> outputLevel<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æœ‰äº†è¿™ä¸ªç±»ï¼Œåœ¨<code>jshell</code>ä¸­åªéœ€å‡ è¡Œä»£ç ï¼Œå°±å¯ä»¥å¯åŠ¨ä¸€ä¸ªæœ€å°ä½†å®šåˆ¶çš„<strong>æ–‡ä»¶æœåŠ¡å™¨</strong>ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>jshell<span class="token operator">&gt;</span> <span class="token keyword">var</span> server <span class="token operator">=</span> <span class="token class-name">SimpleFileServer</span><span class="token punctuation">.</span><span class="token function">createFileServer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>&gt; <span class="token class-name">Path</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"/some/path"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">SimpleFileServer<span class="token punctuation">.</span>OutputLevel</span><span class="token punctuation">.</span><span class="token constant">INFO</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jshell<span class="token operator">&gt;</span> server<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>ç›¸å½“äºå‘½ä»¤è¡Œæ¨¡å¼çš„ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>jwebserver <span class="token parameter variable">-p</span> <span class="token number">8080</span> <span class="token parameter variable">-d</span> /some/path <span class="token parameter variable">-o</span> info
</code></pre></div><h3>è‡ªå®šä¹‰å¤„ç†ç¨‹åºå’Œè¿‡æ»¤å™¨</h3>
<p>å°†è‡ªå®šä¹‰çš„<strong>æ–‡ä»¶æœåŠ¡å™¨å¤„ç†ç¨‹åº</strong>æ·»åŠ åˆ°ç°æœ‰æœåŠ¡å™¨ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>jshell<span class="token operator">&gt;</span> <span class="token keyword">var</span> handler <span class="token operator">=</span> <span class="token class-name">SimpleFileServer</span><span class="token punctuation">.</span><span class="token function">createFileHandler</span><span class="token punctuation">(</span><span class="token class-name">Path</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"/some/path"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jshell<span class="token operator">&gt;</span> <span class="token keyword">var</span> server <span class="token operator">=</span> <span class="token class-name">HttpServer</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>&gt; <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"/store/"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SomePutHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jshell<span class="token operator">&gt;</span> server<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token string">"/browse/"</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
jshell<span class="token operator">&gt;</span> server<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å°†è‡ªå®šä¹‰çš„<strong>è¾“å‡ºè¿‡æ»¤å™¨</strong>åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­æ·»åŠ åˆ°æœåŠ¡å™¨ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>jshell<span class="token operator">&gt;</span> <span class="token keyword">var</span> filter <span class="token operator">=</span> <span class="token class-name">SimpleFileServer</span><span class="token punctuation">.</span><span class="token function">createOutputFilter</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">,</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>&gt; <span class="token class-name">OutputLevel</span><span class="token punctuation">.</span><span class="token constant">INFO</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jshell<span class="token operator">&gt;</span> <span class="token keyword">var</span> server <span class="token operator">=</span> <span class="token class-name">HttpServer</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>&gt; <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"/store/"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SomePutHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
jshell<span class="token operator">&gt;</span> server<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¸¤ä¸ªä¾‹å­æ˜¯ç”±<code>HttpServer</code>å’Œ<code>HttpsServer</code>ç±»ä¸­çš„æ–°é‡è½½<code>create</code>æ–¹æ³•å¯ç”¨çš„ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">HttpServer</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">InetSocketAddress</span> addr<span class="token punctuation">,</span>
                                <span class="token keyword">int</span> backlog<span class="token punctuation">,</span>
                                <span class="token class-name">String</span> root<span class="token punctuation">,</span>
                                <span class="token class-name">HttpHandler</span> handler<span class="token punctuation">,</span>
                                <span class="token class-name">Filter</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> filters<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
</code></pre></div><h3>å¢å¼ºçš„è¯·æ±‚å¤„ç†ï¼ˆHttpHandlersï¼‰</h3>
<p>ç®€å•WebæœåŠ¡å™¨çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯<strong>å¤„ç†ç¨‹åº</strong>ã€‚ä¸ºäº†ä¸ç°æœ‰ä»£ç å…¼å®¹ï¼Œæˆ‘ä»¬å¼•å…¥äº†<code>HttpHandlers</code>ç±»ï¼Œ
æä¾›ä¸¤ä¸ªé™æ€æ–¹æ³•ç”¨äº<mark>åˆ›å»º</mark>å’Œ<mark>è‡ªå®šä¹‰å¤„ç†ç¨‹åº</mark>ï¼Œè¿˜æœ‰<code>Filter</code>ç±»ä¸­çš„æ–°æ–¹æ³•ç”¨äºé€‚é…è¯·æ±‚ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>net<span class="token punctuation">.</span>httpserver</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">HttpHandlers</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// handleOrElseæ–¹æ³•è¡¥å……æ¡ä»¶å¤„ç†ç¨‹åº</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">HttpHandler</span> <span class="token function">handleOrElse</span><span class="token punctuation">(</span><span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Request</span><span class="token punctuation">&gt;</span></span> handlerTest<span class="token punctuation">,</span>
                                           <span class="token class-name">HttpHandler</span> handler<span class="token punctuation">,</span>
                                           <span class="token class-name">HttpHandler</span> fallbackHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
    
    <span class="token comment">// ofæ–¹æ³•åˆ›å»ºå…·æœ‰é¢„è®¾å“åº”çŠ¶æ€çš„å¤„ç†ç¨‹åº</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">HttpHandler</span> <span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">int</span> statusCode<span class="token punctuation">,</span> <span class="token class-name">Headers</span> headers<span class="token punctuation">,</span> <span class="token class-name">String</span> body<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
    <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token comment">// adaptRequestæ–¹æ³•è·å–é¢„å¤„ç†è¿‡æ»¤å™¨ï¼Œç”¨äºåœ¨å¤„ç†è¯·æ±‚ä¹‹å‰æ£€æŸ¥å’Œè°ƒæ•´è¯·æ±‚çš„æŸäº›å±æ€§</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Filter</span> <span class="token function">adaptRequest</span><span class="token punctuation">(</span>
        <span class="token class-name">String</span> description<span class="token punctuation">,</span> <span class="token class-name">UnaryOperator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Request</span><span class="token punctuation">&gt;</span></span> requestOperator<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
    <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™äº›æ–¹æ³•çš„ç”¨ä¾‹åŒ…æ‹¬åŸºäºè¯·æ±‚æ–¹æ³•å§”æ‰˜äº¤æ¢ï¼Œåˆ›å»ºæ€»æ˜¯è¿”å›ç‰¹å®šå“åº”çš„â€œcanned responseâ€å¤„ç†ç¨‹åºï¼Œæˆ–å‘æ‰€æœ‰ä¼ å…¥è¯·æ±‚æ·»åŠ æ ‡å¤´ã€‚</p>
<h3>è¯·æ±‚ï¼ˆRequestï¼‰</h3>
<p>ç°æœ‰APIä¸­ï¼Œä½¿ç”¨HttpExchangeç±»æ¥è¡¨è¾¾HTTP<mark>è¯·æ±‚-å“åº”å¯¹</mark>ï¼Œæè¿°äº†è¯·æ±‚-å“åº”äº¤æ¢çš„å®Œæ•´å¯å˜çŠ¶æ€ã€‚
ç„¶è€Œï¼Œå¹¶éæ‰€æœ‰è¿™çŠ¶æ€å¯¹äºå¤„ç†ç¨‹åºçš„å®šåˆ¶å’Œé€‚é…éƒ½æ˜¯å¿…è¦çš„ã€‚
å› æ­¤ï¼Œæˆ‘ä»¬å¼•å…¥äº†æ›´ç®€å•çš„Requestæ¥å£ï¼Œæä¾›<mark>è¯·æ±‚</mark>çš„ä¸å¯å˜çŠ¶æ€çš„æœ‰é™è§†å›¾ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Request</span> <span class="token punctuation">{</span>
    <span class="token class-name">URI</span> <span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// è·å–è¯·æ±‚çš„URI</span>
    <span class="token class-name">String</span> <span class="token function">getRequestMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// è·å–è¯·æ±‚çš„æ–¹æ³•</span>
    <span class="token class-name">Headers</span> <span class="token function">getRequestHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–è¯·æ±‚çš„æ ‡å¤´</span>
    <span class="token comment">// ç”¨äºä¿®æ”¹è¯·æ±‚å¤´éƒ¨ä¿¡æ¯</span>
    <span class="token keyword">default</span> <span class="token class-name">Request</span> <span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">String</span> headerName<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> headerValues<span class="token punctuation">)</span>
    <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™ä½¿å¾—å¯ä»¥ç›´æ¥å®šåˆ¶ç°æœ‰çš„å¤„ç†ç¨‹åºï¼Œä¾‹å¦‚ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// åˆ›å»ºä¸€ä¸ªå¤„ç†ç¨‹åºï¼Œæ ¹æ®è¯·æ±‚æ–¹æ³•é€‰æ‹©å¯¹åº”çš„å¤„ç†å™¨ï¼Œå¦‚æœè¯·æ±‚æ–¹æ³•ä¸º PUTï¼Œåˆ™ä½¿ç”¨ SomePutHandlerï¼Œå¦åˆ™ä½¿ç”¨ SomeHandler</span>
<span class="token keyword">var</span> h <span class="token operator">=</span> <span class="token class-name">HttpHandlers</span><span class="token punctuation">.</span><span class="token function">handleOrElse</span><span class="token punctuation">(</span>r <span class="token operator">-&gt;</span> 
    r<span class="token punctuation">.</span><span class="token function">getRequestMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"PUT"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SomePutHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SomeHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åˆ›å»ºä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œç”¨äºä¿®æ”¹è¯·æ±‚å¤´éƒ¨ä¿¡æ¯ï¼Œåœ¨è¯·æ±‚ä¸­æ·»åŠ åä¸º "Foo" çš„å¤´éƒ¨ï¼Œå€¼ä¸º "Bar"</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token class-name">Filter</span><span class="token punctuation">.</span><span class="token function">adaptRequest</span><span class="token punctuation">(</span><span class="token string">"Add Foo header"</span><span class="token punctuation">,</span> r <span class="token operator">-&gt;</span> r<span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token string">"Foo"</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"Bar"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åˆ›å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œå¹¶æŒ‡å®šç«¯å£ä¸º 8080ï¼Œæœ€å¤§è¿æ¥æ•°ä¸º 10ï¼Œæ ¹è·¯å¾„ä¸º "/"ï¼Œå¤„ç†ç¨‹åºä¸º hï¼Œè¿‡æ»¤å™¨ä¸º f</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token class-name">HttpServer</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"/"</span><span class="token punctuation">,</span> h<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å¯åŠ¨æœåŠ¡å™¨</span>
s<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2>æ›¿ä»£å“</h2>
<p><strong>å‘½ä»¤è¡Œå·¥å…·</strong>çš„æ›¿ä»£æ–¹æ¡ˆï¼š</p>
<ul>
<li>æœ€åˆï¼Œä½¿ç”¨ <code>java -m jdk.httpserver</code> å‘½ä»¤è¿è¡Œ Simple Web Serverï¼Œæ²¡æœ‰ä¸“é—¨çš„å‘½ä»¤è¡Œå·¥å…·</li>
<li>ä¸ºäº†æé«˜ä¾¿åˆ©æ€§å’Œå¯è®¿é—®æ€§ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€ä¸ªä¸“é—¨çš„å·¥å…· <code>jwebserver</code>
<ul>
<li>å®é™…ä¸Š <code>jwebserver</code> åœ¨åå°ä½¿ç”¨äº† <code>java -m ...</code> å‘½ä»¤</li>
</ul>
</li>
</ul>
<p><strong>APIç¼–ç¨‹æ–¹å¼</strong>æ›¿ä»£æ–¹æ¡ˆï¼š</p>
<ul>
<li>æ–°çš„ <code>DelegatingHandler</code> ç±»ï¼šæ†ç»‘å®šåˆ¶æ–¹æ³•åœ¨ä¸€ä¸ªå•ç‹¬çš„ç±»ä¸­ï¼Œä½†ç”±äºå¼•å…¥äº†æ–°ç±»å‹å¹¶æœªæ·»åŠ æ›´å¤šåŠŸèƒ½ï¼Œæˆ‘ä»¬æ”¾å¼ƒäº†è¿™ä¸ªé€‰é¡¹ã€‚</li>
<li>å°† <code>HttpHandler</code> ä½œä¸ºæœåŠ¡ï¼šå°† <code>HttpHandler</code> è½¬æ¢ä¸ºæœåŠ¡ï¼Œå¹¶æä¾›å†…éƒ¨æ–‡ä»¶æœåŠ¡å™¨å¤„ç†ç¨‹åºå®ç°ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•å¯¹äºæˆ‘ä»¬è¦æä¾›çš„åŠŸèƒ½æ¥è¯´è¿‡äºå¤æ‚ã€‚</li>
<li>ä½¿ç”¨<strong>è¿‡æ»¤å™¨</strong>è€Œä¸æ˜¯ <code>HttpHandler</code>ï¼šä»…ä½¿ç”¨è¿‡æ»¤å™¨æ¥å¤„ç†è¯·æ±‚ï¼Œä½†è¿™æ ·åšä¸ç¬¦åˆç›´è§‰ï¼Œå¹¶ä¸”è¿‡æ»¤å™¨çš„æ–¹æ³•ä¼šæ›´éš¾æ‰¾åˆ°ã€‚</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Java 18 æ–°ç‰¹æ€§ï¼šæ–°å¢@snipppetæ ‡ç­¾</title>
      <link>https://www.geekyspace.cn/md/java-features/Java18/jep413-code-snippets-in-api-documentation.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java18/jep413-code-snippets-in-api-documentation.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 18 æ–°ç‰¹æ€§ï¼šæ–°å¢@snipppetæ ‡ç­¾</source>
      <description>Java 18 æ–°ç‰¹æ€§ï¼šæ–°å¢@snipppetæ ‡ç­¾ Java 18 å¼•å…¥äº†@snippetæ ‡ç­¾ï¼Œç”¨äºåœ¨APIæ–‡æ¡£ä¸­åµŒå…¥ä»£ç ç‰‡æ®µï¼Œä»¥ä¾¿æ›´å¥½åœ°å±•ç¤ºAPIçš„ä½¿ç”¨æ–¹æ³•ã€‚ ä¸»è¦ç‰¹ç‚¹ï¼š æœ‰æ•ˆæ€§æ£€æŸ¥ï¼Œä»£ç åŒ…å«è¯­æ³•é”™è¯¯æ—¶ï¼Œä¼šå‡ºç°é”™è¯¯æç¤º å¯ç”¨ç°ä»£æ ·å¼ï¼Œä¾‹å¦‚è¯­æ³•é«˜äº®æ˜¾ç¤ºï¼Œä»¥åŠåç§°ä¸å£°æ˜çš„è‡ªåŠ¨é“¾æ¥ ä¸ºåˆ›å»ºå’Œç¼–è¾‘ä»£ç æ®µæä¾›æ›´å¥½çš„IDEæ”¯æŒ å­˜åœ¨çš„@codeæ ‡ç­¾ ç”¨äºå•ç‹¬çš„å°...</description>
      <category>Java</category>
      <pubDate>Wed, 03 Jan 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Java 18 å¼•å…¥äº†<code>@snippet</code>æ ‡ç­¾ï¼Œç”¨äºåœ¨APIæ–‡æ¡£ä¸­åµŒå…¥ä»£ç ç‰‡æ®µï¼Œä»¥ä¾¿æ›´å¥½åœ°å±•ç¤ºAPIçš„ä½¿ç”¨æ–¹æ³•ã€‚</p>
<p>ä¸»è¦ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æœ‰æ•ˆæ€§æ£€æŸ¥ï¼Œä»£ç åŒ…å«è¯­æ³•é”™è¯¯æ—¶ï¼Œä¼šå‡ºç°é”™è¯¯æç¤º</li>
<li>å¯ç”¨ç°ä»£æ ·å¼ï¼Œä¾‹å¦‚è¯­æ³•é«˜äº®æ˜¾ç¤ºï¼Œä»¥åŠåç§°ä¸å£°æ˜çš„è‡ªåŠ¨é“¾æ¥</li>
<li>ä¸ºåˆ›å»ºå’Œç¼–è¾‘ä»£ç æ®µæä¾›æ›´å¥½çš„IDEæ”¯æŒ</li>
</ul>
<h2>å­˜åœ¨çš„@codeæ ‡ç­¾</h2>
<p>ç”¨äºå•ç‹¬çš„å°æ®µä»£ç , å½“ä»£ç ç‰‡æ®µå¤æ‚æ—¶, ä½¿ç”¨å¤åˆæ¨¡å¼çš„æ–‡æ¡£æ³¨é‡Šï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code> <span class="token operator">*</span> <span class="token generics"><span class="token punctuation">&lt;</span>pre<span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token annotation punctuation">@code</span>
 <span class="token operator">*</span>     æºä»£ç è¡Œ<span class="token number">1</span>
 <span class="token operator">*</span>     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
 <span class="token operator">*</span>     æºä»£ç è¡Œn
 <span class="token operator">*</span> <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">&gt;</span>
</code></pre></div><h2>å¼•å…¥@snippetæ ‡ç­¾</h2>
<p>è§£å†³äº†<code>@code</code>æ ‡ç­¾çš„ä¸è¶³ï¼Œå…è®¸åœ¨APIæ–‡æ¡£ä¸­ç›´æ¥åµŒå…¥ä»£ç ç‰‡æ®µï¼Œä»¥ä¾¿æ›´å¥½åœ°å±•ç¤ºAPIçš„ä½¿ç”¨æ–¹æ³•ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * ä»¥ä¸‹ä»£ç æ˜¾ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <span class="token punctuation">{</span><span class="token keyword">@code</span> <span class="token code-section"><span class="token code language-java"><span class="token class-name">Optional</span><span class="token punctuation">.</span>isPresent</span></span><span class="token punctuation">}</span>:
 * <span class="token punctuation">{</span><span class="token keyword">@snippet</span> :
 * if (v.isPresent()) <span class="token punctuation">{</span>
 *     System.out.println("v: " + v.get());
 * <span class="token punctuation">}</span>
 * <span class="token punctuation">}</span>
 */</span>
</code></pre></div><p>ä½œä¸ºå¤–éƒ¨ç‰‡æ®µå¯¼å…¥</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * ä»¥ä¸‹ä»£ç æ˜¾ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <span class="token punctuation">{</span><span class="token keyword">@code</span> <span class="token code-section"><span class="token code language-java"><span class="token class-name">Optional</span><span class="token punctuation">.</span>isPresent</span></span><span class="token punctuation">}</span>:
 * <span class="token punctuation">{</span><span class="token keyword">@snippet</span> file="ShowOptional.java" region="example"<span class="token punctuation">}</span>
 */</span>
</code></pre></div><p>å…¶ä¸­<code>ShowOptional.java</code>æ˜¯ä¸€ä¸ªåŒ…å«ä»¥ä¸‹å†…å®¹çš„æ–‡ä»¶ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShowOptional</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// @start region="example"</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"v: "</span> <span class="token operator">+</span> v<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// @end</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Java19 æ–°ç‰¹æ€§æ€»ç»“</title>
      <link>https://www.geekyspace.cn/md/java-features/Java19/java19-new-features-summary.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java19/java19-new-features-summary.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java19 æ–°ç‰¹æ€§æ€»ç»“</source>
      <description>Java 19 æ–°ç‰¹æ€§æ€»ç»“ è¯¥ç‰ˆæœ¬æ¨å‡ºçš„å‡ä¸ºå­µåŒ–ä¸é¢„è§ˆåŠŸèƒ½ï¼Œæ‰€ä»¥è¿™é‡Œä¸åšå•ç‹¬çš„è¯¦ç»†è§£è¯»ï¼Œå¤§éƒ¨åˆ†å†…å®¹å‡æ”¾åœ¨Java 21ä¸­ä»‹ç»ã€‚ 422: Linux/RISC-V Portï¼šRISC-Væ˜¯ä¸€ä¸ªåŸºäºç²¾ç®€æŒ‡ä»¤é›†ï¼ˆRISCï¼‰åŸåˆ™çš„å¼€æºæŒ‡ä»¤é›†æ¶æ„ï¼ˆISAï¼‰,è¿™ä¸ªJEPçš„ä¸»æ—¨åˆ™æ˜¯ç§»æ¤JDKåˆ°RISC-Vä¸Šã€‚ ä»¥ä¸‹é¢„è§ˆç‰¹æ€§åœ¨Java 21ä¸­æ­£å¼å®šç¨¿ï¼š 405: R...</description>
      <category>Java</category>
      <pubDate>Thu, 04 Jan 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>è¯¥ç‰ˆæœ¬æ¨å‡ºçš„å‡ä¸ºå­µåŒ–ä¸é¢„è§ˆåŠŸèƒ½ï¼Œæ‰€ä»¥è¿™é‡Œä¸åšå•ç‹¬çš„è¯¦ç»†è§£è¯»ï¼Œå¤§éƒ¨åˆ†å†…å®¹å‡æ”¾åœ¨Java 21ä¸­ä»‹ç»ã€‚</p>
<ul>
<li>422: Linux/RISC-V Portï¼šRISC-Væ˜¯ä¸€ä¸ªåŸºäºç²¾ç®€æŒ‡ä»¤é›†ï¼ˆRISCï¼‰åŸåˆ™çš„å¼€æºæŒ‡ä»¤é›†æ¶æ„ï¼ˆISAï¼‰,è¿™ä¸ªJEPçš„ä¸»æ—¨åˆ™æ˜¯ç§»æ¤JDKåˆ°RISC-Vä¸Šã€‚</li>
</ul>
<p>ä»¥ä¸‹é¢„è§ˆç‰¹æ€§åœ¨Java 21ä¸­æ­£å¼å®šç¨¿ï¼š</p>
<ul>
<li><a href="/java-features/Java21/jep440-record-partterns">405: Record Patterns (Preview)ï¼šç»ˆç¨¿è§ 440: Record Patterns</a></li>
<li><a href="/java-features/Java21/jep444-virtual-threads">425: Virtual Threads (Preview)ï¼šç»ˆç¨¿è§ 444: Virtual Threads</a></li>
<li><a href="/java-features/Java21/jep441-pattern-matching-for-switch">427: Pattern Matching for switch (Third Preview)ï¼šç»ˆç¨¿è§ 441: Pattern Matching for switch</a></li>
</ul>
<p>ä»¥ä¸‹å†…å®¹åœ¨Java 21ä¸­ç»§ç»­è¿­ä»£ï¼š</p>
<ul>
<li>424: Foreign Function &amp; Memory API (Preview)</li>
<li>426: Vector API (Fourth Incubator)</li>
<li>428: Structured Concurrency (Incubator)</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Java20 æ–°ç‰¹æ€§æ€»ç»“</title>
      <link>https://www.geekyspace.cn/md/java-features/Java20/java20-new-features-summary.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java20/java20-new-features-summary.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java20 æ–°ç‰¹æ€§æ€»ç»“</source>
      <description>Java 20 æ–°ç‰¹æ€§æ€»ç»“ è¯¥ç‰ˆæœ¬æ¨å‡ºçš„å‡ä¸ºå­µåŒ–ä¸é¢„è§ˆåŠŸèƒ½ï¼Œæ‰€ä»¥è¿™é‡Œä¸åšå•ç‹¬çš„è¯¦ç»†è§£è¯»ï¼Œå¤§éƒ¨åˆ†å†…å®¹å‡æ”¾åœ¨Java 21ä¸­ä»‹ç»ã€‚ ä»¥ä¸‹å†…å®¹åœ¨Java 21ä¸­æ­£å¼å®šç¨¿ï¼Œå¯æ ¹æ®é“¾æ¥æŸ¥çœ‹ç»ˆç¨¿å†…å®¹ï¼š 432: Record Patterns (Second Preview)ï¼šç»ˆç¨¿è§440: Record Patterns 433: Pattern Matchin...</description>
      <category>Java</category>
      <pubDate>Fri, 05 Jan 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>è¯¥ç‰ˆæœ¬æ¨å‡ºçš„å‡ä¸ºå­µåŒ–ä¸é¢„è§ˆåŠŸèƒ½ï¼Œæ‰€ä»¥è¿™é‡Œä¸åšå•ç‹¬çš„è¯¦ç»†è§£è¯»ï¼Œå¤§éƒ¨åˆ†å†…å®¹å‡æ”¾åœ¨Java 21ä¸­ä»‹ç»ã€‚</p>
<p>ä»¥ä¸‹å†…å®¹åœ¨Java 21ä¸­æ­£å¼å®šç¨¿ï¼Œå¯æ ¹æ®é“¾æ¥æŸ¥çœ‹ç»ˆç¨¿å†…å®¹ï¼š</p>
<ul>
<li><a href="/java-features/Java21/jep440-record-partterns">432: Record Patterns (Second Preview)ï¼šç»ˆç¨¿è§440: Record Patterns</a></li>
<li><a href="/java-features/Java21/jep441-pattern-matching-for-switch">433: Pattern Matching for switch (Fourth Preview)ï¼šç»ˆç¨¿è§441: Pattern Matching for switch</a></li>
<li><a href="/java-features/Java21/jep444-virtual-threads">436: Virtual Threads (Second Preview)ï¼šç»ˆç¨¿è§444: Virtual Threads</a></li>
</ul>
<p>ä»¥ä¸‹å†…å®¹åœ¨Java 21ä¸­ç»§ç»­è¿­ä»£ï¼š</p>
<ul>
<li>429: Scoped Values (Incubator)</li>
<li>434: Foreign Function &amp; Memory API (Second Preview)</li>
<li>437: Structured Concurrency (Second Incubator)</li>
<li>438: Vector API (Fifth Incubator)</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Java 21 æ–°ç‰¹æ€§ï¼šå­—ç¬¦ä¸²æ¨¡ç‰ˆ(Preview)</title>
      <link>https://www.geekyspace.cn/md/java-features/Java21/jep430-string-templates.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java21/jep430-string-templates.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 21 æ–°ç‰¹æ€§ï¼šå­—ç¬¦ä¸²æ¨¡ç‰ˆ(Preview)</source>
      <description>Java 21 æ–°ç‰¹æ€§ï¼šString Templatesï¼ˆå­—ç¬¦ä¸²æ¨¡ç‰ˆï¼‰ Java 21 ä¸­å¼•å…¥äº†å­—ç¬¦ä¸²æ¨¡ç‰ˆï¼ˆString Templatesï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§æ–°çš„å­—ç¬¦ä¸²å­—é¢é‡ï¼Œç”¨äºæ›´ç®€æ´åœ°æ„å»ºå­—ç¬¦ä¸²ã€‚ å­—ç¬¦ä¸²ç»„åˆçš„æœºåˆ¶ åœ¨ä¹‹å‰ï¼ŒJava æä¾›äº†å‡ ç§å­—ç¬¦ä¸²ç»„åˆçš„æœºåˆ¶ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œå®ƒä»¬éƒ½å­˜åœ¨ä¸€äº›ç¼ºç‚¹ ä½¿ç”¨ + æ“ä½œç¬¦, ä»£ç éš¾ä»¥é˜…è¯» ä½¿ç”¨ StringBuild...</description>
      <category>Java</category>
      <pubDate>Sat, 06 Jan 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Java 21 ä¸­å¼•å…¥äº†<strong>å­—ç¬¦ä¸²æ¨¡ç‰ˆ</strong>ï¼ˆString Templatesï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§æ–°çš„å­—ç¬¦ä¸²å­—é¢é‡ï¼Œç”¨äºæ›´ç®€æ´åœ°æ„å»ºå­—ç¬¦ä¸²ã€‚</p>
<h2>å­—ç¬¦ä¸²ç»„åˆçš„æœºåˆ¶</h2>
<p>åœ¨ä¹‹å‰ï¼ŒJava æä¾›äº†å‡ ç§å­—ç¬¦ä¸²ç»„åˆçš„æœºåˆ¶ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œå®ƒä»¬éƒ½å­˜åœ¨ä¸€äº›ç¼ºç‚¹</p>
<ol>
<li>ä½¿ç”¨ <code>+</code> æ“ä½œç¬¦, ä»£ç éš¾ä»¥é˜…è¯»<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">String</span> s <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token string">" plus "</span> <span class="token operator">+</span> y <span class="token operator">+</span> <span class="token string">" equals "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li>
<li>ä½¿ç”¨ <code>StringBuilder</code> å’Œ <code>StringBuffer</code>ï¼Œä»£ç å†—é•¿<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span>ï¼ˆï¼‰
                <span class="token punctuation">.</span>appendï¼ˆxï¼‰
                <span class="token punctuation">.</span>appendï¼ˆâ€œplusâ€œï¼‰
                <span class="token punctuation">.</span>appendï¼ˆyï¼‰
                <span class="token punctuation">.</span>appendï¼ˆâ€œequalsâ€œï¼‰
                <span class="token punctuation">.</span>appendï¼ˆx <span class="token operator">+</span> yï¼‰
                <span class="token punctuation">.</span>printlnï¼ˆï¼‰<span class="token punctuation">;</span>
</code></pre></div></li>
<li>ä½¿ç”¨ <code>String::format</code> å’Œ <code>String::formatted</code>ï¼Œå®¹æ˜“å‡ºç°å‚æ•°æ•°é‡å’Œç±»å‹ä¸åŒ¹é…çš„é—®é¢˜<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"%2$d plus %1$d equals %3$d"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> t <span class="token operator">=</span> <span class="token string">"%2$d plus %1$d equals %3$d"</span><span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li>
<li>ä½¿ç”¨ <code>java.text.MessageFormat</code> æ ¼å¼åŒ–æ¶ˆæ¯ï¼Œè¯­æ³•å¤æ‚å¯¹ä¸€äº›äººæ¥è¯´å¯èƒ½ä¸å¤ªç†Ÿæ‚‰<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">MessageFormat</span> mf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageFormat</span><span class="token punctuation">(</span><span class="token string">"{0} plus {1} equals {2}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> s <span class="token operator">=</span> mf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li>
</ol>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°†å­¦ä¹ Java 21ä¸­çš„å­—ç¬¦ä¸²æ¨¡ç‰ˆï¼Œä»¥åŠå®ƒçš„ä½¿ç”¨æ–¹æ³•ã€‚</p>
<h2>æ¨¡ç‰ˆè¡¨è¾¾å¼ï¼ˆæ’å€¼ï¼‰</h2>
<p>åœ¨Java 21ä¸­å¤„ç†å­—ç¬¦ä¸²çš„æ–°æ–¹æ³•ç§°ä¸ºï¼š<code>Template Expressions</code>ï¼Œå³ï¼š<strong>æ¨¡ç‰ˆè¡¨è¾¾å¼</strong>ã€‚</p>
<ul>
<li>ä¼˜ç‚¹ï¼šæ¨¡ç‰ˆè¡¨è¾¾å¼å¯ä»¥æ‰§è¡Œ<strong>å­—ç¬¦ä¸²æ’å€¼</strong>ï¼Œæ’å€¼ä¸ä»…æ¯”ä¸²è”æ›´æ–¹ä¾¿ï¼Œè€Œä¸”åœ¨é˜…è¯»ä»£ç æ—¶ä¹Ÿæ›´æ¸…æ™°</li>
<li>ç¼ºç‚¹ï¼šä½†æ’å€¼æ˜¯å±é™©çš„ï¼Œå°¤å…¶æ˜¯å¯¹äºSQLè¯­å¥ï¼Œå› ä¸ºå®ƒå¯èƒ½å¯¼è‡´æ³¨å…¥æ”»å‡»</li>
</ul>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">"Joan"</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> info <span class="token operator">=</span> <span class="token constant">STR</span><span class="token punctuation">.</span><span class="token string">"My name is \{name}"</span><span class="token punctuation">;</span>
<span class="token keyword">assert</span> info<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"My name is Joan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// true</span>
</code></pre></div><p>ä¸Šè¿°ä»£ç ä¸­çš„ç¬¬2è¡Œå°±æ˜¯ä¸€ä¸ªæ¨¡ç‰ˆè¡¨è¾¾å¼ï¼Œå…¶ä¸­ä¸»è¦åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li>æ¨¡æ¿å¤„ç†å™¨<code>STR</code>;</li>
<li>ä¸€ä¸ª<code>.</code>å­—ç¬¦ï¼Œç±»ä¼¼äºæ–¹æ³•è°ƒç”¨</li>
<li>åŒ…å«åµŒå…¥è¡¨è¾¾å¼ï¼ˆ<code>\{name}</code>ï¼‰çš„æ¨¡ç‰ˆ</li>
</ol>
<p>è¿è¡Œæ—¶ï¼Œè®¡ç®—æ¨¡æ¿è¡¨è¾¾å¼ï¼Œæ¨¡æ¿å¤„ç†å™¨å°†æ¨¡æ¿ä¸­çš„æ–‡æœ¬ä¸åµŒå…¥è¡¨è¾¾å¼çš„å€¼ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥äº§ç”Ÿç»“æœã€‚</p>
<h2>STRæ¨¡ç‰ˆå¤„ç†å™¨</h2>
<blockquote>
<p>STRæ¨¡æ¿å¤„ç†å™¨ç”¨äºå°†æ¨¡æ¿ä¸­çš„æ¯ä¸ª<mark>åµŒå…¥è¡¨è¾¾å¼</mark>æ›¿æ¢æˆ<mark>è¡¨è¾¾å¼çš„ï¼ˆå­—ç¬¦ä¸²ï¼‰å€¼</mark>æ¥æ‰§è¡Œå­—ç¬¦ä¸²æ’å€¼</p>
</blockquote>
<ul>
<li>STRæ˜¯ä¸€ä¸ª<code>public static final</code>å­—æ®µï¼Œå®ƒä¼šè‡ªåŠ¨å¯¼å…¥åˆ°æ¯ä¸ªJavaæºæ–‡ä»¶ä¸­</li>
</ul>
<p>ä½¿ç”¨STRæ¨¡æ¿å¤„ç†å™¨çš„æ¨¡æ¿è¡¨è¾¾å¼ç¤ºä¾‹ã€‚ç¬¦å· <code>|</code> åæ˜¾ç¤ºå‰ä¸€æ¡è¯­å¥çš„å€¼ï¼Œç±»ä¼¼äº<code>jshell</code>ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// åµŒå…¥å¼è¡¨è¾¾å¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²</span>
<span class="token class-name">String</span> firstName <span class="token operator">=</span> <span class="token string">"Bill"</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> lastName  <span class="token operator">=</span> <span class="token string">"Duck"</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> fullName  <span class="token operator">=</span> <span class="token constant">STR</span><span class="token punctuation">.</span><span class="token string">"\{firstName} \{lastName}"</span><span class="token punctuation">;</span>
<span class="token operator">|</span> <span class="token string">"Bill Duck"</span>
<span class="token class-name">String</span> sortName  <span class="token operator">=</span> <span class="token constant">STR</span><span class="token punctuation">.</span><span class="token string">"\{lastName}, \{firstName}"</span><span class="token punctuation">;</span>
<span class="token operator">|</span> <span class="token string">"Duck, Bill"</span>

<span class="token comment">// åµŒå…¥å¼è¡¨è¾¾å¼å¯ä»¥æ‰§è¡Œç®—æœ¯è¿ç®—</span>
<span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token constant">STR</span><span class="token punctuation">.</span><span class="token string">"\{x} + \{y} = \{x + y}"</span><span class="token punctuation">;</span>
<span class="token operator">|</span> <span class="token string">"10 + 20 = 30"</span>

<span class="token comment">// åµŒå…¥å¼è¡¨è¾¾å¼å¯ä»¥è°ƒç”¨æ–¹æ³•å’Œè®¿é—®å­—æ®µ</span>
<span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token constant">STR</span><span class="token punctuation">.</span><span class="token string">"You have a \{getOfferType()} waiting for you!"</span><span class="token punctuation">;</span>
<span class="token operator">|</span> <span class="token string">"You have a gift waiting for you!"</span>
<span class="token class-name">String</span> t <span class="token operator">=</span> <span class="token constant">STR</span><span class="token punctuation">.</span><span class="token string">"Access at \{req.date} \{req.time} from \{req.ipAddress}"</span><span class="token punctuation">;</span>
<span class="token operator">|</span> <span class="token string">"Access at 2022-03-25 15:34 from 8.8.8.8"</span>
</code></pre></div><ul>
<li>
<p>ä¸ºäº†å¸®åŠ©é‡æ„ï¼ŒåµŒå…¥å¼è¡¨è¾¾å¼ä¸­å¯ä»¥ä½¿ç”¨åŒå¼•å·å­—ç¬¦ï¼Œè€Œæ— éœ€å°†å®ƒä»¬è½¬ä¹‰ä¸º<code>"</code></p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"tmp.dat"</span><span class="token punctuation">;</span>
<span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> old <span class="token operator">=</span> <span class="token string">"The file "</span> <span class="token operator">+</span> filePath <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"does"</span> <span class="token operator">:</span> <span class="token string">"does not"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" exist"</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token constant">STR</span><span class="token punctuation">.</span><span class="token string">"The file \{filePath} \{file.exists() ? "</span>does<span class="token string">" : "</span>does not<span class="token string">"} exist"</span><span class="token punctuation">;</span>
<span class="token operator">|</span> <span class="token string">"The file tmp.dat does exist"</span> æˆ– <span class="token string">"The file tmp.dat does not exist"</span>
</code></pre></div></li>
<li>
<p>ä¸ºäº†æé«˜å¯è¯»æ€§ï¼Œåœ¨æºæ–‡ä»¶ä¸­ï¼ŒåµŒå…¥å¼è¡¨è¾¾å¼å¯ä»¥è·¨è¶Šå¤šè¡Œè€Œä¸ä¼šå¼•å…¥æ–°çš„æ¢è¡Œç¬¦</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">String</span> time <span class="token operator">=</span> <span class="token constant">STR</span><span class="token punctuation">.</span>"<span class="token class-name">The</span> time is \<span class="token punctuation">{</span>
    <span class="token comment">// java.time.formatåŒ…éå¸¸æœ‰ç”¨</span>
    <span class="token class-name">DateTimeFormatter</span>
      <span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"HH:mm:ss"</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token class-name">LocalTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> right now"<span class="token punctuation">;</span>
<span class="token comment">// "The time is 12:34:56 right now"</span>
</code></pre></div></li>
<li>
<p>å­—ç¬¦ä¸²æ¨¡æ¿è¡¨è¾¾å¼ä¸­åµŒå…¥è¡¨è¾¾å¼çš„æ•°é‡æ²¡æœ‰é™åˆ¶</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// åµŒå…¥å¼è¡¨è¾¾å¼å¯ä»¥æ˜¯åç¼€é€’å¢è¡¨è¾¾å¼</span>
<span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> data <span class="token operator">=</span> <span class="token constant">STR</span><span class="token punctuation">.</span><span class="token string">"\{index++}, \{index++}, \{index++}, \{index++}"</span><span class="token punctuation">;</span>
<span class="token comment">// "0, 1, 2, 3"</span>
</code></pre></div></li>
<li>
<p>ä»»ä½•Javaè¡¨è¾¾å¼éƒ½å¯ä»¥ç”¨ä½œåµŒå…¥å¼è¡¨è¾¾å¼ï¼Œç”šè‡³æ˜¯æ¨¡æ¿è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// åµŒå…¥å¼è¡¨è¾¾å¼æ˜¯ï¼ˆåµŒå¥—çš„ï¼‰æ¨¡æ¿è¡¨è¾¾å¼</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fruit <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">"apples"</span><span class="token punctuation">,</span> <span class="token string">"oranges"</span><span class="token punctuation">,</span> <span class="token string">"peaches"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token constant">STR</span><span class="token punctuation">.</span><span class="token string">"\{fruit[0]}, \{STR."</span>\<span class="token punctuation">{</span>fruit<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> \<span class="token punctuation">{</span>fruit<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token string">"}"</span><span class="token punctuation">;</span>
<span class="token comment">// "apples, oranges, peaches"</span>
</code></pre></div></li>
<li>
<p>åœ¨è¿™é‡Œï¼Œæ¨¡æ¿è¡¨è¾¾å¼ <code>STR."\{fruit[1]}, \{fruit[2]}"</code> åµŒå…¥åˆ°å¦ä¸€ä¸ªæ¨¡æ¿è¡¨è¾¾å¼çš„æ¨¡æ¿ä¸­ã€‚
ç”±äºå­˜åœ¨å¤§é‡çš„ <code>"</code> <code>,</code> <code>\</code> å’Œ <code>{ }</code> å­—ç¬¦ï¼Œè¿™æ®µä»£ç å¾ˆéš¾é˜…è¯»ï¼Œå› æ­¤æœ€å¥½å°†å…¶æ ¼å¼åŒ–ä¸ºï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token constant">STR</span><span class="token punctuation">.</span>"\<span class="token punctuation">{</span>fruit<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> \<span class="token punctuation">{</span>
    <span class="token constant">STR</span><span class="token punctuation">.</span><span class="token string">"\{fruit[1]}, \{fruit[2]}"</span>
<span class="token punctuation">}</span>"<span class="token punctuation">;</span>
</code></pre></div></li>
</ul>
<h2>å¤šè¡Œæ¨¡æ¿è¡¨è¾¾å¼</h2>
<p>æ¨¡æ¿è¡¨è¾¾å¼çš„æ¨¡æ¿å¯ä»¥è·¨è¶Šå¤šè¡Œæºä»£ç ï¼Œç±»ä¼¼äºJava 15ä¸­çš„<a href="/java-features/Java15/jep378-text-blocks">æ–‡æœ¬å—</a>çš„è¯­æ³•ã€‚
å¼€å‘è€…å¯ä»¥ç”¨å®ƒæ¥æ–¹ä¾¿çš„ç»„ç»‡<code>html</code>ã€<code>json</code>ã€<code>xml</code>ç­‰å­—ç¬¦ä¸²å†…å®¹ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// å¤šè¡Œæ¨¡æ¿è¡¨è¾¾å¼ç¤ºä¾‹ï¼šHTMLæ–‡æ¡£</span>
<span class="token class-name">String</span> title <span class="token operator">=</span> <span class="token string">"My Web Page"</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> text  <span class="token operator">=</span> <span class="token string">"Hello, world"</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> html <span class="token operator">=</span> <span class="token constant">STR</span><span class="token punctuation">.</span><span class="token triple-quoted-string string">"""
        &lt;html&gt;
          &lt;head&gt;
            &lt;title&gt;\{title}&lt;/title&gt;
          &lt;/head&gt;
          &lt;body&gt;
            &lt;p&gt;\{text}&lt;/p&gt;
          &lt;/body&gt;
        &lt;/html&gt;
        """</span><span class="token punctuation">;</span>
<span class="token operator">|</span> è¾“å‡ºç»“æœï¼š
<span class="token operator">|</span> <span class="token triple-quoted-string string">"""
| &lt;html&gt;
|   &lt;head&gt;
|     &lt;title&gt;My Web Page&lt;/title&gt;
|   &lt;/head&gt;
|   &lt;body&gt;
|     &lt;p&gt;Hello, world&lt;/p&gt;
|   &lt;/body&gt;
| &lt;/html&gt;
| """</span>

<span class="token comment">// å¤šè¡Œæ¨¡æ¿è¡¨è¾¾å¼ç¤ºä¾‹ï¼šJSONæ–‡æ¡£</span>
<span class="token class-name">String</span> name    <span class="token operator">=</span> <span class="token string">"Joan Smith"</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> phone   <span class="token operator">=</span> <span class="token string">"555-123-4567"</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> address <span class="token operator">=</span> <span class="token string">"1 Maple Drive, Anytown"</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token constant">STR</span><span class="token punctuation">.</span><span class="token triple-quoted-string string">"""
    {
        "name":    "\{name}",
        "phone":   "\{phone}",
        "address": "\{address}"
    }
    """</span><span class="token punctuation">;</span>
<span class="token operator">|</span> è¾“å‡ºç»“æœï¼š
<span class="token operator">|</span> <span class="token triple-quoted-string string">"""
| {
|     "name":    "Joan Smith",
|     "phone":   "555-123-4567",
|     "address": "1 Maple Drive, Anytown"
| }
| """</span>

<span class="token keyword">record</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">double</span> width<span class="token punctuation">,</span> <span class="token keyword">double</span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">double</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> width <span class="token operator">*</span> height<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Rectangle</span><span class="token punctuation">[</span><span class="token punctuation">]</span> zone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token string">"Alfa"</span><span class="token punctuation">,</span> <span class="token number">17.8</span><span class="token punctuation">,</span> <span class="token number">31.4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token string">"Bravo"</span><span class="token punctuation">,</span> <span class="token number">9.6</span><span class="token punctuation">,</span> <span class="token number">12.4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token string">"Charlie"</span><span class="token punctuation">,</span> <span class="token number">7.1</span><span class="token punctuation">,</span> <span class="token number">11.23</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// å¤šè¡Œæ¨¡æ¿è¡¨è¾¾å¼ç¤ºä¾‹ï¼šè¡¨æ ¼</span>
<span class="token class-name">String</span> table <span class="token operator">=</span> <span class="token constant">STR</span><span class="token punctuation">.</span><span class="token triple-quoted-string string">"""
    Description  Width  Height  Area
    \{zone[0].name}  \{zone[0].width}  \{zone[0].height}     \{zone[0].area()}
    \{zone[1].name}  \{zone[1].width}  \{zone[1].height}     \{zone[1].area()}
    \{zone[2].name}  \{zone[2].width}  \{zone[2].height}     \{zone[2].area()}
    Total \{zone[0].area() + zone[1].area() + zone[2].area()}
    """</span><span class="token punctuation">;</span>
<span class="token operator">|</span> è¾“å‡ºç»“æœï¼š
<span class="token operator">|</span> <span class="token triple-quoted-string string">"""
| Description  Width  Height  Area
| Alfa  17.8  31.4     558.92
| Bravo  9.6  12.4     119.03999999999999
| Charlie  7.1  11.23     79.733
| Total 757.693
| """</span>
</code></pre></div><h2>FMTæ¨¡æ¿å¤„ç†å™¨</h2>
<p>é™¤äº†STRæ¨¡ç‰ˆå¤„ç†å™¨ä¹‹å¤–ï¼ŒJavaä¸­è¿˜æä¾›äº†å¦å¤–ä¸€ä¸ªæ¨¡ç‰ˆå¤„ç†å™¨ï¼šFMTã€‚
FMTä¸STRç›¸ä¼¼ä¹‹å¤„åœ¨äºå®ƒæ‰§è¡Œæ’å€¼ï¼Œä½†è¿˜æä¾›äº†<mark>æ ¼å¼åŒ–å¤„ç†</mark>èƒ½åŠ›ã€‚</p>
<ul>
<li>æ ¼å¼è¯´æ˜ç¬¦ä¸<code>java.util.Formatter</code>ä¸­å®šä¹‰çš„æ ¼å¼è¯´æ˜ç¬¦ç›¸åŒ</li>
</ul>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">record</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">double</span> width<span class="token punctuation">,</span> <span class="token keyword">double</span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">double</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> width <span class="token operator">*</span> height<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Rectangle</span><span class="token punctuation">[</span><span class="token punctuation">]</span> zone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token string">"Alfa"</span><span class="token punctuation">,</span> <span class="token number">17.8</span><span class="token punctuation">,</span> <span class="token number">31.4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token string">"Bravo"</span><span class="token punctuation">,</span> <span class="token number">9.6</span><span class="token punctuation">,</span> <span class="token number">12.4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token string">"Charlie"</span><span class="token punctuation">,</span> <span class="token number">7.1</span><span class="token punctuation">,</span> <span class="token number">11.23</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// å¤šè¡Œæ¨¡æ¿è¡¨è¾¾å¼ç¤ºä¾‹ï¼šè¡¨æ ¼</span>
<span class="token class-name">String</span> table <span class="token operator">=</span> <span class="token constant">FMT</span><span class="token punctuation">.</span><span class="token triple-quoted-string string">"""
    Description     Width    Height     Area
    %-12s\{zone[0].name}  %7.2f\{zone[0].width}  %7.2f\{zone[0].height}     %7.2f\{zone[0].area()}
    %-12s\{zone[1].name}  %7.2f\{zone[1].width}  %7.2f\{zone[1].height}     %7.2f\{zone[1].area()}
    %-12s\{zone[2].name}  %7.2f\{zone[2].width}  %7.2f\{zone[2].height}     %7.2f\{zone[2].area()}
    \{" ".repeat(28)} Total %7.2f\{zone[0].area() + zone[1].area() + zone[2].area()}
    """</span><span class="token punctuation">;</span>
<span class="token operator">|</span> è¾“å‡ºç»“æœï¼š
<span class="token operator">|</span> <span class="token triple-quoted-string string">"""
| Description     Width    Height     Area
| Alfa            17.80    31.40      558.92
| Bravo            9.60    12.40      119.04
| Charlie          7.10    11.23       79.73
|                              Total  757.69
| """</span>
</code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Java 21 æ–°ç‰¹æ€§ï¼šæœ‰åºé›†åˆ</title>
      <link>https://www.geekyspace.cn/md/java-features/Java21/jep431-sequenced-collections.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java21/jep431-sequenced-collections.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 21 æ–°ç‰¹æ€§ï¼šæœ‰åºé›†åˆ</source>
      <description>Java 21 æ–°ç‰¹æ€§ï¼šæœ‰åºé›†åˆï¼ˆSequenced Collectionsï¼‰ åœ¨JDK 21ä¸­ï¼Œæœ‰åºé›†åˆï¼ˆSequenced Collectionsï¼‰å¼•å…¥äº†æ–°çš„æ¥å£å’Œæ–¹æ³•æ¥ç®€åŒ–é›†åˆå¤„ç†ã€‚ æ­¤å¢å¼ºåŠŸèƒ½æ—¨åœ¨è§£å†³è®¿é—®Javaä¸­å„ç§é›†åˆç±»å‹çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ éœ€è¦éç»Ÿä¸€ä¸”éº»çƒ¦å¤„ç†åœºæ™¯ Sequenced Collections å¼•å…¥å¦‚ä¸‹ 3 ä¸ªæ–°æ¥å£ï¼Œç”¨äº...</description>
      <category>Java</category>
      <pubDate>Sun, 07 Jan 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>åœ¨JDK 21ä¸­ï¼Œ<strong>æœ‰åºé›†åˆ</strong>ï¼ˆSequenced Collectionsï¼‰å¼•å…¥äº†æ–°çš„æ¥å£å’Œæ–¹æ³•æ¥ç®€åŒ–é›†åˆå¤„ç†ã€‚</p>
<blockquote>
<p>æ­¤å¢å¼ºåŠŸèƒ½æ—¨åœ¨è§£å†³è®¿é—®Javaä¸­å„ç§é›†åˆç±»å‹çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ éœ€è¦éç»Ÿä¸€ä¸”éº»çƒ¦å¤„ç†åœºæ™¯</p>
</blockquote>
<p><code>Sequenced Collections</code> å¼•å…¥å¦‚ä¸‹ 3 ä¸ªæ–°æ¥å£ï¼Œç”¨äºå¤„ç†é¡ºåº<code>List</code>ã€<code>Set</code>å’Œ<code>Map</code>ï¼Œ
å¹¶å°†å®ƒä»¬æ•´åˆåˆ°ç°æœ‰çš„é›†åˆç±»å‹ä¸­ã€‚è¿™äº›æ–°æ¥å£ä¸­çš„æ–¹æ³•éƒ½å…·æœ‰é»˜è®¤å®ç°ã€‚</p>
<ol>
<li>SequencedCollection</li>
<li>SequencedSet</li>
<li>SequencedMap</li>
</ol>
<h2>SequencedCollection</h2>
<p>æä¾›äº†åœ¨é›†åˆä¸¤ç«¯æ·»åŠ ã€æ£€ç´¢å’Œç§»é™¤å…ƒç´ çš„æ–¹æ³•ï¼Œæ²¿ç€<code>reversed()</code>æ–¹æ³•æä¾›äº†è¯¥é›†åˆçš„é€†åºè§†å›¾ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">interface</span> <span class="token class-name">SequencedCollection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// æ–°æ–¹æ³•ï¼šè¿”å›åè½¬åçš„åºåˆ—åŒ–é›†åˆ</span>
    <span class="token class-name">SequencedCollection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">reversed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ä»¥ä¸‹æ–¹æ³•æ˜¯ä»Dequeæå‡çš„,æ”¯æŒåœ¨ä¸¤ç«¯æ·»åŠ ã€è·å–å’Œåˆ é™¤å…ƒç´ </span>
    <span class="token keyword">void</span> <span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">addLast</span><span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">E</span> <span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">E</span> <span class="token function">getLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">E</span> <span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">E</span> <span class="token function">removeLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul>
<li>æ–°çš„<code>reversed()</code>æ–¹æ³•æä¾›äº†åŸå§‹é›†åˆçš„åå‘è§†å›¾ï¼Œå¯¹åŸå§‹é›†åˆçš„ä»»ä½•ä¿®æ”¹éƒ½å¯ä»¥åœ¨è§†å›¾ä¸­çœ‹åˆ°</li>
<li>å¦‚æœå…è®¸ï¼Œå¯¹è§†å›¾çš„ä¿®æ”¹å°†å†™å…¥åŸå§‹é›†åˆ</li>
<li>é€†åºè§†å›¾ä½¿å¾—ä¸åŒçš„åºåˆ—ç±»å‹å¯ä»¥åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šå¤„ç†å…ƒç´ 
<ul>
<li>å¦‚ï¼šå¢å¼ºforå¾ªç¯ã€æ˜¾å¼iterator()å¾ªç¯ã€forEach()ã€stream()ã€parallelStream() å’Œ toArray()</li>
</ul>
</li>
</ul>
<p>ä¾‹å¦‚ï¼Œä»<code>LinkedHashSet</code>è·å¾—é€†åºæµä»¥å‰å¾ˆéš¾ï¼Œç°åœ¨å¾ˆç®€å•</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>linkedHashSet<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">reverseOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// è·å–é€†åºæµéå¸¸å›°éš¾</span>
linkedHashSet<span class="token punctuation">.</span><span class="token function">reversed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// ç°åœ¨ï¼šç›´æ¥ä½¿ç”¨ reversed() æ–¹æ³•è·å–é€†åºæµ</span>
</code></pre></div><blockquote>
<p><code>reversed()</code> æ–¹æ³•æœ¬è´¨ä¸Šæ˜¯ <code>NavigableSet::descendingSet</code>çš„é‡å‘½åï¼Œå¹¶å‡çº§ä¸º SequencedCollection</p>
</blockquote>
<h2>SequencedSet</h2>
<p>sequenced set æ˜¯ä¸€ä¸ªä¸åŒ…å«é‡å¤å…ƒç´ çš„ SequencedCollectionï¼ŒåŒºåˆ«æ˜¯<code>SequencedSet.reversed()</code>çš„è¿”å›ç±»å‹æ˜¯SequencedSetã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">interface</span> <span class="token class-name">SequencedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">SequencedCollection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// é‡å†™çˆ¶æ¥å£çš„ reversed() æ–¹æ³•</span>
    <span class="token class-name">SequencedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">reversed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>SortedSet</strong></p>
<ul>
<li>Javaé›†åˆæ¡†æ¶ä¸­<code>SortedSet</code>æ¥å£ï¼Œè¡¨ç¤ºä¸€ä¸ªæœ‰åºé›†åˆ</li>
<li>ä¸èƒ½æ”¯æŒæ˜¾å¼å®šä½æ“ä½œï¼Œå› ä¸ºæ˜¯åŸºäºå…ƒç´ ä¹‹é—´çš„ç›¸å¯¹æ¯”è¾ƒæ¥ç¡®å®šå®ƒä»¬ä½ç½®çš„ï¼Œè€Œä¸æ˜¯åŸºäºé¡ºåºæ’å…¥</li>
<li>å¦‚æœå°è¯•ä½¿ç”¨<code>addFirst(E)</code>æˆ–<code>addLast(E)</code>æ–¹æ³•ï¼Œä¼šæŠ›å‡º<code>UnsupportedOperationException</code>å¼‚å¸¸</li>
</ul>
<p><strong>SequencedSet</strong></p>
<ul>
<li><code>SequencedSet</code>æ¥å£æ‰©å±•äº†<code>SortedSet</code></li>
<li>å…¶ä¸­<code>addFirst(E)</code>å’Œ<code>addLast(E)</code> æ–¹æ³•å¯¹äºé›†åˆï¼ˆå¦‚<code>LinkedHashSet</code>ï¼‰å…·æœ‰ç‰¹æ®Šæƒ…å†µè¯­ä¹‰ï¼š
<ul>
<li>å¦‚æœå…ƒç´ å·²ç»å­˜åœ¨äºé›†åˆä¸­ï¼Œåˆ™å°†å…¶ç§»åŠ¨åˆ°é€‚å½“çš„ä½ç½®</li>
<li>è¿™å¼¥è¡¥äº†LinkedHashSetä¸­çš„ä¸€ä¸ªé•¿æœŸç¼ºé™·ï¼Œå³æ— æ³•é‡æ–°å®šä½å…ƒç´ </li>
</ul>
</li>
</ul>
<h2>SequencedMap</h2>
<p>sequenced map æ˜¯ä¸€ä¸ªæ˜ å°„ï¼Œå…¶é”®å…·æœ‰å·²å®šä¹‰çš„é¡ºåºï¼Œ
å®ƒä¸å®ç°SequencedCollectionï¼Œè€Œæ˜¯æä¾›äº†è‡ªå·±çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å°†è®¿é—®é¡ºåºåº”ç”¨äºæ˜ å°„æ¡ç›®ï¼Œè€Œä¸æ˜¯å•ä¸ªå…ƒç´ ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">interface</span> <span class="token class-name">SequencedMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// æ–°æ–¹æ³•</span>
    <span class="token class-name">SequencedMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">reversed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// è¿”å›ä¸€ä¸ªåè½¬çš„æ˜ å°„</span>
    <span class="token class-name">SequencedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> <span class="token function">sequencedKeySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// è¿”å›é”®çš„åºåˆ—åŒ–é›†åˆ</span>
    <span class="token class-name">SequencedCollection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">sequencedValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è¿”å›å€¼çš„åºåˆ—åŒ–é›†åˆ</span>
    <span class="token class-name">SequencedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">sequencedEntrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è¿”å›æ¡ç›®çš„åºåˆ—åŒ–é›†åˆ</span>
    <span class="token class-name">V</span> <span class="token function">putFirst</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">// å°†é”®å€¼å¯¹æ”¾åœ¨æ˜ å°„çš„ç¬¬ä¸€ä¸ªä½ç½®</span>
    <span class="token class-name">V</span> <span class="token function">putLast</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">// å°†é”®å€¼å¯¹æ”¾åœ¨æ˜ å°„çš„æœ€åä¸€ä¸ªä½ç½®</span>
    <span class="token comment">// ä» NavigableMap æå‡çš„æ–¹æ³•ï¼Œæ”¯æŒåœ¨æ˜ å°„çš„ä¸¤ç«¯è·å–å’Œç§»é™¤æ¡ç›®</span>
    <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">firstEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">// è¿”å›æ˜ å°„çš„ç¬¬ä¸€ä¸ªæ¡ç›®</span>
    <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">lastEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment">// è¿”å›æ˜ å°„çš„æœ€åä¸€ä¸ªæ¡ç›®</span>
    <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">pollFirstEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// ç§»é™¤å¹¶è¿”å›æ˜ å°„çš„ç¬¬ä¸€ä¸ªæ¡ç›®</span>
    <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">pollLastEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// ç§»é™¤å¹¶è¿”å›æ˜ å°„çš„æœ€åä¸€ä¸ªæ¡ç›®</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ–°çš„<code>put*(K, V)</code>æ–¹æ³•å…·æœ‰ç‰¹æ®Šçš„å«ä¹‰ï¼Œç±»ä¼¼äº SequencedSet ä¸­å¯¹åº”çš„<code>add*(E)</code>æ–¹æ³•ï¼š</p>
<ul>
<li>å¯¹äº LinkedHashMap æ˜ å°„ï¼Œå¦‚æœå·²å­˜åœ¨ç›¸åŒé”®çš„æ¡ç›®ï¼Œè¯¥æ–¹æ³•å°†é‡æ–°å®šä½è¯¥æ¡ç›®</li>
<li>å¯¹äº SortedMap æ˜ å°„ï¼Œè¿™äº›æ–¹æ³•ä¼šæŠ›å‡º <code>UnsupportedOperationException</code> å¼‚å¸¸</li>
</ul>
<h2>æ”¹é€ </h2>
<p>ä¸Šè¿°å®šä¹‰çš„ä¸‰ä¸ªæ–°æ¥å£å®Œç¾åœ°é€‚åº”äº†ç°æœ‰çš„é›†åˆç±»å‹å±‚æ¬¡ç»“æ„ï¼ˆç‚¹å‡»æ”¾å¤§ï¼‰ï¼š</p>
<figure><img src="http://img.geekyspace.cn/pictures/2024/SequencedCollectionDiagram20220216.png" alt="Sequenced-Collections" tabindex="0" loading="lazy"><figcaption>Sequenced-Collections</figcaption></figure>
<p>å…·ä½“è€Œè¨€ï¼Œæˆ‘ä»¬å¯¹ç°æœ‰çš„ç±»å’Œæ¥å£è¿›è¡Œä»¥ä¸‹è°ƒæ•´ï¼š</p>
<ul>
<li>List ç°åœ¨å°† SequencedCollection å®šä¹‰ä¸ºå…¶ç›´æ¥è¶…çº§æ¥å£</li>
<li>Deque ç°åœ¨å°† SequencedCollection å®šä¹‰ä¸ºå…¶ç›´æ¥è¶…çº§æ¥å£</li>
<li>LinkedHashSet å¦å¤–å®ç°äº† SequencedSet</li>
<li>SortedSet ç°åœ¨å°† SequencedSet å®šä¹‰ä¸ºå…¶ç›´æ¥è¶…çº§æ¥å£</li>
<li>LinkedHashMap å¦å¤–å®ç°äº† SequencedMap</li>
<li>SortedMap ç°åœ¨å°† SequencedMap å®šä¹‰ä¸ºå…¶ç›´æ¥è¶…çº§æ¥å£</li>
</ul>
<p>æˆ‘ä»¬åœ¨é€‚å½“çš„ä½ç½®ä¸º<code>reversed()</code>æ–¹æ³•å®šä¹‰åå˜è¦†ç›–ã€‚
ä¾‹å¦‚: <code>List::reversed</code> è¢«è¦†ç›–ä¸ºè¿”å› List ç±»å‹çš„å€¼ï¼Œè€Œä¸æ˜¯ <code>SequencedCollection</code> ç±»å‹çš„å€¼ã€‚</p>
<p>æˆ‘ä»¬è¿˜å‘ Collections å®ç”¨ç±»æ·»åŠ äº†æ–°æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºä¸‰ç§æ–°ç±»å‹çš„ä¸å¯ä¿®æ”¹åŒ…è£…ï¼š</p>
<ul>
<li>Collections.unmodifiableSequencedCollection(sequencedCollection)</li>
<li>Collections.unmodifiableSequencedSet(sequencedSet)</li>
<li>Collections.unmodifiableSequencedMap(sequencedMap)</li>
</ul>
<h2>ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ çš„è®¿é—®</h2>
<p>å¼•å…¥é¡ºåºæ¥å£çš„åŠ¨æœºæ˜¯å¯¹è·å–é›†åˆçš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ çš„ç®€å•æ–¹æ³•çš„é•¿æœŸæœªå†³éœ€æ±‚ã€‚</p>
<p>ç›®å‰ï¼Œåœ¨Java 21ä¹‹å‰ï¼ŒJDK APIè°ƒç”¨è®¿é—®ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ çš„ä¸€äº›ç¤ºä¾‹ï¼š</p>
<p>| è®¿é—®ä½ç½®   | List                    | Deque            | SortedSet   |
|</p>
]]></content:encoded>
      <enclosure url="http://img.geekyspace.cn/pictures/2024/SequencedCollectionDiagram20220216.png" type="image/png"/>
    </item>
    <item>
      <title>Java 21 æ–°ç‰¹æ€§ï¼šåˆ†ä»£ZGC</title>
      <link>https://www.geekyspace.cn/md/java-features/Java21/jep439-generational-zgc.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java21/jep439-generational-zgc.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 21 æ–°ç‰¹æ€§ï¼šåˆ†ä»£ZGC</source>
      <description>Java 21 æ–°ç‰¹æ€§ï¼šåˆ†ä»£ZGCï¼ˆGenerational ZGCï¼‰ Javaä»¥å…¶åƒåœ¾å›æ”¶æœºåˆ¶è€Œé—»åã€‚è¿™æ˜¯å®ƒçš„ä¸»è¦ä¼˜åŠ¿ä¹‹ä¸€ï¼Œä½†ä¹Ÿå¯èƒ½æ˜¯è®¸å¤šå¤´ç–¼çš„æ ¹æºã€‚ Java 11ï¼ˆJEP 333ï¼‰ä¸­å¼•å…¥äº†ä¸€ä¸ªå¯æ‰©å±•çš„ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼Œç§°ä¸ºZGC Java 15ï¼ˆJEP 377ï¼‰ä¸­ ZGC å¯ç”¨äºç”Ÿäº§ ç°åœ¨ï¼Œéšç€Java 21çš„å‡ºç°ï¼Œå®ƒå·²ç»å‘å±•æˆä¸ºä¸€ç§åˆ†ä»£GCï¼ˆJ...</description>
      <category>Java</category>
      <pubDate>Mon, 08 Jan 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Javaä»¥å…¶åƒåœ¾å›æ”¶æœºåˆ¶è€Œé—»åã€‚è¿™æ˜¯å®ƒçš„ä¸»è¦ä¼˜åŠ¿ä¹‹ä¸€ï¼Œä½†ä¹Ÿå¯èƒ½æ˜¯è®¸å¤šå¤´ç–¼çš„æ ¹æºã€‚</p>
<ul>
<li>Java 11ï¼ˆ<a href="https://openjdk.org/jeps/333" target="_blank" rel="noopener noreferrer">JEP 333</a>ï¼‰ä¸­å¼•å…¥äº†ä¸€ä¸ªå¯æ‰©å±•çš„ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼Œç§°ä¸ºZGC</li>
<li>Java 15ï¼ˆ<a href="https://openjdk.org/jeps/377" target="_blank" rel="noopener noreferrer">JEP 377</a>ï¼‰ä¸­ ZGC å¯ç”¨äºç”Ÿäº§</li>
<li>ç°åœ¨ï¼Œéšç€Java 21çš„å‡ºç°ï¼Œå®ƒå·²ç»å‘å±•æˆä¸ºä¸€ç§åˆ†ä»£GCï¼ˆ<a href="https://openjdk.org/jeps/439" target="_blank" rel="noopener noreferrer">JEP 439</a>ï¼‰</li>
</ul>
<h2>åƒåœ¾æ”¶é›†ï¼ˆGarbage Collectionï¼‰</h2>
<p>åœ¨Javaä¸­ï¼Œåƒåœ¾æ”¶é›†å™¨è´Ÿè´£é‡Šæ”¾å †å†…å­˜ï¼Œå †å†…å­˜æ˜¯å­˜å‚¨Javaå¯¹è±¡çš„åœ°æ–¹ã€‚
è¿™æœ‰åŠ©äºé˜²æ­¢å†…å­˜æ³„æ¼å¹¶ç¡®ä¿æœ‰æ•ˆçš„èµ„æºä½¿ç”¨ï¼Œå¦åˆ™ï¼Œç¨‹åºä¼šæŠ›å‡º<code>OutOfMemoryError</code>å¼‚å¸¸ã€‚</p>
<p>â€œ<a href="https://wiki.c2.com/?GarbageCollection" target="_blank" rel="noopener noreferrer">åƒåœ¾æ”¶é›†</a>â€çš„æ¦‚å¿µæœ¬è´¨ä¸Šæ˜¯<strong>è‡ªåŠ¨å†…å­˜ç®¡ç†</strong>ï¼Œ è¿™å¯èƒ½å¯¼è‡´å¦‚ä¸‹æ½œåœ¨çš„é”™è¯¯ï¼š</p>
<ol>
<li>éœ€è¦æ—¶é—´æ¥æ¸…ç†å’Œé‡æ–°æ’åˆ—å†…å­˜ï¼Œå¼•å…¥äº†è¿è¡Œæ—¶å¼€é”€ï¼Œè¶…å‡ºäº†ç¨‹åºå‘˜çš„æ§åˆ¶ã€‚</li>
<li>GCè¿è¡Œçš„å®é™…ç‚¹é€šå¸¸æ˜¯ä¸ç¡®å®šçš„ï¼Œå¯¹äºé«˜ååé‡å†…å­˜æ¶ˆè€—å¤§çš„åº”ç”¨ï¼Œå¯èƒ½ä¼šé•¿æ—¶é—´çš„â€œ<strong>GCæš‚åœ</strong>â€</li>
<li>è®½åˆºçš„æ˜¯ï¼ŒGCçš„éç¡®å®šæ€§ä¹Ÿæ˜¯å®ƒçš„ä¼˜ç‚¹ä¹‹ä¸€ï¼Œæˆ‘ä»¬ä¸å¿…æ‹…å¿ƒå†…å­˜æ˜¯ä½•æ—¶æˆ–å¦‚ä½•é‡Šæ”¾çš„ï¼Œå®ƒå°†è‡ªåŠ¨å‘ç”Ÿ</li>
</ol>
<p>æœ‰ä¸‰ç§ä¸»è¦çš„è‡ªåŠ¨å†…å­˜ç®¡ç†æŠ€æœ¯ï¼š</p>
<ol>
<li>å¼•ç”¨è®¡æ•°ï¼ˆ<a href="https://wiki.c2.com/?ReferenceCounting" target="_blank" rel="noopener noreferrer">ReferenceCounting</a>ï¼‰</li>
<li>æ ‡è®°å’Œæ¸…é™¤ï¼ˆ<a href="https://wiki.c2.com/?MarkAndSweep" target="_blank" rel="noopener noreferrer">MarkAndSweep</a>ï¼‰</li>
<li>å¤åˆ¶ï¼ˆ<a href="https://wiki.c2.com/?StopAndCopy" target="_blank" rel="noopener noreferrer">StopAndCopy</a>ï¼‰</li>
</ol>
<h2>ä¸åŒè¯­è¨€å¦‚ä½•ç®¡ç†å†…å­˜</h2>
<ul>
<li><strong>C/C++</strong>ï¼šæ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œç¨‹åºå‘˜è´Ÿè´£åˆ†é…å’Œé‡Šæ”¾å†…å­˜</li>
<li><strong>Objective-C å’Œ Swift</strong>ï¼šå¼•å…¥äº†è‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼ˆARCï¼‰ï¼Œä½†ä»ç„¶éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜</li>
<li><strong>Rust</strong>ï¼šä½¿ç”¨<a href="https://en.wikipedia.org/wiki/Substructural_type_system#Affine_type_systems" target="_blank" rel="noopener noreferrer">ä»¿å°„ç±»å‹ç³»ç»Ÿ</a>
è€Œä¸æ˜¯GCï¼Œå¼•å…¥äº†æ‰€æœ‰æƒå’Œå€Ÿç”¨ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥å†…å­˜å®‰å…¨æ€§</li>
<li><strong>Kotlin</strong>ï¼šä¸Javaç±»ä¼¼ï¼Œä½†å¼•å…¥äº†<code>Kotlin/Native</code>ï¼Œå…è®¸æ‰‹åŠ¨å†…å­˜ç®¡ç†</li>
<li><strong>Javaã€<a href="https://devguide.python.org/internals/garbage-collector/" target="_blank" rel="noopener noreferrer">Python</a>
ã€Goã€<a href="https://learn.microsoft.com/en-us/dotnet/standard/garbage-collection/fundamentals" target="_blank" rel="noopener noreferrer">C#</a>
ã€JavaScript</strong>ï¼šè‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œåƒåœ¾æ”¶é›†å™¨è´Ÿè´£é‡Šæ”¾å†…å­˜</li>
</ul>
<h2>HotSpot JVMåƒåœ¾æ”¶é›†å™¨</h2>
<p>å†…å­˜ç®¡ç†æœ‰è®¸å¤šä¸åŒçš„æ–¹æ³•ï¼Œå¹¶ä¸”æ²¡æœ‰â€œæœ€å¥½â€çš„æ–¹æ³•ã€‚
å³ä½¿åœ¨ä¸€ç§è¯­è¨€/è¿è¡Œæ—¶ä¸­ï¼Œä¹Ÿå¯ä»¥æœ‰ä¸æ­¢ä¸€ç§åƒåœ¾æ”¶é›†æ–¹æ³•ï¼ŒJVMå°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚</p>
<p>ä¸å•ä¸€çš„GCä¸åŒï¼Œ<a href="https://docs.oracle.com/en/java/javase/11/gctuning/available-collectors.html" target="_blank" rel="noopener noreferrer">HotSpot JVM</a>æœ‰5ä¸ªGCå¯ä¾›é€‰æ‹©ï¼š</p>
<ul>
<li>Garbage-First Collector(G1)ï¼ˆJava 9åçš„é»˜è®¤é€‰é¡¹ï¼‰</li>
<li>Serial Collector</li>
<li>Parallel Collector</li>
<li><s>Concurrent Mark Sweep (CMS) Collectorï¼ˆJava 9ä¸­å·²å¼ƒç”¨ï¼‰</s></li>
<li>Shenandoah GCï¼ˆJava 12+ï¼‰</li>
<li>Z Garbage Collectorï¼ˆJava 15ä¸­å¯ç”¨äºç”Ÿäº§ï¼‰</li>
</ul>
<p>æ­¤å¤–ï¼Œä¸è¦å¿˜è®°è¿˜æœ‰å…¶ä»–çš„JDKå®ç°ï¼</p>
<ul>
<li><a href="https://eclipse.dev/openj9/" target="_blank" rel="noopener noreferrer">Eclipse OpenJ9</a> ä½¿ç”¨å…·æœ‰å¤šä¸ªæ”¶é›†ç­–ç•¥çš„åˆ†ä»£å¹¶å‘GC</li>
<li><a href="https://www.graalvm.org/latest/reference-manual/native-image/optimizations-and-performance/MemoryManagement/" target="_blank" rel="noopener noreferrer">GraalVM</a>
æœ‰ Epsilon GCï¼Œå®ƒæ˜¯ä¸€ä¸ª No-Op GCï¼Œå®Œå…¨ä¸è¿›è¡Œå†…å­˜æ¸…ç†</li>
</ul>
<h2>å¦‚ä½•é€‰æ‹©JVM GC</h2>
<p>è®¸å¤šè¯­è¨€åªæä¾›äº†ä¸€ç§åƒåœ¾æ”¶é›†æ–¹æ³•ï¼Œè€ŒJavaä¹‹æ‰€ä»¥æä¾›å¤šç§GCé€‰é¡¹ï¼Œå–å†³äºæ‚¨çš„åº”ç”¨ç¨‹åºå¯¹äºâ€œå…¨å±€åœé¡¿â€äº‹ä»¶å’Œæ€»ä½“æš‚åœæ—¶é—´çš„å®¹å¿ç¨‹åº¦ã€‚</p>
<p>GCç®—æ³•ä¸»è¦å…³æ³¨ä¸‰ä¸ªæŒ‡æ ‡ï¼š</p>
<ol>
<li><strong>ååé‡</strong>ï¼šåº”ç”¨ç¨‹åºçš„è¿è¡Œæ—¶é—´ä¸GCæ—¶é—´çš„æ¯”ç‡</li>
<li><strong>å»¶è¿Ÿ</strong>ï¼šGCæš‚åœæ—¶é—´</li>
<li><strong>å†…å­˜å ç”¨</strong>ï¼šGCå¯¹å †å†…å­˜çš„ä½¿ç”¨</li>
</ol>
<p>ä¸è®¸å¤šé—®é¢˜ä¸€æ ·ï¼Œæ‚¨æ— æ³•ä¸ºæ‰€æœ‰è¿™äº›é—®é¢˜è¿›è¡Œä¼˜åŒ–ï¼Œå› æ­¤æ¯ä¸ªGCéƒ½éœ€è¦åœ¨å®ƒä»¬ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ç‚¹ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›åœºæ™¯åŠå…¶åŒ¹é…çš„GCä½œä¸ºèµ·ç‚¹ï¼š</p>
<p>| åƒåœ¾æ”¶é›†å™¨       | åœºæ™¯                                             |
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>Java 21 æ–°ç‰¹æ€§ï¼šè®°å½•æ¨¡å¼</title>
      <link>https://www.geekyspace.cn/md/java-features/Java21/jep440-record-partterns.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java21/jep440-record-partterns.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 21 æ–°ç‰¹æ€§ï¼šè®°å½•æ¨¡å¼</source>
      <description>Java 21 æ–°ç‰¹æ€§ï¼šè®°å½•æ¨¡å¼ï¼ˆRecord Patternsï¼‰ Java 21 ä¸­çš„è®°å½•æ¨¡å¼ï¼ˆRecord Patternsï¼‰æ˜¯å¯¹æ¨¡å¼åŒ¹é…çš„æ‰©å±•ï¼Œå®ƒå…è®¸åœ¨æ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨è®°å½•ï¼ˆRecordsï¼‰ç±»å‹ã€‚ åŒæ—¶ï¼Œè®°å½•æ¨¡å¼è¿˜æ”¯æŒåµŒå¥—ï¼Œå¯ä»¥å®ç°æ›´å¤æ‚çš„æ•°æ®æŸ¥è¯¢å’Œå¤„ç†ã€‚ ä»…ä»…æ˜¯ç±»å‹åŒ¹é… åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒJavaä¸­çš„æ¨¡å¼åŒ¹é…ä¸»è¦å±€é™äºåŒ¹é…ç±»å‹ï¼šinstanceofç±»å‹...</description>
      <category>Java</category>
      <pubDate>Tue, 09 Jan 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Java 21 ä¸­çš„<strong>è®°å½•æ¨¡å¼</strong>ï¼ˆRecord Patternsï¼‰æ˜¯å¯¹æ¨¡å¼åŒ¹é…çš„æ‰©å±•ï¼Œå®ƒå…è®¸åœ¨æ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨<strong>è®°å½•</strong>ï¼ˆRecordsï¼‰ç±»å‹ã€‚
åŒæ—¶ï¼Œè®°å½•æ¨¡å¼è¿˜æ”¯æŒåµŒå¥—ï¼Œå¯ä»¥å®ç°æ›´å¤æ‚çš„æ•°æ®æŸ¥è¯¢å’Œå¤„ç†ã€‚</p>
<h2>ä»…ä»…æ˜¯ç±»å‹åŒ¹é…</h2>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒJavaä¸­çš„æ¨¡å¼åŒ¹é…ä¸»è¦å±€é™äºåŒ¹é…ç±»å‹ï¼š<a href="/java-features/Java16/jep394-pattern-matching-for-instanceof">instanceofç±»å‹åŒ¹é…</a></p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// Java 16 ä¹‹å‰</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> obj<span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// JAVA 16+</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">String</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Java
21æ‰©å±•äº†è¿™ä¸ªæ¦‚å¿µï¼Œä½¿å…¶å¯ç”¨äºswitchè¯­å¥å’Œè¡¨è¾¾å¼: <a href="/java-features/Java21/jep441-pattern-matching-for-switch">switchçš„æ¨¡å¼åŒ¹é…</a></p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// JAVA 21ä¹‹å‰</span>
<span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">asStringValue</span><span class="token punctuation">(</span><span class="token class-name">Object</span> anyValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>anyValue <span class="token keyword">instanceof</span> <span class="token class-name">String</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> str<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>anyValue <span class="token keyword">instanceof</span> <span class="token class-name">BigDecimal</span> bd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> bd<span class="token punctuation">.</span><span class="token function">toEngineeringString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>anyValue instance <span class="token class-name">Integer</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token string">"n/a"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// JAVA 21+</span>
<span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">asStringValue</span><span class="token punctuation">(</span><span class="token class-name">Object</span> anyValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>anyValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token class-name">String</span> str    <span class="token operator">-&gt;</span> str<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token class-name">BigDecimal</span> bd <span class="token operator">-&gt;</span> bd<span class="token punctuation">.</span><span class="token function">toEngineeringString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token class-name">Integer</span> i     <span class="token operator">-&gt;</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span>            <span class="token operator">-&gt;</span> <span class="token string">"n/a"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä»£ç æ¯”ä¹‹å‰æ›´åŠ ç®€æ´ï¼ŒåŒæ—¶ä¹Ÿæ›´åŠ æ˜“è¯»ã€‚ä½†æ˜¯ï¼Œè¿™ç§æ¨¡å¼åŒ¹é…ä»ç„¶å±€é™äºç±»å‹åŒ¹é…ã€‚</p>
<h2>recordæ¨¡å¼</h2>
<p>å½“æˆ‘ä»¬å°†æ¨¡å¼åŒ¹é…ä¸è®°å½•ç±»å‹ç»“åˆä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º<strong>è®°å½•æ¨¡å¼</strong>ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨æ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨è®°å½•ç±»å‹ï¼Œä»¥åŠè®°å½•ç±»å‹çš„å±æ€§ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">record</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// Java 16 ä¹‹å‰</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printSum</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Point</span> p<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> x <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> y <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>x<span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// JAVA 21+</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printSum</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>x<span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å…¶ä¸­<code>Point(int x, int y)</code>å°±æ˜¯è®°å½•æ¨¡å¼ï¼Œå®ƒåŒ¹é…<code>Point</code>ç±»å‹çš„å¯¹è±¡ï¼Œå°†è®°å½•çš„å®ä¾‹ï¼ˆobjï¼‰åˆ†è§£åˆ°å®ƒçš„ç»„ä»¶ï¼ˆ<code>x</code>å’Œ<code>y</code>ï¼‰ã€‚</p>
<h2>åµŒå¥—recordçš„è§£æ„</h2>
<p>å‡è®¾æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªè®°å½•ï¼Œè¡¨ç¤ºä¸€ä¸ªçŸ©å½¢ï¼Œå…¶ä¸­åŒ…å«å·¦ä¸Šè§’å’Œå³ä¸‹è§’çš„é¢œè‰²ç‚¹ã€‚
å¦‚æœæˆ‘ä»¬æƒ³è¦è·å–å·¦ä¸Šè§’ç‚¹çš„é¢œè‰²ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">record</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">enum</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span> <span class="token constant">RED</span><span class="token punctuation">,</span> <span class="token constant">GREEN</span><span class="token punctuation">,</span> <span class="token constant">BLUE</span> <span class="token punctuation">}</span>
<span class="token keyword">record</span> <span class="token class-name">ColoredPoint</span><span class="token punctuation">(</span><span class="token class-name">Point</span> p<span class="token punctuation">,</span> <span class="token class-name">Color</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">record</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token class-name">ColoredPoint</span> upperLeft<span class="token punctuation">,</span> <span class="token class-name">ColoredPoint</span> lowerRight<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token class-name">Rectangle</span> r <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ColoredPoint</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span> y1<span class="token punctuation">)</span><span class="token punctuation">,</span> c1<span class="token punctuation">)</span><span class="token punctuation">,</span> 
                            <span class="token keyword">new</span> <span class="token class-name">ColoredPoint</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>x2<span class="token punctuation">,</span> y2<span class="token punctuation">)</span><span class="token punctuation">,</span> c2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Java 16 ä¹‹å‰</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printUpperLeftColoredPoint</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token keyword">instanceof</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token class-name">ColoredPoint</span> ul<span class="token punctuation">,</span> <span class="token class-name">ColoredPoint</span> lr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ul<span class="token punctuation">.</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// JAVA 21+</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printUpperLeftColoredPoint</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token keyword">instanceof</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token class-name">ColoredPoint</span><span class="token punctuation">(</span><span class="token class-name">Point</span> ul<span class="token punctuation">,</span> <span class="token class-name">Color</span> c<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ColoredPoint</span> lr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åµŒå¥—æ¨¡å¼å…è®¸æˆ‘ä»¬ä½¿ç”¨ä¸å°†å…¶ç»„åˆçš„ä»£ç ä¸€æ ·æ¸…æ™°ç®€æ´çš„ä»£ç æ¥æ‹†è§£èšåˆã€‚</p>
<h2>å‘å±•è„‰ç»œ</h2>
<p>è¯¥åŠŸèƒ½æœ€åˆä½œä¸ºé¢„è§ˆåŠŸèƒ½åœ¨Java 19ï¼ˆJEP 405ï¼‰ä¸­é¦–æ¬¡äº®ç›¸ï¼Œéšåç»è¿‡Java 20ï¼ˆJEP 432ï¼‰çš„è¿­ä»£ï¼Œæœ€ç»ˆåœ¨Java 21ä¸­å®šç¨¿ï¼ˆJEP 440ï¼‰ã€‚
æ­¤åŠŸèƒ½ä¸æ¨¡å¼åŒ¹é…çš„switchè¯­å¥ï¼ˆJEP 441ï¼‰å…±åŒæ¼”è¿›ï¼Œå¹¶ä¸”å®ƒä»¬ä¹‹é—´å­˜åœ¨ç›¸å½“å¤§çš„äº’åŠ¨ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>Java 21 æ–°ç‰¹æ€§ï¼šswitchæ¨¡å¼åŒ¹é…</title>
      <link>https://www.geekyspace.cn/md/java-features/Java21/jep441-pattern-matching-for-switch.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java21/jep441-pattern-matching-for-switch.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 21 æ–°ç‰¹æ€§ï¼šswitchæ¨¡å¼åŒ¹é…</source>
      <description>Java 21 æ–°ç‰¹æ€§ï¼šswitchæ¨¡å¼åŒ¹é… Java 21 å¼•å…¥äº† switch æ¨¡å¼åŒ¹é…åŠŸèƒ½ï¼Œå®ƒå¢å¼ºäº† switch è¯­å¥çš„åŠŸèƒ½ï¼Œå…è®¸ä½¿ç”¨æ›´ç®€æ´çš„è¯­æ³•æ¥æ‰§è¡Œç±»å‹æ£€æŸ¥å’Œæ•°æ®æå–ã€‚ è¯¥åŠŸèƒ½ä¸è®°å½•æ¨¡å¼ï¼ˆJEP 440ï¼‰å…±åŒå‘å±•ï¼Œå¹¶ä¸ä¹‹æœ‰ç›¸å½“å¤§çš„äº’åŠ¨ã€‚ switch + instanceof ä¸ifæ¡ä»¶ä¸­çš„instanceofä¸€æ ·ï¼Œswitch caseç°...</description>
      <category>Java</category>
      <pubDate>Wed, 10 Jan 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Java 21 å¼•å…¥äº† switch æ¨¡å¼åŒ¹é…åŠŸèƒ½ï¼Œå®ƒå¢å¼ºäº† switch è¯­å¥çš„åŠŸèƒ½ï¼Œå…è®¸ä½¿ç”¨æ›´ç®€æ´çš„è¯­æ³•æ¥æ‰§è¡Œç±»å‹æ£€æŸ¥å’Œæ•°æ®æå–ã€‚
è¯¥åŠŸèƒ½ä¸<a href="/java-features/Java21/jep440-record-partterns">è®°å½•æ¨¡å¼ï¼ˆJEP 440ï¼‰</a>å…±åŒå‘å±•ï¼Œå¹¶ä¸ä¹‹æœ‰ç›¸å½“å¤§çš„äº’åŠ¨ã€‚</p>
<h2>switch + instanceof</h2>
<p>ä¸ifæ¡ä»¶ä¸­çš„<code>instanceof</code>ä¸€æ ·ï¼Œ<code>switch case</code>ç°åœ¨å¯ä»¥å¯¹å…¶å€¼è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªcaseä½œç”¨åŸŸå˜é‡:</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">asStringValue</span><span class="token punctuation">(</span><span class="token class-name">Object</span> anyValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>anyValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token class-name">String</span> str      <span class="token operator">-&gt;</span> str<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">JSONObject</span> json <span class="token operator">-&gt;</span> json<span class="token punctuation">.</span><span class="token function">toCompactString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">BigDecimal</span> bd   <span class="token operator">-&gt;</span> bd<span class="token punctuation">.</span><span class="token function">toEngineeringString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">Integer</span> i       <span class="token operator">-&gt;</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">LocalDate</span> ld    <span class="token operator">-&gt;</span> ld<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token constant">ISO_LOCAL_DATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span>              <span class="token operator">-&gt;</span> <span class="token string">"n/a"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>switch + null</h2>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">asStringValue</span><span class="token punctuation">(</span><span class="token class-name">Object</span> anyValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>anyValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token keyword">null</span>       <span class="token operator">-&gt;</span> <span class="token string">"n/a"</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">String</span> str <span class="token operator">-&gt;</span> str<span class="token punctuation">;</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>switch + enum</h2>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">sealed</span> <span class="token keyword">interface</span> <span class="token class-name">CardClassification</span> <span class="token keyword">permits</span> <span class="token class-name">Suit</span><span class="token punctuation">,</span> <span class="token class-name">Tarot</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Suit</span> <span class="token keyword">implements</span> <span class="token class-name">CardClassification</span> <span class="token punctuation">{</span> <span class="token constant">CLUBS</span><span class="token punctuation">,</span> <span class="token constant">DIAMONDS</span><span class="token punctuation">,</span> <span class="token constant">HEARTS</span><span class="token punctuation">,</span> <span class="token constant">SPADES</span> <span class="token punctuation">}</span>
<span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Tarot</span> <span class="token keyword">implements</span> <span class="token class-name">CardClassification</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">exhaustiveSwitchWithBetterEnumSupport</span><span class="token punctuation">(</span><span class="token class-name">CardClassification</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token constant">CLUBS</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ¢…èŠ±"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">DIAMONDS</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–¹å—"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">HEARTS</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"çº¢æ¡ƒ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">SPADES</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é»‘æ¡ƒ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">Tarot</span> t <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¡”ç½—ç‰Œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœªçŸ¥çš„å¡ç‰‡ç±»å‹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Java 21 æ–°ç‰¹æ€§ï¼šè™šæ‹Ÿçº¿ç¨‹</title>
      <link>https://www.geekyspace.cn/md/java-features/Java21/jep444-virtual-threads.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java21/jep444-virtual-threads.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 21 æ–°ç‰¹æ€§ï¼šè™šæ‹Ÿçº¿ç¨‹</source>
      <description>Java 21 æ–°ç‰¹æ€§ï¼šè™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼‰ Java 21 å¼•å…¥äº†è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼‰åŠŸèƒ½ï¼Œç±»ä¼¼äºGoè¯­è¨€ä¸­çš„Goroutinesã€‚ è™šæ‹Ÿçº¿ç¨‹æ˜¯ä¸€ç§è½»é‡çº§çš„çº¿ç¨‹ï¼Œå®ƒå¯ä»¥æå¤§åœ°å‡å°‘äº†ç¼–å†™ã€ç»´æŠ¤å’Œç®¡ç†é«˜ååé‡å¹¶å‘åº”ç”¨ç¨‹åºæ‰€éœ€çš„å·¥ä½œé‡ã€‚ Javaå¹³å°ç›®å‰ä¸ºæ­¢æœ‰ä¸¤ç§ç±»å‹çš„çº¿ç¨‹ï¼šä¼ ç»Ÿçº¿ç¨‹ï¼Œä¹Ÿç§°ä¸ºå¹³å°çº¿ç¨‹ï¼Œå’Œè™šæ‹Ÿçº¿ç¨‹ã€‚...</description>
      <category>Java</category>
      <pubDate>Thu, 11 Jan 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Java 21 å¼•å…¥äº†<strong>è™šæ‹Ÿçº¿ç¨‹</strong>ï¼ˆVirtual Threadsï¼‰åŠŸèƒ½ï¼Œç±»ä¼¼äºGoè¯­è¨€ä¸­çš„<code>Goroutines</code>ã€‚
è™šæ‹Ÿçº¿ç¨‹æ˜¯ä¸€ç§è½»é‡çº§çš„çº¿ç¨‹ï¼Œå®ƒå¯ä»¥æå¤§åœ°å‡å°‘äº†ç¼–å†™ã€ç»´æŠ¤å’Œç®¡ç†é«˜ååé‡å¹¶å‘åº”ç”¨ç¨‹åºæ‰€éœ€çš„å·¥ä½œé‡ã€‚</p>
<p>Javaå¹³å°ç›®å‰ä¸ºæ­¢æœ‰ä¸¤ç§ç±»å‹çš„çº¿ç¨‹ï¼š<strong>ä¼ ç»Ÿçº¿ç¨‹</strong>ï¼Œä¹Ÿç§°ä¸º<mark>å¹³å°çº¿ç¨‹</mark>ï¼Œå’Œ<strong>è™šæ‹Ÿçº¿ç¨‹</strong>ã€‚</p>
<h2>å¹³å°çº¿ç¨‹</h2>
<p>åœ¨å¼•å…¥è™šæ‹Ÿçº¿ç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬æ‰€ä½¿ç”¨çš„çº¿ç¨‹<code>java.lang.Thread</code>æ˜¯ç”±æ‰€è°“çš„å¹³å°çº¿ç¨‹æ”¯æŒçš„ã€‚</p>
<p>è¿™äº›çº¿ç¨‹é€šå¸¸æ˜¯ 1:1 æ˜ å°„åˆ°æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„ï¼Œå› æ­¤å®ƒä»¬æ˜¯é‡é‡çº§çš„ï¼Œåˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„å¼€é”€å¾ˆå¤§ã€‚
ä¸”æ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹ï¼Œè¿™ä¼šå¯¼è‡´çº¿ç¨‹èµ„æºçš„å¿«é€Ÿè€—å°½ï¼Œä»è€Œé™åˆ¶äº†åº”ç”¨ç¨‹åºçš„å¯ä¼¸ç¼©æ€§ã€‚</p>
<h3>åˆ›å»ºå¹³å°çº¿ç¨‹</h3>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç”±å¹³å°çº¿ç¨‹æ‰§è¡Œçš„ä»£ç </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>éšç€<a href="https://openjdk.org/projects/loom/" target="_blank" rel="noopener noreferrer">Project Loom</a>ç®€åŒ–äº†æ–°çš„å¹¶å‘æ–¹æ³•ï¼Œå®ƒè¿˜æä¾›äº†ä¸€ç§æ–°çš„æ–¹æ³•æ¥åˆ›å»ºå¹³å°æ”¯æŒçš„çº¿ç¨‹ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">ofPlatform</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                      <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span>runnable<span class="token punctuation">)</span><span class="token punctuation">;</span>
                      
<span class="token comment">// æˆ–è€…</span>
<span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">ofPlatform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                      <span class="token punctuation">.</span><span class="token function">daemon</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                      <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"platform-thread"</span><span class="token punctuation">)</span>
                      <span class="token punctuation">.</span><span class="token function">unstarted</span><span class="token punctuation">(</span>runnable<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2>è™šæ‹Ÿçº¿ç¨‹</h2>
<p>è™šæ‹Ÿçº¿ç¨‹æ˜¯JDKæä¾›çš„<strong>è½»é‡çº§çº¿ç¨‹</strong>å®ç°ï¼Œå¯ä»¥åœ¨åŒä¸€ä¸ªOSçº¿ç¨‹ä¸Šè¿è¡Œè®¸å¤šè™šæ‹Ÿçº¿ç¨‹ã€‚
è™šæ‹Ÿçº¿ç¨‹ä¸ºå¹³å°çº¿ç¨‹æä¾›äº†ä¸€ç§æ›´æœ‰æ•ˆçš„æ›¿ä»£æ–¹æ¡ˆï¼Œå…è®¸å¼€å‘äººå‘˜ä»¥æ˜¾è‘—é™ä½çš„å¼€é”€å¤„ç†å¤§é‡ä»»åŠ¡ã€‚
è¿™äº›çº¿ç¨‹æä¾›äº†ä¸ç°æœ‰Javaä»£ç çš„å…¼å®¹æ€§å’Œæ— ç¼è¿ç§»è·¯å¾„ï¼Œä»è€Œä»å¢å¼ºçš„æ€§èƒ½å’Œèµ„æºåˆ©ç”¨ç‡ä¸­è·ç›Šã€‚</p>
<p>è®¸å¤šè¯­è¨€ä¸­éƒ½æœ‰æŸç§å½¢å¼çš„è½»é‡çº§çº¿ç¨‹ï¼š</p>
<ul>
<li>Goè¯­è¨€çš„<a href="https://go.dev/tour/concurrency/1" target="_blank" rel="noopener noreferrer">Goroutines</a></li>
<li>Erlangçš„<a href="https://www.erlang.org/docs/23/efficiency_guide/processes.html" target="_blank" rel="noopener noreferrer">Erlang Processes</a></li>
<li>Haskellçš„<a href="https://wiki.haskell.org/Lightweight_concurrency" target="_blank" rel="noopener noreferrer">Haskell Threads</a></li>
<li>ç­‰ç­‰</li>
</ul>
<h3>åˆ›å»ºè™šæ‹Ÿçº¿ç¨‹</h3>
<ol>
<li>ä½¿ç”¨<code>Thread.startVirtualThread()</code>æ–¹æ³•åˆ›å»ºè™šæ‹Ÿçº¿ç¨‹ï¼š</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// ä½¿ç”¨é™æ€æ„å»ºå™¨æ–¹æ³•</span>
<span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">startVirtualThread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç”±è™šæ‹Ÿçº¿ç¨‹æ‰§è¡Œçš„ä»£ç </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>Thread.ofVirtual()</code>æ¥åˆ›å»ºï¼Œè¿™é‡Œè¿˜å¯ä»¥è®¾ç½®ä¸€äº›å±æ€§ï¼Œæ¯”å¦‚ï¼šçº¿ç¨‹åç§°ç­‰ã€‚å…·ä½“å¦‚ä¸‹ä»£ç ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">Thread</span> virtualThread <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">ofVirtual</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"virtual-thread"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span>runnable<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2">
<li>ä½¿ç”¨<code>ExecutorService</code>åˆ›å»ºè™šæ‹Ÿçº¿ç¨‹ï¼š</li>
</ol>
<p>ä»Java 5å¼€å§‹ï¼Œå°±æ¨èå¼€å‘äººå‘˜ä½¿ç”¨<code>ExecutorServices</code>è€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨<code>Thread</code>ç±»äº†ã€‚
ç°åœ¨ï¼ŒJava 21ä¸­å¼•å…¥äº†ä½¿ç”¨è™šæ‹Ÿçº¿ç¨‹ï¼Œæ‰€ä»¥ä¹Ÿæœ‰äº†æ–°çš„ExecutorServiceæ¥é€‚é…ï¼Œçœ‹çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">ExecutorService</span> executor <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newVirtualThreadPerTaskExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10_000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofSeconds</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>  <span class="token comment">// executor.close() è¢«éšå¼è°ƒç”¨, ç„¶å waits</span>
</code></pre></div><p>3.ä½¿ç”¨<code>ThreadFactory</code>åˆ›å»ºè™šæ‹Ÿçº¿ç¨‹ï¼š</p>
<p>å¼€å‘è€…è¿˜å¯ä»¥åˆ›å»ºä¸€ä¸ªç”Ÿæˆè™šæ‹Ÿçº¿ç¨‹çš„å·¥å‚æ¥ç®¡ç†ï¼Œå…·ä½“çœ‹ä¸‹é¢çš„ä¾‹å­ä¾‹å­ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">ThreadFactory</span> virtualThreadFactory <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">ofVirtual</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"virtual-thread"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Thread</span> factoryThread <span class="token operator">=</span> virtualThreadFactory<span class="token punctuation">.</span><span class="token function">newThread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç”±è™šæ‹Ÿçº¿ç¨‹æ‰§è¡Œçš„ä»£ç </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
factoryThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™æ®µä»£ç åˆ›å»ºäº†ä¸€ä¸ªè™šæ‹Ÿçº¿ç¨‹å·¥å‚ï¼Œæ¯ä¸ªè™šæ‹Ÿçº¿ç¨‹éƒ½ä¼šä»¥<code>virtual-thread</code>ä¸ºå‰ç¼€ã€ä»¥æ•°å­—ç»“å°¾ï¼ˆä»0å¼€å§‹ç´¯åŠ ï¼‰çš„åç§°ã€‚</p>
<h2>è™šæ‹Ÿçº¿ç¨‹å¦‚ä½•å·¥ä½œ</h2>
<p>è™šæ‹Ÿçº¿ç¨‹æ˜¯ä¸€ä¸ªæ–°çš„è½»é‡çº§<code>java.lang.Thread</code>å˜ä½“ï¼Œç”±JVMçš„<a href="https://openjdk.org/projects/loom/" target="_blank" rel="noopener noreferrer">Project Loom</a>é¡¹ç›®å®ç°çš„ã€‚
å®ƒä½¿ç”¨äº†ä¸€ç§ç§°ä¸º<code>Continuation</code>çš„æŠ€æœ¯ï¼Œä¸å—æ“ä½œç³»ç»Ÿçš„ç®¡ç†æˆ–è°ƒåº¦ã€‚ç›¸åï¼ŒJVMè´Ÿè´£è°ƒåº¦ã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403141847457.jpg" alt="Javaä¸­è™šæ‹Ÿçº¿ç¨‹çš„ç»“æ„" tabindex="0" loading="lazy"><figcaption>Javaä¸­è™šæ‹Ÿçº¿ç¨‹çš„ç»“æ„</figcaption></figure>
<p>åº”ç”¨ç¨‹åºå®ä¾‹åŒ–è™šæ‹Ÿçº¿ç¨‹ï¼Œè€Œ JVM åˆ†é…è®¡ç®—èµ„æºæ¥å¤„ç†å®ƒä»¬ã€‚
ä¸ä¼ ç»Ÿçº¿ç¨‹ç›¸å¯¹æ¯”ï¼Œä¼ ç»Ÿçº¿ç¨‹ç›´æ¥æ˜ å°„åˆ°æ“ä½œç³»ç»Ÿï¼ˆOSï¼‰è¿›ç¨‹ã€‚
ä¼ ç»Ÿçº¿ç¨‹ä¸­ï¼Œåº”ç”¨ç¨‹åºä»£ç è´Ÿè´£æä¾›å’Œé‡Šæ”¾ OS èµ„æºã€‚
è€Œè™šæ‹Ÿçº¿ç¨‹ä¸­ï¼Œåº”ç”¨ç¨‹åºå®ä¾‹åŒ–è™šæ‹Ÿçº¿ç¨‹ï¼Œä»è€Œè¡¨è¾¾å¹¶å‘éœ€æ±‚ã€‚
ä½†å®é™…ä¸Šæ˜¯ JVM ä»æ“ä½œç³»ç»Ÿè·å–å¹¶é‡Šæ”¾èµ„æºã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403141846557.webp" alt="JVM/OSçº¿ç¨‹ç®¡ç†" tabindex="0" loading="lazy"><figcaption>JVM/OSçº¿ç¨‹ç®¡ç†</figcaption></figure>
<p>æ‰€éœ€çš„å¹³å°çº¿ç¨‹åœ¨ FIFO å·¥ä½œçªƒå–
<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ForkJoinPool.html" target="_blank" rel="noopener noreferrer">ForkJoinPool</a>
ä¸­è¿›è¡Œç®¡ç†ï¼Œé»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨æ‰€æœ‰å¯ç”¨å¤„ç†å™¨ï¼Œ
ä½†å¯ä»¥é€šè¿‡è°ƒæ•´ç³»ç»Ÿå±æ€§ <code>jdk.virtualThreadScheduler.parallelism</code> æ¥æ ¹æ®æ‚¨çš„éœ€æ±‚è¿›è¡Œä¿®æ”¹ã€‚
æ‚¨ç†Ÿæ‚‰çš„ <code>ForkJoinPool</code> å’Œå…¶ä»–åŠŸèƒ½ï¼ˆå¦‚å¹¶è¡Œæµï¼‰ä½¿ç”¨çš„å…¬å…±æ± çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œå…¬å…±æ± ä»¥ LIFO æ¨¡å¼è¿è¡Œã€‚</p>
]]></content:encoded>
      <enclosure url="https://img.geekyspace.cn/pictures/2024/202403141847457.jpg" type="image/jpeg"/>
    </item>
    <item>
      <title>Java 9 æ–°ç‰¹æ€§ï¼šäº¤äº’å¼ç¼–ç¨‹ç¯å¢ƒJShell</title>
      <link>https://www.geekyspace.cn/md/java-features/Java9/jep222-jshell.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java9/jep222-jshell.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 9 æ–°ç‰¹æ€§ï¼šäº¤äº’å¼ç¼–ç¨‹ç¯å¢ƒJShell</source>
      <description>Java 9 æ–°ç‰¹æ€§ï¼šäº¤äº’å¼ç¼–ç¨‹ç¯å¢ƒJShell JShell æ˜¯ Java 9 å¼•å…¥çš„ä¸€ä¸ªäº¤äº’å¼ç¼–ç¨‹ç¯å¢ƒï¼Œå®ƒæ˜¯ Java ç¼–ç¨‹è¯­è¨€çš„ REPLï¼ˆRead-Eval-Print Loopï¼‰å®ç°ã€‚ REPL æ˜¯ä¸€ç§ç¼–ç¨‹ç¯å¢ƒï¼Œå…è®¸ç”¨æˆ·è¾“å…¥è¡¨è¾¾å¼å¹¶ç«‹å³çœ‹åˆ°ç»“æœï¼Œè€Œæ— éœ€äº‹å…ˆç¼–å†™å’Œç¼–è¯‘å®Œæ•´çš„ç¨‹åºã€‚ JShell çš„ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªè½»é‡çº§ã€çµæ´»ä¸”æ˜“äºä½¿ç”¨çš„å·¥å…·ï¼Œä½¿å¾—...</description>
      <category>Java</category>
      <pubDate>Thu, 21 Dec 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>JShell æ˜¯ Java 9 å¼•å…¥çš„ä¸€ä¸ª<strong>äº¤äº’å¼ç¼–ç¨‹ç¯å¢ƒ</strong>ï¼Œå®ƒæ˜¯ Java ç¼–ç¨‹è¯­è¨€çš„ REPLï¼ˆRead-Eval-Print Loopï¼‰å®ç°ã€‚
REPL æ˜¯ä¸€ç§ç¼–ç¨‹ç¯å¢ƒï¼Œå…è®¸ç”¨æˆ·è¾“å…¥è¡¨è¾¾å¼å¹¶ç«‹å³çœ‹åˆ°ç»“æœï¼Œè€Œæ— éœ€äº‹å…ˆç¼–å†™å’Œç¼–è¯‘å®Œæ•´çš„ç¨‹åºã€‚
JShell çš„ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªè½»é‡çº§ã€çµæ´»ä¸”æ˜“äºä½¿ç”¨çš„å·¥å…·ï¼Œä½¿å¾— Java å¼€å‘è€…èƒ½å¤Ÿæ›´ç›´è§‚åœ°ç¼–å†™å’Œæµ‹è¯•ä»£ç ã€‚</p>
<h2>JShellå¿«é€Ÿå…¥é—¨</h2>
<h3>å¯åŠ¨JShell</h3>
<p>æ‰“å¼€ç»ˆç«¯ï¼Œç„¶åæ‰§è¡Œå‘½ä»¤ï¼š<code>jshell</code>ï¼Œæ‰§è¡Œæ•ˆæœå¦‚ä¸‹ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>âœ  <span class="token operator">~</span> jshell
<span class="token operator">|</span>  æ¬¢è¿ä½¿ç”¨ <span class="token class-name">JShell</span> <span class="token operator">--</span> ç‰ˆæœ¬ <span class="token number">9</span>
<span class="token operator">|</span>  è¦å¤§è‡´äº†è§£è¯¥ç‰ˆæœ¬<span class="token punctuation">,</span> è¯·é”®å…¥<span class="token operator">:</span> <span class="token operator">/</span>help intro

jshell<span class="token operator">&gt;</span>
</code></pre></div><h3>å¸®åŠ©ä»‹ç» /help intro</h3>
<p>æ‰§è¡Œ <code>/help intro</code> å‘½ä»¤ä»¥è·å–æœ‰å…³ JShell å·¥å…·çš„ç®€è¦ä»‹ç»ï¼Œ<strong>intro</strong> æ˜¯ä¸»é¢˜ï¼Œæä¾›äº†å…³äº jshell å·¥å…·çš„æ ¸å¿ƒæ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•çš„ä¿¡æ¯ã€‚</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>jshell&gt; /help intro
|
|                                   intro
|                                   =====
|
|  ä½¿ç”¨ jshell å·¥å…·å¯ä»¥æ‰§è¡Œ Java ä»£ç ï¼Œä»è€Œç«‹å³è·å–ç»“æœã€‚
|  æ‚¨å¯ä»¥è¾“å…¥ Java å®šä¹‰ï¼ˆå˜é‡ã€æ–¹æ³•ã€ç±»ç­‰ç­‰ï¼‰ï¼Œä¾‹å¦‚ï¼šint x = 8
|  æˆ– Java è¡¨è¾¾å¼ï¼Œä¾‹å¦‚ï¼šx + x
|  æˆ– Java è¯­å¥æˆ–å¯¼å…¥ã€‚
|  è¿™äº›å°å—çš„ Java ä»£ç ç§°ä¸ºâ€œç‰‡æ®µâ€ã€‚
|
|  è¿™äº› jshell å·¥å…·å‘½ä»¤è¿˜å¯ä»¥è®©æ‚¨äº†è§£å’Œ
|  æ§åˆ¶æ‚¨æ­£åœ¨æ‰§è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚ï¼š/list
|
|  æœ‰å…³å‘½ä»¤çš„åˆ—è¡¨ï¼Œè¯·æ‰§è¡Œï¼š/help

jshell&gt;
</code></pre></div><h3>å®šä¹‰å˜é‡ã€æ–¹æ³•ã€ç±»</h3>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// å®šä¹‰å˜é‡</span>
jshell<span class="token operator">&gt;</span> <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">8</span>
x <span class="token operator">==</span><span class="token operator">&gt;</span> <span class="token number">8</span>

<span class="token comment">// å®šä¹‰æ–¹æ³•</span>
jshell<span class="token operator">&gt;</span> <span class="token keyword">int</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>&gt;     <span class="token keyword">return</span> num <span class="token operator">*</span> num<span class="token punctuation">;</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>&gt; <span class="token punctuation">}</span>
<span class="token operator">|</span>  å·²åˆ›å»º æ–¹æ³• <span class="token function">square</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>

<span class="token comment">// å®šä¹‰ç±»</span>
jshell<span class="token operator">&gt;</span> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Message</span><span class="token punctuation">{</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>&gt;     <span class="token keyword">private</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>&gt;     <span class="token keyword">public</span> <span class="token class-name">Message</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>&gt;         <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> msg<span class="token punctuation">;</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>&gt;     <span class="token punctuation">}</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>&gt;     <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>&gt;         <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>&gt;     <span class="token punctuation">}</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>&gt; <span class="token punctuation">}</span>
<span class="token operator">|</span>  å·²åˆ›å»º ç±» <span class="token class-name">Message</span>

jshell<span class="token operator">&gt;</span>
</code></pre></div><h3>æ‰§è¡Œè¡¨è¾¾å¼ã€è°ƒç”¨æ–¹æ³•</h3>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// æ‰§è¡Œ Java è¡¨è¾¾å¼</span>
jshell<span class="token operator">&gt;</span> x <span class="token operator">+</span> x
$<span class="token number">4</span> <span class="token operator">==</span><span class="token operator">&gt;</span> <span class="token number">16</span>

<span class="token comment">// è°ƒç”¨æ–¹æ³•</span>
jshell<span class="token operator">&gt;</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
$<span class="token number">5</span> <span class="token operator">==</span><span class="token operator">&gt;</span> <span class="token number">25</span>

    
<span class="token comment">// åˆ›å»ºç±»å®ä¾‹å¹¶è°ƒç”¨æ–¹æ³•</span>
jshell<span class="token operator">&gt;</span> <span class="token class-name">Message</span> messageObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token punctuation">(</span><span class="token string">"Hello, JShell!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
messageObj <span class="token operator">==</span><span class="token operator">&gt;</span> <span class="token class-name">Message</span><span class="token annotation punctuation">@6d4b1c02</span>

jshell<span class="token operator">&gt;</span> messageObj<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

$<span class="token number">7</span> <span class="token operator">==</span><span class="token operator">&gt;</span> <span class="token string">"Hello, JShell!"</span>
</code></pre></div><h2>æŸ¥çœ‹å®šä¹‰çš„å˜é‡ï¼š/vars</h2>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>jshell<span class="token operator">&gt;</span> <span class="token operator">/</span>vars
<span class="token operator">|</span>    <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">8</span>
<span class="token operator">|</span>    <span class="token keyword">int</span> $<span class="token number">4</span> <span class="token operator">=</span> <span class="token number">16</span>
<span class="token operator">|</span>    <span class="token keyword">int</span> $<span class="token number">5</span> <span class="token operator">=</span> <span class="token number">25</span>
<span class="token operator">|</span>    <span class="token class-name">Message</span> messageObj <span class="token operator">=</span> <span class="token class-name">Message</span><span class="token annotation punctuation">@6d4b1c02</span>
<span class="token operator">|</span>    <span class="token class-name">String</span> $<span class="token number">7</span> <span class="token operator">=</span> <span class="token string">"Hello, JShell!"</span>
</code></pre></div><h2>æŸ¥çœ‹å®šä¹‰çš„æ–¹æ³•ï¼š/methods</h2>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>jshell<span class="token operator">&gt;</span> <span class="token operator">/</span>methods
<span class="token operator">|</span>    <span class="token keyword">int</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
</code></pre></div><h2>æŸ¥çœ‹å®šä¹‰çš„ç±»ï¼š/types</h2>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>jshell<span class="token operator">&gt;</span> <span class="token operator">/</span>types
<span class="token operator">|</span>    <span class="token keyword">class</span> <span class="token class-name">Message</span>

</code></pre></div><h2>åˆ—å‡ºè¾“å…¥æºæ¡ç›®ï¼š/list</h2>
<p>æ‰§è¡Œåï¼Œå¯ä»¥çœ‹åˆ°ä¹‹å‰åœ¨<code>jshell</code>ä¸­è¾“å…¥çš„å†…å®¹æ¸…å•ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>jshell<span class="token operator">&gt;</span> <span class="token operator">/</span>list

   <span class="token number">1</span> <span class="token operator">:</span> <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>
   <span class="token number">2</span> <span class="token operator">:</span> <span class="token keyword">int</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> num <span class="token operator">*</span> num<span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
   <span class="token number">3</span> <span class="token operator">:</span> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Message</span><span class="token punctuation">{</span>
           <span class="token keyword">private</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span>
           <span class="token keyword">public</span> <span class="token class-name">Message</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">{</span>
               <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> msg<span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
           <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
               <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
       <span class="token punctuation">}</span>
   <span class="token number">4</span> <span class="token operator">:</span> x <span class="token operator">+</span> x
   <span class="token number">5</span> <span class="token operator">:</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
   <span class="token number">6</span> <span class="token operator">:</span> <span class="token class-name">Message</span> messageObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token punctuation">(</span><span class="token string">"Hello, JShell!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token number">7</span> <span class="token operator">:</span> messageObj<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

jshell<span class="token operator">&gt;</span>
</code></pre></div><h2>ç¼–è¾‘æºæ¡ç›®ï¼š/edit</h2>
<p>ä¸Šé¢é€šè¿‡<code>/list</code>åˆ—å‡ºäº†è¾“å…¥çš„æ¡ç›®ä¿¡æ¯ï¼Œä¸‹é¢è¯•è¯•é€šè¿‡<code>/edit</code>ç¼–è¾‘ä¸‹ï¼Œæ¯”å¦‚ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>jshell<span class="token operator">&gt;</span> <span class="token operator">/</span>edit <span class="token number">2</span>
</code></pre></div><p>è¿™å°†æ‰“å¼€ç¼–è¾‘å™¨ï¼Œä¿®æ”¹å…ˆå‰å®šä¹‰çš„ <code>square</code> æ–¹æ³•ã€‚</p>
<p>ä¿®æ”¹å®Œæˆåï¼Œç‚¹å‡» <strong>accept</strong> å³å¯</p>
<h2>åˆ é™¤æºæ¡ç›®ï¼š/drop</h2>
<p>ä½¿ç”¨ <code>/drop</code> å‘½ä»¤å¯ä»¥åˆ é™¤ä¹‹å‰è¾“å…¥çš„æºä»£ç å—ã€‚å¯ä»¥é€šè¿‡æŒ‡å®š<strong>åç§°</strong>æˆ– <strong>ID</strong> åˆ é™¤ç‰¹å®šçš„æºä»£ç å—ã€‚ä¾‹å¦‚ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>jshell<span class="token operator">&gt;</span> <span class="token operator">/</span>drop <span class="token class-name">Message</span>
<span class="token operator">|</span>  å·²åˆ é™¤ ç±» <span class="token class-name">Message</span>
</code></pre></div><p>è¿™å°†åˆ é™¤ä¹‹å‰å®šä¹‰çš„ <code>Message</code> ç±»ã€‚</p>
<h2>ä¿å­˜æ–‡ä»¶ï¼š/save</h2>
<p>é€šè¿‡ <code>/save</code> å‘½ä»¤ï¼Œæ‚¨å¯ä»¥å°† JShell ä¸­çš„æºä»£ç ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿å°†å…¶ä¿ç•™æˆ–ä¸ä»–äººå…±äº«ã€‚ä¾‹å¦‚ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>jshell<span class="token operator">&gt;</span> <span class="token operator">/</span>save myCode<span class="token punctuation">.</span>java
</code></pre></div><p>è¿™å°†æŠŠå½“å‰æ‰€æœ‰çš„æºä»£ç ä¿å­˜åˆ°ä¸€ä¸ªåä¸º <code>myCode.java</code> çš„æ–‡ä»¶ä¸­ã€‚</p>
<h2>æ‰“å¼€æ–‡ä»¶ï¼š/open</h2>
<p>ä½¿ç”¨ <code>/open</code> å‘½ä»¤å¯ä»¥å°†æ–‡ä»¶çš„å†…å®¹å¯¼å…¥åˆ° JShell ä¸­ï¼Œä»¥ä¾¿é‡æ–°ä½¿ç”¨æˆ–ä¿®æ”¹ã€‚ä¾‹å¦‚ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>jshell<span class="token operator">&gt;</span> <span class="token operator">/</span><span class="token keyword">open</span> <span class="token namespace">myCode<span class="token punctuation">.</span>java</span>
</code></pre></div><p>è¿™å°†å¯¼å…¥ä¹‹å‰ä¿å­˜çš„ <code>myCode.java</code> æ–‡ä»¶ä¸­çš„æºä»£ç ã€‚</p>
<h2>é‡ç½®jshellï¼š/reset</h2>
<p>ä½¿ç”¨ <code>/reset</code> å‘½ä»¤å¯ä»¥æ¸…ç©º JShell çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬æ‰€æœ‰å®šä¹‰çš„å˜é‡ã€æ–¹æ³•å’Œç±»ã€‚ä¾‹å¦‚ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>jshell<span class="token operator">&gt;</span> <span class="token operator">/</span>reset
<span class="token operator">|</span>  æ­£åœ¨é‡ç½®çŠ¶æ€
</code></pre></div><p>è¿™å°†é‡ç½® JShell å¹¶æ¸…é™¤æ‰€æœ‰ä¹‹å‰å®šä¹‰çš„å†…å®¹ã€‚</p>
<h2>æŸ¥çœ‹å¼•å…¥çš„åŒ…ï¼š/imports</h2>
<p>ä½¿ç”¨ <code>/imports</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰å·²ç»å¯¼å…¥çš„åŒ…ã€‚è¿™å¯¹äºç¡®ä¿æ‚¨åœ¨ JShell ä¸­èƒ½å¤Ÿè®¿é—®æ‰€éœ€çš„ç±»å’Œæ–¹æ³•éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>jshell<span class="token operator">&gt;</span> <span class="token operator">/</span>imports
<span class="token operator">|</span>    <span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span>
</code></pre></div><p>è¿™è¡¨æ˜å·²ç»å¯¼å…¥äº† <code>java.util</code> åŒ…ã€‚</p>
<h2>é€€å‡ºjshellï¼š/exit</h2>
<p>ä½¿ç”¨ <code>/exit</code> å‘½ä»¤å¯ä»¥é€€å‡º JShellã€‚å¦‚æœéœ€è¦ï¼Œåœ¨å‘½ä»¤åå¯ä»¥æ·»åŠ ä¸€ä¸ªæ•´æ•°è¡¨è¾¾å¼ç‰‡æ®µä½œä¸ºé€€å‡ºä»£ç ã€‚ä¾‹å¦‚ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>jshell<span class="token operator">&gt;</span> <span class="token operator">/</span>exit <span class="token number">0</span>
</code></pre></div><p>è¿™å°†ä»¥é€€å‡ºä»£ç  0 é€€å‡º JShellã€‚</p>
<h2>æŸ¥çœ‹å‘½ä»¤ï¼š/help</h2>
<p>æœ€åï¼Œä½¿ç”¨ <code>/help</code> å‘½ä»¤å¯ä»¥éšæ—¶æŸ¥çœ‹ JShell çš„å¸®åŠ©ä¿¡æ¯ï¼Œäº†è§£å„ç§å‘½ä»¤å’Œä¸»é¢˜çš„ä½¿ç”¨æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>jshell<span class="token operator">&gt;</span> <span class="token operator">/</span>help
<span class="token operator">|</span>  é”®å…¥ <span class="token class-name">Java</span> è¯­è¨€è¡¨è¾¾å¼<span class="token punctuation">,</span> è¯­å¥æˆ–å£°æ˜ã€‚
<span class="token operator">|</span>  æˆ–è€…é”®å…¥ä»¥ä¸‹å‘½ä»¤ä¹‹ä¸€<span class="token operator">:</span>
<span class="token operator">|</span>  <span class="token operator">/</span>list <span class="token punctuation">[</span><span class="token operator">&lt;</span>åç§°æˆ– id<span class="token operator">&gt;</span><span class="token operator">|</span><span class="token operator">-</span>all<span class="token operator">|</span><span class="token operator">-</span>start<span class="token punctuation">]</span>
<span class="token operator">|</span>  	åˆ—å‡ºæ‚¨é”®å…¥çš„æº
<span class="token operator">|</span>  <span class="token operator">/</span>edit <span class="token operator">&lt;</span>åç§°æˆ– id<span class="token operator">&gt;</span>
<span class="token operator">|</span>  	ç¼–è¾‘æºæ¡ç›®
<span class="token operator">|</span>  <span class="token operator">/</span>drop <span class="token operator">&lt;</span>åç§°æˆ– id<span class="token operator">&gt;</span>
<span class="token operator">|</span>  	åˆ é™¤æºæ¡ç›®
<span class="token operator">|</span>  <span class="token operator">/</span>save <span class="token punctuation">[</span><span class="token operator">-</span>all<span class="token operator">|</span><span class="token operator">-</span>history<span class="token operator">|</span><span class="token operator">-</span>start<span class="token punctuation">]</span> <span class="token operator">&lt;</span>æ–‡ä»¶<span class="token operator">&gt;</span>
<span class="token operator">|</span>  	å°†ç‰‡æ®µæºä¿å­˜åˆ°æ–‡ä»¶
<span class="token operator">|</span>  <span class="token operator">/</span><span class="token keyword">open</span> <span class="token generics"><span class="token punctuation">&lt;</span>file<span class="token punctuation">&gt;</span></span>
<span class="token operator">|</span>  	æ‰“å¼€æ–‡ä»¶ä½œä¸ºæºè¾“å…¥
<span class="token operator">|</span>  <span class="token operator">/</span>vars <span class="token punctuation">[</span><span class="token operator">&lt;</span>åç§°æˆ– id<span class="token operator">&gt;</span><span class="token operator">|</span><span class="token operator">-</span>all<span class="token operator">|</span><span class="token operator">-</span>start<span class="token punctuation">]</span>
<span class="token operator">|</span>  	åˆ—å‡ºå·²å£°æ˜å˜é‡åŠå…¶å€¼
<span class="token operator">|</span>  <span class="token operator">/</span>methods <span class="token punctuation">[</span><span class="token operator">&lt;</span>åç§°æˆ– id<span class="token operator">&gt;</span><span class="token operator">|</span><span class="token operator">-</span>all<span class="token operator">|</span><span class="token operator">-</span>start<span class="token punctuation">]</span>
<span class="token operator">|</span>  	åˆ—å‡ºå·²å£°æ˜æ–¹æ³•åŠå…¶ç­¾å
<span class="token operator">|</span>  <span class="token operator">/</span>types <span class="token punctuation">[</span><span class="token operator">&lt;</span>åç§°æˆ– id<span class="token operator">&gt;</span><span class="token operator">|</span><span class="token operator">-</span>all<span class="token operator">|</span><span class="token operator">-</span>start<span class="token punctuation">]</span>
<span class="token operator">|</span>  	åˆ—å‡ºç±»å‹å£°æ˜
<span class="token operator">|</span>  <span class="token operator">/</span>imports 
<span class="token operator">|</span>  	åˆ—å‡ºå¯¼å…¥çš„é¡¹
<span class="token operator">|</span>  <span class="token operator">/</span>exit <span class="token punctuation">[</span><span class="token operator">&lt;</span>integer<span class="token operator">-</span>expression<span class="token operator">-</span>snippet<span class="token operator">&gt;</span><span class="token punctuation">]</span>
<span class="token operator">|</span>  	é€€å‡º jshell å·¥å…·
<span class="token operator">|</span>  <span class="token operator">/</span>env <span class="token punctuation">[</span><span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>path <span class="token operator">&lt;</span>è·¯å¾„<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token keyword">module</span><span class="token operator">-</span>path <span class="token operator">&lt;</span>è·¯å¾„<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>add<span class="token operator">-</span>modules <span class="token operator">&lt;</span>æ¨¡å—<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">|</span>  	æŸ¥çœ‹æˆ–æ›´æ”¹è¯„ä¼°ä¸Šä¸‹æ–‡
<span class="token operator">|</span>  <span class="token operator">/</span>reset <span class="token punctuation">[</span><span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>path <span class="token operator">&lt;</span>è·¯å¾„<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token keyword">module</span><span class="token operator">-</span>path <span class="token operator">&lt;</span>è·¯å¾„<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>add<span class="token operator">-</span>modules <span class="token operator">&lt;</span>æ¨¡å—<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">|</span>  	é‡ç½® jshell å·¥å…·
<span class="token operator">|</span>  <span class="token operator">/</span>reload <span class="token punctuation">[</span><span class="token operator">-</span>restore<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>quiet<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>path <span class="token operator">&lt;</span>è·¯å¾„<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token keyword">module</span><span class="token operator">-</span>path <span class="token operator">&lt;</span>è·¯å¾„<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">|</span>  	é‡ç½®å’Œé‡æ”¾ç›¸å…³å†å²è®°å½• <span class="token operator">--</span> å½“å‰å†å²è®°å½•æˆ–ä¸Šä¸€ä¸ªå†å²è®°å½• <span class="token punctuation">(</span><span class="token operator">-</span>restore<span class="token punctuation">)</span>
<span class="token operator">|</span>  <span class="token operator">/</span>history <span class="token punctuation">[</span><span class="token operator">-</span>all<span class="token punctuation">]</span>
<span class="token operator">|</span>  	æ‚¨é”®å…¥çš„å†…å®¹çš„å†å²è®°å½•
<span class="token operator">|</span>  <span class="token operator">/</span>help <span class="token punctuation">[</span><span class="token generics"><span class="token punctuation">&lt;</span>command<span class="token punctuation">&gt;</span></span><span class="token operator">|</span><span class="token generics"><span class="token punctuation">&lt;</span>subject<span class="token punctuation">&gt;</span></span><span class="token punctuation">]</span>
<span class="token operator">|</span>  	è·å–æœ‰å…³ä½¿ç”¨ jshell å·¥å…·çš„ä¿¡æ¯
<span class="token operator">|</span>  <span class="token operator">/</span>set editor<span class="token operator">|</span>start<span class="token operator">|</span>feedback<span class="token operator">|</span>mode<span class="token operator">|</span>prompt<span class="token operator">|</span>truncation<span class="token operator">|</span>format <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">|</span>  	è®¾ç½®é…ç½®ä¿¡æ¯
<span class="token operator">|</span>  <span class="token operator">/</span><span class="token operator">?</span> <span class="token punctuation">[</span><span class="token generics"><span class="token punctuation">&lt;</span>command<span class="token punctuation">&gt;</span></span><span class="token operator">|</span><span class="token generics"><span class="token punctuation">&lt;</span>subject<span class="token punctuation">&gt;</span></span><span class="token punctuation">]</span>
<span class="token operator">|</span>  	è·å–æœ‰å…³ä½¿ç”¨ jshell å·¥å…·çš„ä¿¡æ¯
<span class="token operator">|</span>  <span class="token operator">/</span><span class="token operator">!</span> 
<span class="token operator">|</span>  	é‡æ–°è¿è¡Œä¸Šä¸€ä¸ªç‰‡æ®µ <span class="token operator">--</span> è¯·å‚é˜… <span class="token operator">/</span>help rerun
<span class="token operator">|</span>  <span class="token operator">/</span><span class="token generics"><span class="token punctuation">&lt;</span>id<span class="token punctuation">&gt;</span></span> 
<span class="token operator">|</span>  	æŒ‰ <span class="token constant">ID</span> æˆ– <span class="token constant">ID</span> èŒƒå›´é‡æ–°è¿è¡Œç‰‡æ®µ <span class="token operator">--</span> å‚è§ <span class="token operator">/</span>help rerun
<span class="token operator">|</span>  <span class="token operator">/</span><span class="token operator">-</span><span class="token generics"><span class="token punctuation">&lt;</span>n<span class="token punctuation">&gt;</span></span> 
<span class="token operator">|</span>  	é‡æ–°è¿è¡Œä»¥å‰çš„ç¬¬ n ä¸ªç‰‡æ®µ <span class="token operator">--</span> è¯·å‚é˜… <span class="token operator">/</span>help rerun
<span class="token operator">|</span>  
<span class="token operator">|</span>  æœ‰å…³è¯¦ç»†ä¿¡æ¯<span class="token punctuation">,</span> è¯·é”®å…¥ <span class="token char">'/help'</span><span class="token punctuation">,</span> åè·Ÿ
<span class="token operator">|</span>  å‘½ä»¤æˆ–ä¸»é¢˜çš„åç§°ã€‚
<span class="token operator">|</span>  ä¾‹å¦‚ '<span class="token operator">/</span>help <span class="token operator">/</span>list<span class="token char">' æˆ– '</span><span class="token operator">/</span>help intro'ã€‚ä¸»é¢˜<span class="token operator">:</span>
<span class="token operator">|</span>  
<span class="token operator">|</span>  intro
<span class="token operator">|</span>  	jshell å·¥å…·çš„ç®€ä»‹
<span class="token operator">|</span>  keys
<span class="token operator">|</span>  	ç±»ä¼¼ readline çš„è¾“å…¥ç¼–è¾‘çš„è¯´æ˜
<span class="token operator">|</span>  id
<span class="token operator">|</span>  	ç‰‡æ®µ <span class="token constant">ID</span> ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬çš„è¯´æ˜
<span class="token operator">|</span>  shortcuts
<span class="token operator">|</span>  	ç‰‡æ®µå’Œå‘½ä»¤è¾“å…¥æç¤º<span class="token punctuation">,</span> ä¿¡æ¯è®¿é—®ä»¥åŠ
<span class="token operator">|</span>  	è‡ªåŠ¨ä»£ç ç”Ÿæˆçš„æŒ‰é”®è¯´æ˜
<span class="token operator">|</span>  context
<span class="token operator">|</span>  	<span class="token operator">/</span>env <span class="token operator">/</span>reload å’Œ <span class="token operator">/</span>reset çš„è¯„ä¼°ä¸Šä¸‹æ–‡é€‰é¡¹çš„è¯´æ˜
<span class="token operator">|</span>  rerun
<span class="token operator">|</span>  	é‡æ–°è¯„ä¼°ä»¥å‰è¾“å…¥ç‰‡æ®µçš„æ–¹æ³•çš„è¯´æ˜

jshell<span class="token operator">&gt;</span> 
</code></pre></div><p>è¿™å°†æ˜¾ç¤º JShell çš„ä¸»è¦å¸®åŠ©ä¿¡æ¯ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>Java 9 æ–°ç‰¹æ€§ï¼šä¸å¯å˜é›†åˆçš„å¿«æ·åˆ›å»ºæ–¹æ³•</title>
      <link>https://www.geekyspace.cn/md/java-features/Java9/jep269-convenience-factory-methods-for-collections.html</link>
      <guid>https://www.geekyspace.cn/md/java-features/Java9/jep269-convenience-factory-methods-for-collections.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Java 9 æ–°ç‰¹æ€§ï¼šä¸å¯å˜é›†åˆçš„å¿«æ·åˆ›å»ºæ–¹æ³•</source>
      <description>Java 9 æ–°ç‰¹æ€§ï¼šä¸å¯å˜é›†åˆçš„å¿«æ·åˆ›å»ºæ–¹æ³• Java 9 å¼•å…¥äº†ä¸€é¡¹ä»¤äººæœŸå¾…çš„æ–°ç‰¹æ€§ï¼Œå³é›†åˆçš„ä¾¿åˆ©å·¥å‚æ–¹æ³•ï¼ˆConvenience Factory Methods for Collectionsï¼‰ï¼Œæ—¨åœ¨ä½¿ä¸å¯å˜é›†åˆçš„åˆ›å»ºæ›´åŠ ç®€å•å’Œä¾¿æ·ã€‚ åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨æ„é€ æ–¹æ³•æ¥åˆå§‹åŒ–é›†åˆï¼Œè€ŒJava 9ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€äº›å…¨æ–°çš„é™æ€å·¥å‚æ–¹æ³•ï¼Œä½¿å¾—åˆ›å»ºä¸å¯å˜é›†åˆ...</description>
      <category>Java</category>
      <pubDate>Fri, 22 Dec 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Java 9 å¼•å…¥äº†ä¸€é¡¹ä»¤äººæœŸå¾…çš„æ–°ç‰¹æ€§ï¼Œå³<strong>é›†åˆçš„ä¾¿åˆ©å·¥å‚æ–¹æ³•</strong>ï¼ˆConvenience Factory Methods for Collectionsï¼‰ï¼Œæ—¨åœ¨ä½¿ä¸å¯å˜é›†åˆçš„åˆ›å»ºæ›´åŠ ç®€å•å’Œä¾¿æ·ã€‚
åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨æ„é€ æ–¹æ³•æ¥åˆå§‹åŒ–é›†åˆï¼Œè€ŒJava 9ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€äº›å…¨æ–°çš„é™æ€å·¥å‚æ–¹æ³•ï¼Œä½¿å¾—åˆ›å»ºä¸å¯å˜é›†åˆçš„è¿‡ç¨‹æ›´ä¸ºä¼˜é›…ã€‚</p>
<h2>Java 9çš„é›†åˆåˆ›å»ºæ–¹å¼</h2>
<p>Java 9å¼•å…¥äº†ä¸€äº›ä¾¿åˆ©çš„å·¥å‚æ–¹æ³•ï¼Œä½¿å¾—åˆ›å»ºå’Œåˆå§‹åŒ–é›†åˆå¯¹è±¡å˜å¾—æ›´åŠ ç®€æ´å’Œæ–¹ä¾¿ã€‚
è¿™äº›æ”¹è¿›åŒ…æ‹¬List.of()ã€Set.of()å’ŒMap.of()ç­‰æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºä¸å¯å˜çš„é›†åˆå¯¹è±¡ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// åˆ›å»ºä¸å¯å˜åˆ—è¡¨</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> immutableList <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"item1"</span><span class="token punctuation">,</span> <span class="token string">"item2"</span><span class="token punctuation">,</span> <span class="token string">"item3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»ºä¸å¯å˜é›†åˆ</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> immutableSet <span class="token operator">=</span> <span class="token class-name">Set</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"item1"</span><span class="token punctuation">,</span> <span class="token string">"item2"</span><span class="token punctuation">,</span> <span class="token string">"item3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»ºä¸å¯å˜æ˜ å°„</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> immutableMap <span class="token operator">=</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™æ ·ä¸€è¡Œä»£ç å°±å®Œæˆäº†æ•´ä¸ªé›†åˆçš„åˆ›å»ºå’Œåˆå§‹åŒ–è¿‡ç¨‹ï¼Œä½¿å¾—ä»£ç æ›´åŠ ç®€æ´ã€æ¸…æ™°ï¼Œå¹¶ä¸”å…·æœ‰æ›´é«˜çš„å¯è¯»æ€§ã€‚</p>
<h2>Java 8çš„é›†åˆåˆ›å»ºæ–¹å¼</h2>
<p>Java 8å¼•å…¥äº†Lambdaè¡¨è¾¾å¼å’Œæµå¼æ“ä½œï¼Œè¿™ä½¿å¾—é›†åˆçš„åˆå§‹åŒ–è¿‡ç¨‹å˜å¾—æ›´åŠ æµç•…å’Œå…·æœ‰å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹æ€§ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// åˆ›å»ºä¸å¯å˜åˆ—è¡¨</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> immutableList <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableList</span><span class="token punctuation">(</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"item1"</span><span class="token punctuation">,</span> <span class="token string">"item2"</span><span class="token punctuation">,</span> <span class="token string">"item3"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»ºä¸å¯å˜é›†åˆ</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> immutableSet <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableSet</span><span class="token punctuation">(</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"item1"</span><span class="token punctuation">,</span> <span class="token string">"item2"</span><span class="token punctuation">,</span> <span class="token string">"item3"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»ºä¸å¯å˜æ˜ å°„</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> immutableMap <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableMap</span><span class="token punctuation">(</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"2"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token string">"3"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span>data <span class="token operator">-&gt;</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data <span class="token operator">-&gt;</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è™½ç„¶ç›¸è¾ƒäºä¼ ç»Ÿæ–¹å¼ï¼ŒJava 8çš„å†™æ³•æ›´ä¸ºç´§å‡‘ï¼Œä½†ä»æ˜¾å¾—ç•¥æ˜¾ç¹çã€‚</p>
<h2>ä¼ ç»Ÿçš„é›†åˆåˆ›å»ºæ–¹å¼</h2>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// åˆ›å»ºä¸å¯å˜åˆ—è¡¨</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> traditionalList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
traditionalList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"item1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
traditionalList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"item2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
traditionalList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"item3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
traditionalList <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableList</span><span class="token punctuation">(</span>traditionalList<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»ºä¸å¯å˜é›†åˆ</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> traditionalSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
traditionalSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"item1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
traditionalSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"item2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
traditionalSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"item3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
traditionalSet <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableSet</span><span class="token punctuation">(</span>traditionalSet<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»ºä¸å¯å˜æ˜ å°„</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> traditionalMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
traditionalMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
traditionalMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
traditionalMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
traditionalMap <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableMap</span><span class="token punctuation">(</span>traditionalMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™ç§æ–¹å¼ç¹çä¸”ä¸å¤Ÿç›´è§‚ï¼Œç»™ä»£ç çš„å¯è¯»æ€§å’Œç¼–å†™æ•ˆç‡å¸¦æ¥äº†ä¸€å®šçš„æŒ‘æˆ˜ã€‚</p>
<h2>List.of() vs. Arrays.asList()</h2>
<ul>
<li>
<p><strong>å¯å˜æ€§ï¼š</strong><code>List.of</code> åˆ›å»ºçš„æ˜¯ä¸å¯å˜é›†åˆï¼Œ<code>Arrays.asList</code> æ˜¯å¯å˜é›†åˆ</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// List.of åˆ›å»ºå»ºçš„åˆ—è¡¨æ˜¯ä¸å¯å˜çš„</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> immutableList <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æ— æ³•æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹å…ƒç´ ï¼Œä»¥ä¸‹æ“ä½œä¼šå¯¼è‡´ UnsupportedOperationException</span>
immutableList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
immutableList<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Arrays.asList()  åˆ›å»ºçš„åˆ—è¡¨æ˜¯å¯å˜çš„</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> mutableList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å¯ä»¥ä½¿ç”¨ add()ã€set() æ–¹æ³•ä¿®æ”¹å…ƒç´ ï¼Œä½†ä¸å…è®¸æ”¹å˜åˆ—è¡¨çš„å¤§å°</span>
mutableList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mutableList<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li>
<li>
<p><strong>nullå…ƒç´ ï¼š</strong><code>List.of</code> ä¸å…è®¸åŒ…å« null å…ƒç´ ï¼Œ<code>Arrays.asList</code> å…è®¸åŒ…å« null å…ƒç´ ï¼Œä½†ä¸æ¨è</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> listWithNull <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li>
<li>
<p><strong>åº•å±‚æ•°æ®ç»“æ„ï¼š</strong><code>List.of </code>ä½¿ç”¨ä¸å¯å˜æ•°æ®ç»“æ„ï¼Œ<code>Arrays.asList</code>åº•å±‚ä½¿ç”¨æ•°ç»„ï¼Œå¯¹åˆ—è¡¨ä¿®æ”¹å°†åæ˜ åœ¨åŸå§‹æ•°ç»„ä¸Š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> immutableList <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> mutableList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Spring Data JPA å¿«é€Ÿå…¥é—¨</title>
      <link>https://www.geekyspace.cn/md/spring-data-jpa/jetbrains/getting-started.html</link>
      <guid>https://www.geekyspace.cn/md/spring-data-jpa/jetbrains/getting-started.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Spring Data JPA å¿«é€Ÿå…¥é—¨</source>
      <description>Spring Data JPA å¿«é€Ÿå…¥é—¨ ç›®æ ‡ï¼š äº†è§£å¦‚ä½•ä½¿ç”¨Spring Data JPAä»æ•°æ®åº“ä¸­å­˜å‚¨å’Œæ£€ç´¢æ•°æ®ã€‚ å‚è€ƒï¼š Spring Data JPA å®˜æ–¹æ–‡æ¡£ Jetbrains å®˜æ–¹æ–‡æ¡£ ä»‹ç» Spring Data JPAæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ¡†æ¶ï¼Œå…è®¸ç”¨æˆ·è½»æ¾åœ°ä¸æ•°æ®åº“äº¤äº’ï¼ŒåŒæ—¶æœ€å¤§é™åº¦åœ°å‡å°‘æ ·æ¿ä»£ç ã€‚ åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶å¦‚ä½•ä½¿ç”¨Spri...</description>
      <category>Spring Data</category>
      <pubDate>Thu, 04 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>ç›®æ ‡ï¼š äº†è§£å¦‚ä½•ä½¿ç”¨Spring Data JPAä»æ•°æ®åº“ä¸­å­˜å‚¨å’Œæ£€ç´¢æ•°æ®ã€‚</p>
</blockquote>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://docs.spring.io/spring-data/jpa/reference/jpa/getting-started.html" target="_blank" rel="noopener noreferrer">Spring Data JPA å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://www.jetbrains.com/guide/java/tutorials/getting-started-spring-data-jpa/" target="_blank" rel="noopener noreferrer">Jetbrains å®˜æ–¹æ–‡æ¡£</a></li>
</ul>
<h2>ä»‹ç»</h2>
<p><a href="https://spring.io/projects/spring-data-jpa" target="_blank" rel="noopener noreferrer">Spring Data JPA</a>æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ¡†æ¶ï¼Œå…è®¸ç”¨æˆ·è½»æ¾åœ°ä¸æ•°æ®åº“äº¤äº’ï¼ŒåŒæ—¶æœ€å¤§é™åº¦åœ°å‡å°‘æ ·æ¿ä»£ç ã€‚
åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶å¦‚ä½•ä½¿ç”¨Spring Data JPAæ’å…¥æ•°æ®åº“å¹¶ä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®ã€‚
æˆ‘ä»¬å°†ä½¿ç”¨<a href="https://www.jetbrains.com/lp/intellij-frameworks/" target="_blank" rel="noopener noreferrer">IntelliJ IDEA Ultimate</a>åˆ›å»ºä¸€ä¸ªç®€å•çš„Springé´å­åº”ç”¨ç¨‹åºï¼Œä»¥åˆ©ç”¨å…¶Springç‰¹æ€§æ”¯æŒã€‚</p>
<h2>åˆ›å»ºä¸€ä¸ªæ–°çš„Spring Booté¡¹ç›®</h2>
<p>é¦–å…ˆï¼Œåœ¨ IntelliJ IDEA Ultimate ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡åœ¨æ¬¢è¿å±å¹•ä¸­ç‚¹å‡» "<strong>New Project</strong>" æ¥åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ã€‚
æˆ‘ä»¬å°†ä»å·¦ä¾§èœå•ä¸­é€‰æ‹© "<strong>Spring Initializr</strong>"ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†æŒ‡å®šé¡¹ç›®çš„åç§° - ä½ å¯ä»¥å°†å…¶å‘½åä¸º <mark>SpringDataJPA</mark>ã€‚
æˆ‘ä»¬è¿˜å¯ä»¥å°† "<strong>Group</strong>" å­—æ®µæ›´æ”¹ä¸ºæˆ‘ä»¬å…¬å¸çš„åç§°ã€‚
å¯¹äºå…¶ä½™çš„å­—æ®µï¼Œä½ å¯ä»¥æ¥å—é»˜è®¤å€¼ã€‚è¯·éšæ„ä¸ºä½ çš„é¡¹ç›®ä½¿ç”¨æœ€æ–°çš„ Java ç‰ˆæœ¬ã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403032048778.png" alt="New Project Window" tabindex="0" loading="lazy"><figcaption>New Project Window</figcaption></figure>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç‚¹å‡» "<strong>Next</strong>"ã€‚</p>
<p>åœ¨æ¥ä¸‹æ¥çš„çª—å£ä¸­ï¼Œæˆ‘ä»¬å°†é€‰æ‹©æˆ‘ä»¬å¯ç”¨çš„æœ€æ–°çš„ Spring Boot ç‰ˆæœ¬ã€‚
ç„¶ååœ¨ "Dependencies" ä¸‹ï¼Œæˆ‘ä»¬å°†åœ¨æœç´¢æ¡†ä¸­æœç´¢ "<mark>data</mark>"ã€‚
åœ¨ SQL ä¸‹ï¼Œæˆ‘ä»¬å°†ä»åˆ—è¡¨ä¸­é€‰æ‹© <strong>Spring Data JPA</strong> å’Œ <strong>H2 Database</strong> çš„å¤é€‰æ¡†ã€‚
å¯¹äºæœ¬æ•™ç¨‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ H2 ä½œä¸ºæˆ‘ä»¬çš„æ•°æ®åº“ï¼Œå› ä¸ºå®ƒå¾ˆå®¹æ˜“è®¾ç½®ã€‚
å¦‚æœä½ æƒ³ä½¿ç”¨ä¸åŒçš„æ•°æ®åº“ï¼Œæ¯”å¦‚ MySQL æˆ– HyperSQLï¼Œå¯ä»¥éšæ„é€‰æ‹©è¿™äº›ä¾èµ–é¡¹ï¼Œæˆ–è€…ç¨åå°†å®ƒä»¬æ·»åŠ åˆ°ä½ çš„ pom.xml æ–‡ä»¶ä¸­ã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403032053947.png" alt="New Project Window Dependency" tabindex="0" loading="lazy"><figcaption>New Project Window Dependency</figcaption></figure>
<p>ä¸€æ—¦æˆ‘ä»¬ç‚¹å‡» "<strong>Finish</strong>"ï¼ŒIntelliJ IDEA å°±ä¼šåˆ›å»ºä¸€ä¸ªå¸¦æœ‰ Spring Data JPA å’Œæ•°æ®åº“ä¾èµ–çš„æ–°çš„ Spring Boot é¡¹ç›®ã€‚</p>
<h2>åˆ›å»ºå‘˜å·¥å®ä½“</h2>
<p>å®ä½“æ˜¯ä¸€ä¸ªJavaç±»ï¼Œä»£è¡¨ç€ä½ æƒ³è¦æ’å…¥åˆ°æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚ å¯¹äºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåä¸º Employee çš„å®ä½“ï¼Œ
æˆ‘ä»¬å°†ä½¿ç”¨å®ƒæ¥å°†å‘˜å·¥æ•°æ®æ’å…¥åˆ°æˆ‘ä»¬æ•°æ®åº“ä¸­çš„ Employee è¡¨ä¸­ã€‚</p>
<p>åœ¨é¡¹ç›®å·¥å…·çª—å£ä¸­ï¼Œæˆ‘ä»¬å°†å¯¼èˆªåˆ°æˆ‘ä»¬çš„ <code>src/main/java</code> ç›®å½•ï¼Œé€‰æ‹© <code>com.jetbrains.springdatajpaapp</code> åŒ…ï¼Œ
å¹¶æŒ‰ä¸‹ <strong>âŒ˜N</strong> (macOS) / <strong>Alt+Insert</strong> (Windows/Linux)ã€‚é€‰æ‹© <strong>Java Class</strong>ï¼Œç„¶åè¾“å…¥æˆ‘ä»¬çš„å®ä½“åç§° - <mark>Employee</mark>ã€‚
ç„¶åï¼ŒæŒ‰ä¸‹ <strong>â</strong> (macOS) / <strong>Enter</strong> (Windows/Linux)ã€‚</p>
<p>åœ¨ Employee ç±»ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡åœ¨ç±»å®šä¹‰ä¸­æ·»åŠ  <mark>@Entity</mark> æ³¨è§£å¹¶å¯¼å…¥ <code>javax.persistence.Entity</code> åŒ…æ¥å°†å…¶è®¾ç½®ä¸ºå®ä½“ã€‚
ä¸€æ—¦ä½ è¿™æ ·åšäº†ï¼Œä½ ä¼šæ³¨æ„åˆ°ä½ çš„ç±»ä¸­å‡ºç°äº†ä¸€ä¸ªé”™è¯¯ã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403032108680.png" alt="Employee Entity Error" tabindex="0" loading="lazy"><figcaption>Employee Entity Error</figcaption></figure>
<p>æ­£å¦‚é”™è¯¯æ¶ˆæ¯æ‰€æŒ‡ç¤ºçš„ï¼Œå®ä½“å¿…é¡»æœ‰ä¸€ä¸ªç”± <code>@Id </code>æ³¨è§£æŒ‡å®šçš„ä¸»é”®å­—æ®µã€‚æˆ‘ä»¬å°†ä½¿ç”¨ <strong>âŒ¥â</strong> (macOS) / <strong>Alt+Enter</strong> (Windows/Linux)
å¿«æ·é”®ï¼Œ
è¿™æ · IntelliJ IDEA å°±å¯ä»¥ä¸ºæˆ‘ä»¬æ·»åŠ  IDï¼Œè¿™å°†å¯¼è‡´æç¤ºè¾“å…¥ ID å­—æ®µçš„ä¿¡æ¯ã€‚ æˆ‘ä»¬å°†é‡‡ç”¨é»˜è®¤çš„åç§°å’Œç±»å‹ã€‚
ä½ å¯ä»¥é€‰æ‹© "<strong>Field Access</strong>" å¤é€‰æ¡†ï¼ˆæˆ‘æ›´å–œæ¬¢åœ¨å­—æ®µä¸Šä½¿ç”¨æ³¨è§£ï¼Œè€Œä¸æ˜¯åœ¨ setter æ–¹æ³•ä¸Šï¼Œå› ä¸ºæˆ‘è§‰å¾—è¿™æ ·æ›´æ˜“è¯»ï¼‰ã€‚
ä½ ä¹Ÿå¯ä»¥é€‰æ‹© "<strong>Generated</strong>" å¤é€‰æ¡†ï¼Œè¿™æ ·ä½ å°±ä¸å¿…è‡ªå·±åˆ†é…å‘˜å·¥ IDã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403032111916.png" alt="Add Employee ID" tabindex="0" loading="lazy"><figcaption>Add Employee ID</figcaption></figure>
<p>ç„¶åï¼Œæˆ‘ä»¬å°†ç‚¹å‡» "<strong>OK</strong>"ã€‚ä½ ä¼šæ³¨æ„åˆ° IntelliJ IDEA åˆ›å»ºäº†ä¸€ä¸ªå¸¦æœ‰å…¶ setter å’Œ getter çš„ <code>id</code> å­—æ®µã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ·»åŠ å‡ ä¸ª String å­—æ®µï¼š<mark>firstName</mark> å’Œ <mark>lastName</mark>ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€šè¿‡è°ƒå‡º Generate èœå• <strong>âŒ˜N</strong> (macOS) / <strong>Alt+Insert</strong> (Windows/Linux)ï¼Œç„¶åé€‰æ‹© <strong>Constructor</strong> æ¥ç”Ÿæˆæˆ‘ä»¬çš„æ„é€ å‡½æ•°ã€‚
æˆ‘ä»¬ä¸éœ€è¦æ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ª idï¼Œå› ä¸ºæˆ‘ä»¬çš„ id å°†ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œ
æ‰€ä»¥æˆ‘ä»¬å°†ç‚¹å‡» <strong>firstName</strong>ï¼Œç„¶åæŒ‰ä½ <strong>âŒ˜</strong> (macOS) / <strong>Ctrl</strong> (Windows/Linux) é”®ï¼Œç„¶åé€‰æ‹© <strong>lastName</strong>ã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403032114060.png" alt="Generate Constructor" tabindex="0" loading="lazy"><figcaption>Generate Constructor</figcaption></figure>
<p>ç„¶åï¼Œæˆ‘ä»¬å°†ç‚¹å‡» "<strong>OK</strong>"ã€‚</p>
<p>ä½ ç°åœ¨ä¼šæ³¨æ„åˆ°ä½ çš„ <code>Employee</code> ç±»ä¸Šå‡ºç°äº†ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºä½ æ²¡æœ‰ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°ã€‚
å¦‚æœä½ åœ¨é”™è¯¯ä¸ŠæŒ‰ä¸‹ <strong>Alt+Enter</strong> (Windows/Linux)
æˆ– <strong>âŒ¥â</strong> (macOS)ï¼ŒIntelliJ IDEA å°†ä¸ºä½ æä¾›åˆ›å»ºå®ƒçš„é€‰é¡¹ - è®©æˆ‘ä»¬ç»§ç»­æ‰§è¡Œã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç”Ÿæˆå­—æ®µçš„ setter å’Œ getterã€‚
æˆ‘ä»¬å°†è°ƒå‡º Generate èœå• âŒ˜N (macOS) / Alt+Insert (Windows/Linux)ï¼Œç„¶åé€‰æ‹© Getter å’Œ Setterã€‚
æˆ‘ä»¬å°†æŒ‰ä½ âŒ˜ (macOS) / Ctrl (Windows/Linux) é”®ï¼Œå¹¶é€‰æ‹©ä¸¤ä¸ªå˜é‡ã€‚
ç„¶åï¼Œæˆ‘ä»¬å°†ç‚¹å‡» "<strong>OK</strong>"ã€‚IntelliJ IDEA ä¸ºè¿™ä¸¤ä¸ªå˜é‡ç”Ÿæˆäº† getter å’Œ setterã€‚</p>
<p>æœ€åï¼Œè®©æˆ‘ä»¬å†æ¬¡è°ƒå‡º Generate èœå• âŒ˜N (macOS) / Alt+Insert (Windows/Linux)ï¼Œç„¶åé€‰æ‹© <code>toString</code> æ¥ç”Ÿæˆä¸€ä¸ª toString æ–¹æ³•ã€‚
æˆ‘ä»¬å°†ä¿æŒæ‰€æœ‰å­—æ®µé€‰ä¸­ï¼Œç„¶åç‚¹å‡» "<strong>OK</strong>"ã€‚</p>
<p>æœ€ç»ˆï¼ŒEmployee å®ä½“åº”è¯¥ç±»ä¼¼äºä»¥ä¸‹å†…å®¹ï¼ˆæ ¼å¼å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼‰ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jetbrains<span class="token punctuation">.</span>springdatajpaapp</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span></span><span class="token class-name">Entity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span></span><span class="token class-name">GeneratedValue</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span></span><span class="token class-name">Id</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Id</span> <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">AUTO</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> firstName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token class-name">String</span> firstName<span class="token punctuation">,</span> <span class="token class-name">String</span> lastName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">=</span> firstName<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>lastName <span class="token operator">=</span> lastName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getFirstName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> firstName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFirstName</span><span class="token punctuation">(</span><span class="token class-name">String</span> firstName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">=</span> firstName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getLastName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> lastName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLastName</span><span class="token punctuation">(</span><span class="token class-name">String</span> lastName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>lastName <span class="token operator">=</span> lastName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"Employee{"</span> <span class="token operator">+</span>
                <span class="token string">"id="</span> <span class="token operator">+</span> id <span class="token operator">+</span>
                <span class="token string">", firstName='"</span> <span class="token operator">+</span> firstName <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">", lastName='"</span> <span class="token operator">+</span> lastName <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>åˆ›å»º Repository æ¥å£</h2>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»åˆ›å»ºäº† Employee å®ä½“ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹å¼æ¥æ‰§è¡Œ CRUDï¼ˆåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ï¼‰æ“ä½œã€‚
å¹¸è¿çš„æ˜¯ï¼ŒSpring Data JPA é€šè¿‡ <mark>Repositories</mark> æä¾›äº†æ‰€æœ‰åŸºæœ¬çš„æ“ä½œã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<p>åœ¨é¡¹ç›®å·¥å…·çª—å£ä¸­ï¼Œæˆ‘ä»¬å°†é€‰æ‹© <code>com.jetbrains.springdatajpaapp</code> åŒ…ï¼Œå¹¶æŒ‰ä¸‹ âŒ˜N (macOS) / Alt+Insert (Windows/Linux)ã€‚
é€‰æ‹© <strong>Java Class</strong>ã€‚
æˆ‘ä»¬å°†å…¶å‘½åä¸º <mark>EmployeeRepository</mark>ï¼Œè¿™æ¬¡æˆ‘ä»¬é€‰æ‹© <strong>Interface</strong> ç„¶åæŒ‰ä¸‹ â (macOS) / Enter (Windows/Linux)ã€‚
ä¸ºäº†ä½¿æˆ‘ä»¬çš„æ¥å£æˆä¸ºä¸€ä¸ª repositoryï¼Œæˆ‘ä»¬éœ€è¦è®©å®ƒæ‰©å±• <mark>CrudRespository&lt;T, ID&gt;</mark> æ¥å£ï¼Œå…¶ä¸­æ³›å‹å‚æ•°æ˜¯æˆ‘ä»¬çš„å®ä½“ç±»å’Œå®ä½“çš„
id ç±»å‹ã€‚
æ‰€ä»¥å¯¹äºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬çš„ repository
æ¥å£å®šä¹‰å°†ä¼šæ˜¯ï¼š<code>public interface EmployeeRepository extends CrudRepository&lt;Employee, Long&gt;</code>ã€‚</p>
<p>æˆ‘ä»¬å°†ä½¿ç”¨è¿™ä¸ª <code>EmployeeRepository</code> æ¥å£æ¥åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä»£ç ä¸­æ‰§è¡Œ CRUD æ“ä½œã€‚
ç”±äºæˆ‘ä»¬æ­£åœ¨æ‰©å±• <code>CrudRepository</code>ï¼Œæˆ‘ä»¬é»˜è®¤å°±å¯ä»¥è®¿é—®åŸºæœ¬çš„ CRUD æ–¹æ³•ã€‚
ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ <code>save</code> æ–¹æ³•å°†ä¸€ä¸ª Employee å¯¹è±¡æ’å…¥åˆ°æˆ‘ä»¬çš„æ•°æ®åº“ä¸­ã€‚
æˆ‘ä»¬ä¹Ÿå¯ä»¥è°ƒç”¨ <code>findAll</code> æ–¹æ³•æ¥åˆ—å‡ºä½ çš„ Employee è¡¨ä¸­çš„æ‰€æœ‰å‘˜å·¥ã€‚
å½“æˆ‘ä»¬ç¼–å†™æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºé€»è¾‘æ—¶ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>
<p>åœ¨å¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸­ï¼Œä½ ä¼šå‘ç°è‡ªå·±å¸Œæœ›åšçš„äº‹æƒ…è¶…å‡ºäº† CrudRepository æ¥å£é»˜è®¤æä¾›çš„èŒƒå›´ã€‚
ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦æ‰¾åˆ°æ‰€æœ‰å§“æ°ä¸­åŒ…å«ç©ºæ ¼çš„å‘˜å·¥ã€‚ä½ å½“ç„¶å¯ä»¥ç¼–å†™ä¸€ä¸ª SQL æŸ¥è¯¢æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚
ç„¶è€Œï¼Œä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•æ˜¯åˆ©ç”¨ Spring Data JPAï¼Œå®ƒå…è®¸ä½ åœ¨ä½ çš„ repository ä¸­åˆ›å»ºæ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å°†æ ¹æ®æ–¹æ³•åè¢«è½¬æ¢ä¸ºæŸ¥è¯¢ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦æ·»åŠ ä¸€ä¸ªæ–¹æ³•æ¥æŸ¥æ‰¾æ‰€æœ‰å§“æ°ä¸­åŒ…å«ç‰¹å®šå­—ç¬¦ä¸²çš„å‘˜å·¥ã€‚
æˆ‘ä»¬å°†å‰å¾€æˆ‘ä»¬çš„ <code>EmployeeRepository</code> æ¥å£ï¼Œå¹¶å¼€å§‹å£°æ˜æˆ‘ä»¬çš„æ–¹æ³•ã€‚
æˆ‘çš„æ–¹æ³•å°†è¿”å›ä¸€ä¸ªå‘˜å·¥åˆ—è¡¨ï¼Œå› æ­¤æˆ‘ä»¬å°†ä½¿ç”¨ <code>List&lt;Employee&gt;</code> ä½œä¸ºè¿”å›ç±»å‹ã€‚
ç„¶åï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šä¸€ä¸ªç”±ä¸¤éƒ¨åˆ†ç»„æˆçš„æ–¹æ³•åï¼šå¼•å…¥éƒ¨åˆ†å’Œæ¡ä»¶éƒ¨åˆ†ã€‚
æˆ‘ä»¬å¯ä»¥åœ¨ IntelliJ IDEA ä¸­ä½¿ç”¨ <strong>âŒƒâ£</strong> (macOS) / <strong>Ctrl+Space</strong> (Windows/Linux) æ¥æŸ¥çœ‹å¼•å…¥éƒ¨åˆ†çš„æ–¹æ³•å»ºè®®åˆ—è¡¨ï¼š</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403032144256.png" alt="Repository Method Suggestion Introducer" tabindex="0" loading="lazy"><figcaption>Repository Method Suggestion Introducer</figcaption></figure>
<p>æˆ‘ä»¬å°†é€‰æ‹© <mark>findEmployeesBy</mark> ä½œä¸ºå¼•å…¥éƒ¨åˆ†ã€‚
ç„¶åï¼Œæˆ‘ä»¬å°†å†æ¬¡ç‚¹å‡» <strong>âŒƒâ£</strong> (macOS) / <strong>Ctrl+Space</strong> (Windows/Linux) æ¥æŸ¥çœ‹å¯ä»¥é€‰æ‹©çš„æ¡ä»¶åˆ—è¡¨ã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403032145040.png" alt="Repository Method Suggestion Criteria" tabindex="0" loading="lazy"><figcaption>Repository Method Suggestion Criteria</figcaption></figure>
<p>æˆ‘ä»¬å°†é€‰æ‹© <code>LastNameContaining</code>ã€‚æœ€åï¼Œæˆ‘ä»¬å°†å£°æ˜ä¸€ä¸ª String æ–¹æ³•å‚æ•°ï¼Œè¡¨ç¤ºæˆ‘ä»¬è¦æ£€æŸ¥çš„å­—ç¬¦ä¸²ã€‚
ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥æ‰¾åˆ°æ‰€æœ‰å§“æ°ä¸­åŒ…å«æ‰€æä¾›å­—ç¬¦ä¸²çš„å‘˜å·¥ã€‚</p>
<p>ä½ å¯èƒ½ä¼šæƒ³ï¼šå¦‚æœæˆ‘å®šä¹‰äº†è¿™ä¸ªæ¥å£ï¼Œæˆ‘ä¸æ˜¯å¿…é¡»è¦å®ç°å®ƒå—ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚
Spring Data JPA ä¼šä¸ºä½ å¤„ç†è¿™äº›ï¼ä½ åªéœ€è¦å®šä¹‰ä½ çš„ Repository æ¥å£ï¼Œå¹¶éµå¾ª Spring Data çš„çº¦å®šå£°æ˜ä½ çš„æ–¹æ³•ã€‚
å½“ä½ æ·»åŠ æ›´å¤šæ–¹æ³•æ—¶ï¼Œå¦‚æœåœ¨æ–¹æ³•åä¸­çŠ¯é”™ï¼ŒIntelliJ IDEA å°†ä¼šæŒ‡å‡ºé”™è¯¯ã€‚
ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å°è¯•åˆ›å»ºä¸€ä¸ªç”¨äºæŸ¥è¯¢å…·æœ‰ä¸æ­£ç¡® <code>LName</code> å±æ€§çš„å‘˜å·¥çš„æ–¹æ³•ï¼ŒIntelliJ IDEA
ä¼šç»™å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¯´<code>Cannot resolve property LName</code>ã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403032330980.png" alt="Method Signature Validation" tabindex="0" loading="lazy"><figcaption>Method Signature Validation</figcaption></figure>
<p>æœ€ç»ˆï¼Œä½ çš„ EmployeeRepository æ¥å£åº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jetbrains<span class="token punctuation">.</span>springdatajpaapp</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>repository<span class="token punctuation">.</span></span><span class="token class-name">CrudRepository</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmployeeRepository</span> <span class="token keyword">extends</span> <span class="token class-name">CrudRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> <span class="token function">findEmployeesByLastNameContaining</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>é…ç½®æ•°æ®åº“</h2>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Spring Boot ä¸ºæˆ‘ä»¬åˆ›å»ºçš„é»˜è®¤å†…å­˜æ•°æ®åº“ã€‚
ç„¶è€Œï¼Œé»˜è®¤æ•°æ®åº“åŠŸèƒ½æœ‰é™ï¼Œå¹¶ä¸”åœ¨åº”ç”¨ç¨‹åºç»ˆæ­¢åä¸å…è®¸æ•°æ®ä¿ç•™ï¼Œå› æ­¤è®©æˆ‘ä»¬ç»§ç»­é…ç½®ä¸€ä¸ªæ•°æ®åº“ã€‚</p>
<p>æˆ‘ä»¬å°†è°ƒå‡ºæœç´¢èœå• <strong>â‡§â‡§</strong> (macOS) / <strong>Shift+Shift</strong> (Windows/Linux) å¹¶æœç´¢æˆ‘ä»¬çš„ <mark>application.properties</mark> æ–‡ä»¶ã€‚
åœ¨æˆ‘ä»¬çš„ application.properties æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ IntelliJ IDEA çš„å»ºè®®æ¥æŒ‡å®šè¿æ¥åˆ°æˆ‘ä»¬çš„ H2 æ•°æ®åº“æ‰€éœ€çš„å±æ€§ã€‚
æˆ‘ä»¬å°†å¼€å§‹è¾“å…¥ <mark>url</mark>ï¼Œå¹¶ä»å»ºè®®åˆ—è¡¨ä¸­é€‰æ‹© <mark>spring.datasource.url</mark> å±æ€§ã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403032332643.png" alt="Application Properties URL" tabindex="0" loading="lazy"><figcaption>Application Properties URL</figcaption></figure>
<p>å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨ H2 ä½œä¸ºä½ çš„æ•°æ®åº“ï¼Œä½ å¯ä»¥åœ¨è¿™é‡ŒæŒ‡å®šä½ è‡ªå·±çš„æ•°æ®åº“ URLã€‚
åœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†æŒ‡å®š <mark>jdbc:h2:file:./data/myDB</mark> ä½œä¸ºæˆ‘ä»¬çš„ URLï¼Œè¿™å°†åˆ›å»ºä¸€ä¸ªåä¸º <mark>myDB</mark> çš„ H2 æ•°æ®åº“ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šæˆ‘ä»¬çš„é©±åŠ¨ç±»åã€‚
æˆ‘ä»¬å¯ä»¥ç±»ä¼¼åœ°æœç´¢ <mark>driver</mark>ï¼Œå¹¶ä»æˆ‘ä»¬çš„å»ºè®®åˆ—è¡¨ä¸­é€‰æ‹© <mark>spring.datasource.driver-class-name</mark>ã€‚
ä¸€æ—¦æˆ‘ä»¬é€‰æ‹©äº†è¿™ä¸ªï¼ŒIntelliJ IDEA å°†æ ¹æ®æˆ‘ä»¬ä¹‹å‰æŒ‡å®šçš„ URL æä¾› H2 é©±åŠ¨ç¨‹åºçš„å»ºè®®å€¼ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€‰æ‹©å®ƒã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403032156491.png" alt="Application Properties Driver Class" tabindex="0" loading="lazy"><figcaption>Application Properties Driver Class</figcaption></figure>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åŒæ ·æœç´¢ <mark>username</mark> å’Œ <mark>password</mark> å±æ€§ï¼Œå¹¶å°†å®ƒä»¬çš„å€¼åˆ†åˆ«è®¾ç½®ä¸º <mark>sa</mark> å’Œ <mark>password</mark>ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬ä¸æƒ³æ‰‹åŠ¨åˆ›å»ºä»»ä½•è¡¨ï¼Œå› æ­¤æˆ‘ä»¬å°†æ·»åŠ  <mark>spring.jpa.hibernate.ddl-auto</mark> å±æ€§ï¼Œå¹¶ä½¿ç”¨ä»£ç å®Œæˆæ¥æŸ¥çœ‹å¯èƒ½çš„å€¼åˆ—è¡¨ã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403032158424.png" alt="Application Properties ddl-auto" tabindex="0" loading="lazy"><figcaption>Application Properties ddl-auto</figcaption></figure>
<p>å¯¹äºæˆ‘çš„åº”ç”¨ç¨‹åºï¼Œæˆ‘å°†æŠŠå±æ€§å€¼è®¾ç½®ä¸º <mark>update</mark>ï¼Œè¿™æ ·å¦‚æœè¡¨ä¸å­˜åœ¨ï¼Œå®ƒå°†åœ¨æ•°æ®åº“ä¸­åˆ›å»ºè¡¨ï¼Œå¹¶åœ¨æˆ‘å¯¹å®ä½“è¿›è¡Œæ›´æ”¹æ—¶æ›´æ–°å®ƒä»¬ã€‚</p>
<p>æœ€ç»ˆï¼Œä½ çš„ application.properties æ–‡ä»¶åº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-properties" data-ext="properties" data-title="properties"><pre class="language-properties"><code><span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:h2:file:./data/myDB</span>
<span class="token key attr-name">spring.datasource.driver-class-name</span><span class="token punctuation">=</span><span class="token value attr-value">org.h2.Driver</span>
<span class="token key attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token value attr-value">sa</span>
<span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token value attr-value">password</span>
<span class="token key attr-name">spring.jpa.hibernate.ddl-auto</span><span class="token punctuation">=</span><span class="token value attr-value">update</span>
</code></pre></div><h2>ä»åº”ç”¨ç¨‹åºå†™å…¥æ•°æ®åº“</h2>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº†æˆ‘ä»¬çš„ Employee å®ä½“ã€Repository å’Œæ•°æ®åº“é…ç½®ï¼Œæˆ‘ä»¬å‡†å¤‡ç¼–å†™æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºé€»è¾‘ã€‚
å‡è®¾æˆ‘ä»¬æƒ³è¦å‘æˆ‘ä»¬çš„æ•°æ®åº“æ’å…¥å››ä¸ªå‘˜å·¥ã€‚æˆ‘ä»¬å°†å¯¼èˆªåˆ°ä¸ºæˆ‘ä»¬çš„ Spring Boot åº”ç”¨ç¨‹åº
åˆ›å»ºçš„ <mark>SpringDataJpaApplication</mark> ç±» <strong>â‡§â‡§</strong> (macOS) / <strong>Shift+Shift</strong> (Windows/Linux)ã€‚</p>
<p><strong>ç»ƒä¹ </strong>ï¼š</p>
<p>èŠ±å‡ åˆ†é’Ÿæ—¶é—´çœ‹çœ‹ä½ èƒ½å¦åˆ›å»ºä¸€ä¸ª <code>insertFourEmployees(EmployeeRepository repository)</code> æ–¹æ³•ï¼Œä½¿ç”¨ <code>save()</code> æ–¹æ³•æ’å…¥å‘˜å·¥ã€‚</p>
<p>å®Œæˆäº†å—ï¼Ÿä»¥ä¸‹æ˜¯ä½ çš„æ–¹æ³•åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">insertFourEmployees</span><span class="token punctuation">(</span><span class="token class-name">EmployeeRepository</span> repository<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    repository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">"Dalia"</span><span class="token punctuation">,</span> <span class="token string">"Abo Sheasha"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    repository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">"Trisha"</span><span class="token punctuation">,</span> <span class="token string">"Gee"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    repository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">"Helen"</span><span class="token punctuation">,</span> <span class="token string">"Scott"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    repository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">"Mala"</span><span class="token punctuation">,</span> <span class="token string">"Gupta"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç»§ç»­åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­è°ƒç”¨é‚£ä¸ªæ–¹æ³•ã€‚åœ¨ä¸€ä¸ªå…¸å‹çš„ Spring Boot åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä¼šæœ‰ä¸€ä¸ªæœåŠ¡ç±»ï¼Œå…¶ä¸­åŒ…å«æœåŠ¡æä¾›çš„åŠŸèƒ½ã€‚
ç„¶è€Œï¼Œç”±äºæˆ‘ä»¬åªæ˜¯åšä¸€äº›ä¸€æ¬¡æ€§çš„æ“ä½œï¼Œè®©æˆ‘ä»¬ä¿æŒç®€å•ï¼Œä½¿ç”¨ä¸€ä¸ª Bean æ¥è°ƒç”¨æˆ‘ä»¬çš„ <code>insertFourEmployees</code> æ–¹æ³•ã€‚
ç„¶åï¼Œè®©æˆ‘ä»¬è°ƒç”¨ <code>repository.findAll()</code> æ¥æ£€ç´¢å·²æ’å…¥çš„å®ä½“ã€‚ä¸‹é¢æ˜¯ä»£ç ç¤ºä¾‹ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">CommandLineRunner</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">EmployeeRepository</span> repository<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">insertFourEmployees</span><span class="token punctuation">(</span>repository<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>repository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è®©æˆ‘ä»¬è¿è¡Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå¹¶çœ‹åˆ°å®ƒçš„è¿è¡Œæƒ…å†µã€‚æˆ‘ä»¬å°†æŒ‰ <strong>âŒƒR</strong> (macOS) / <strong>Shift+F10</strong> (Windows/Linux)ã€‚</p>
<p>æœ€ç»ˆç»“æœï¼Œä¸€æ—¦æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå¯åŠ¨ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ§åˆ¶å°æ—¥å¿—æ˜¾ç¤ºæˆ‘ä»¬çš„ Spring Boot åº”ç”¨ç¨‹åºæ­£åœ¨å¯åŠ¨ã€‚
ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>findAll</code> è°ƒç”¨çš„ç»“æœï¼Œæ‰“å°å‡ºæ•°æ®åº“ä¸­æ‰€æœ‰çš„å‘˜å·¥ã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403032212130.png" alt="Application Run Successfully" tabindex="0" loading="lazy"><figcaption>Application Run Successfully</figcaption></figure>
<h2>åˆ›å»ºæ•°æ®æº</h2>
<p>åœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨æ•°æ®åº“æ—¶ï¼Œåœ¨IntelliJ IDEAä¸­åˆ›å»ºä¸€ä¸ªæ•°æ®æºè¿æ¥éå¸¸æœ‰ç”¨ã€‚
å®ƒå…è®¸ä½ åœ¨IDEä¸­è½»æ¾åœ°ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’ã€‚è®©æˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„<a href="https://www.h2database.com/html/main.html" target="_blank" rel="noopener noreferrer">H2</a>æ•°æ®åº“åˆ›å»ºä¸€ä¸ªæ•°æ®æºè¿æ¥ã€‚
å¦‚æœä½ æ­£åœ¨ä½¿ç”¨å…¶ä»–æ•°æ®åº“ï¼Œä½ å¯ä»¥ä½¿ç”¨ç±»ä¼¼çš„æ­¥éª¤ï¼Œæˆ–è€…ä½ å¯ä»¥æŒ‰ç…§
IntelliJ IDEA<a href="https://www.jetbrains.com/help/java/connecting-to-a-database.html" target="_blank" rel="noopener noreferrer">æ•°æ®åº“è¿æ¥å¸®åŠ©é¡µé¢</a>ä¸­æ¦‚è¿°çš„è¯´æ˜è¿›è¡Œæ“ä½œã€‚
è¯·æ³¨æ„ï¼Œæ­¤åŠŸèƒ½ä»…é€‚ç”¨äº<a href="https://www.jetbrains.com/idea/features/editions_comparison_matrix.html" target="_blank" rel="noopener noreferrer">IntelliJ IDEA Ultimate</a>ç‰ˆã€‚</p>
<p>è¦åˆ›å»ºæˆ‘ä»¬çš„H2æ•°æ®æºï¼Œæˆ‘ä»¬å°†æ‰“å¼€æ•°æ®åº“å·¥å…·çª—å£ï¼ˆ<strong>View | Tool Windows | Database</strong>ï¼‰ï¼Œç„¶åç‚¹å‡»<code>+</code>æŒ‰é’®ã€‚
æœ‰å¤šç§æ–¹å¼å¯ä»¥åˆ›å»ºæˆ‘ä»¬çš„è¿æ¥ã€‚æˆ‘ä»¬å°†ä½¿ç”¨<strong>Data source from URL</strong>é€‰é¡¹ã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403032330533.png" alt="New Database" tabindex="0" loading="lazy"><figcaption>New Database</figcaption></figure>
<p>æˆ‘ä»¬å°†è¾“å…¥æˆ‘ä»¬çš„æ•°æ®åº“URLï¼š<mark>jdbc:h2:file:./data/myDB</mark>ï¼Œç„¶åç‚¹å‡»ç¡®å®šã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å®Œæˆæ•°æ®åº“çš„é…ç½®ã€‚å¯¹äºæˆ‘ä»¬çš„ç”¨æˆ·å’Œå¯†ç å­—æ®µï¼Œ
æˆ‘ä»¬å°†è¾“å…¥åœ¨æˆ‘ä»¬çš„<code>application.properties</code>æ–‡ä»¶ä¸­è®¾ç½®çš„ç”¨æˆ·å’Œå¯†ç ï¼ˆ<mark>sa</mark>ï¼Œ<mark>password</mark>ï¼‰ã€‚
å¦‚æœä½ æ”¶åˆ°æœ‰å…³ç¼ºå°‘H2é©±åŠ¨ç¨‹åºçš„è­¦å‘Šï¼Œè¯·ç‚¹å‡»ä¸‹è½½ç¼ºå¤±çš„é©±åŠ¨ç¨‹åºæ–‡ä»¶ã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403032332971.png" alt="Data Source myDB Config" tabindex="0" loading="lazy"><figcaption>Data Source myDB Config</figcaption></figure>
<p><strong>å¯é€‰æ­¥éª¤</strong>ï¼šåœ¨é€‰é¡¹é€‰é¡¹å¡ä¸‹ï¼Œå¯ç”¨â€œè®¾ç½®åè‡ªåŠ¨æ–­å¼€è¿æ¥â€ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºåœ¨3ç§’åæ–­å¼€è¿æ¥ã€‚
æ­¤è®¾ç½®å°†æ–­å¼€IntelliJ IDEAä¸­çš„æ•°æ®åº“å¹¶é‡Šæ”¾æ‰€æœ‰é”å®šï¼Œä½¿æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„è¿›ç¨‹å¯ä»¥æŒç»­è¿æ¥å¹¶å†™å…¥æ•°æ®åº“ã€‚
è¿™å°†é˜²æ­¢æ¥è‡ªä½ çš„åº”ç”¨ç¨‹åºçš„<code>database may already be in use</code>çš„é”™è¯¯ã€‚
å¦‚æœæ‰§è¡Œäº†æ­¤æ­¥éª¤ï¼Œåˆ™å¯èƒ½éœ€è¦åœ¨æ•°æ®åº“å·¥å…·çª—å£ä¸­ç‚¹å‡»â€œåˆ·æ–°â€æŒ‰é’®ä»¥æ›´æ–°æ•°æ®æºã€‚</p>
<p>ç„¶åï¼Œæˆ‘ä»¬å°†ç‚¹å‡»â€œ<strong>Test Connection</strong>â€ä»¥ç¡®ä¿æˆ‘ä»¬çš„é…ç½®æ˜¯æœ‰æ•ˆçš„ã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403032331974.png" alt="Data Source Config Options" tabindex="0" loading="lazy"><figcaption>Data Source Config Options</figcaption></figure>
<p>ä¸€æ—¦æˆ‘ä»¬ç‚¹å‡»"<strong>OK</strong>"ï¼Œæˆ‘ä»¬å°±ä¼šçœ‹åˆ°ä¸€ä¸ªæ–°çš„æ•°æ®æºï¼Œç”¨äºæˆ‘ä»¬çš„H2æ•°æ®åº“ã€‚</p>
<p>æœ€ç»ˆç»“æœ ï¼Œåœ¨æ•°æ®åº“è§†å›¾ä¸­ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥å¯¼èˆªåˆ°æˆ‘ä»¬çš„Employeeè¡¨ï¼Œå¹¶é€šè¿‡åŒå‡»è¡¨æ ¼æŸ¥çœ‹æ‰€æœ‰å‘˜å·¥æ•°æ®ã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403032331767.png" alt="Database View" tabindex="0" loading="lazy"><figcaption>Database View</figcaption></figure>
<h2>è°ƒç”¨è‡ªå®šä¹‰æŸ¥è¯¢</h2>
<p>å‡è®¾æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢æ•°æ®åº“ä¸­æ‰€æœ‰å§“æ°ä¸­åŒ…å«ç©ºæ ¼çš„å‘˜å·¥ã€‚</p>
<p><strong>ç»ƒä¹ </strong>ï¼šèŠ±å‡ åˆ†é’Ÿæ—¶é—´ç¼–å†™ä»£ç ï¼ŒæŸ¥æ‰¾å¹¶æ‰“å°å§“æ°ä¸­å¸¦æœ‰ç©ºæ ¼çš„æ‰€æœ‰å‘˜å·¥ã€‚</p>
<p>å®Œæˆäº†å—ï¼Ÿä»¥ä¸‹æ˜¯å®ç°ä»£ç çš„æ ·å­ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">CommandLineRunner</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">EmployeeRepository</span> repository<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>repository<span class="token punctuation">.</span><span class="token function">findEmployeesByLastNameContaining</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æœ€ç»ˆç»“æœï¼Œ å¦‚æœä½ æ’å…¥äº†æ•™ç¨‹ä¸­æåˆ°çš„ç›¸åŒæ•°æ®ï¼Œä½ åº”è¯¥åœ¨æ§åˆ¶å°è¾“å‡ºä¸­çœ‹åˆ°"<code>Dalia</code>"å‘˜å·¥ã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403032250455.png" alt="Application Run Successfully" tabindex="0" loading="lazy"><figcaption>Application Run Successfully</figcaption></figure>
<h2>æ€»ç»“</h2>
<p>åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„Spring Bootåº”ç”¨ç¨‹åºï¼Œå®ƒä½¿ç”¨Spring Data JPAæ¥å­˜å‚¨å’Œæ£€ç´¢æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚</p>
<p>ä¸€äº›åœ¨æ•™ç¨‹ä¸­æåˆ°çš„æœ‰ç”¨çš„å¿«æ·æ–¹å¼åŒ…æ‹¬ï¼š</p>
<p>| Name          | Windows Shortcut | macOS Shortcut |
|</p>
]]></content:encoded>
      <enclosure url="https://img.geekyspace.cn/pictures/2024/202403032048778.png" type="image/png"/>
    </item>
    <item>
      <title>Spring æ ¸å¿ƒæŠ€æœ¯</title>
      <link>https://www.geekyspace.cn/md/spring-framework/core/</link>
      <guid>https://www.geekyspace.cn/md/spring-framework/core/</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Spring æ ¸å¿ƒæŠ€æœ¯</source>
      <description>Spring æ ¸å¿ƒæŠ€æœ¯ æ ¸å¿ƒæŠ€æœ¯ Spring æ¡†æ¶çš„æ ¸å¿ƒæŠ€æœ¯ä¸»è¦åŒ…æ‹¬ï¼š ä¾èµ–æ³¨å…¥ï¼ˆdependency injectionï¼‰ï¼Œä¹Ÿç§°ä¸ºæ§åˆ¶åè½¬ï¼ˆIoCï¼‰ äº‹ä»¶ï¼ˆeventsï¼‰ èµ„æºï¼ˆresourcesï¼‰ å›½é™…åŒ–ï¼ˆi18nï¼‰ æ•°æ®éªŒè¯ï¼ˆvalidationï¼‰ æ•°æ®ç»‘å®šï¼ˆdata bindingï¼‰ ç±»å‹è½¬æ¢ï¼ˆtype conversionï¼‰ SpELï¼ˆSp...</description>
      <category>Spring</category>
      <pubDate>Mon, 18 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>æ ¸å¿ƒæŠ€æœ¯</h2>
<p>Spring æ¡†æ¶çš„æ ¸å¿ƒæŠ€æœ¯ä¸»è¦åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ä¾èµ–æ³¨å…¥ï¼ˆdependency injectionï¼‰ï¼Œä¹Ÿç§°ä¸ºæ§åˆ¶åè½¬ï¼ˆIoCï¼‰</strong></li>
<li>äº‹ä»¶ï¼ˆeventsï¼‰</li>
<li>èµ„æºï¼ˆresourcesï¼‰</li>
<li>å›½é™…åŒ–ï¼ˆi18nï¼‰</li>
<li>æ•°æ®éªŒè¯ï¼ˆvalidationï¼‰</li>
<li>æ•°æ®ç»‘å®šï¼ˆdata bindingï¼‰</li>
<li>ç±»å‹è½¬æ¢ï¼ˆtype conversionï¼‰</li>
<li>SpELï¼ˆSpring Expression Languageï¼‰</li>
<li><strong>é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰</strong></li>
</ul>
<h2>Spring IoCå®¹å™¨å’ŒBeanç®€ä»‹</h2>
<p><strong>Spring IoCï¼ˆæ§åˆ¶åè½¬ï¼‰ä¹Ÿè¢«ç§°ä¸ºä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰</strong></p>
<p>å®ƒæ˜¯ä¸€ä¸ªè¿‡ç¨‹ï¼Œå¯¹è±¡ä»…é€šè¿‡æ„é€ å‚æ•°ã€å·¥å‚æ–¹æ³•å‚æ•°æˆ–åœ¨<strong>å¯¹è±¡å®ä¾‹</strong>è¢«æ„é€ å‡½æ•°æˆ–å·¥å‚æ–¹æ³•è¿”å›åï¼Œåœ¨å…¶ä¸Šè®¾ç½®çš„å±æ€§æ¥å®šä¹‰å®ƒä»¬çš„ä¾èµ–å…³ç³»ã€‚
åœ¨IoCå®¹å™¨åˆ›å»ºBeanæ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨æ³¨å…¥è¿™äº›ä¾èµ–é¡¹ã€‚ ä¸å†éœ€è¦é€š<code>ç›´æ¥æ„é€ ä¾èµ–é¡¹</code>æˆ–ä½¿ç”¨<code>æœåŠ¡å®šä½å™¨æ¨¡å¼</code>ç­‰æ–¹å¼æ¥ç®¡ç†å¯¹è±¡çš„å®ä¾‹åŒ–æˆ–ä½ç½®ï¼Œ
è€Œæ˜¯äº¤ç”±IoCå®¹å™¨æ¥ç®¡ç†ï¼Œå› æ­¤ç§°ä¸º<strong>æ§åˆ¶åè½¬</strong>ã€‚</p>
<p><a href="https://docs.spring.io/spring-framework/docs/6.1.5/javadoc-api/org/springframework/beans/factory/BeanFactory.html" target="_blank" rel="noopener noreferrer">org.springframework.beans</a>
å’Œ <a href="https://docs.spring.io/spring-framework/docs/6.1.5/javadoc-api/org/springframework/context/ApplicationContext.html" target="_blank" rel="noopener noreferrer">org.springframework.context</a>
åŒ…æ˜¯Spring Frameworkçš„IoCå®¹å™¨çš„åŸºç¡€ã€‚
<a href="https://docs.spring.io/spring-framework/docs/6.1.5/javadoc-api/org/springframework/beans/factory/BeanFactory.html" target="_blank" rel="noopener noreferrer">BeanFactory</a>
æ¥å£æä¾›äº†ä¸€ç§é«˜çº§é…ç½®æœºåˆ¶ï¼Œèƒ½å¤Ÿç®¡ç†ä»»ä½•ç±»å‹çš„<code>object</code>å¯¹è±¡ã€‚
<a href="https://docs.spring.io/spring-framework/docs/6.1.5/javadoc-api/org/springframework/context/ApplicationContext.html" target="_blank" rel="noopener noreferrer">ApplicationContext</a>
æ˜¯ BeanFactory çš„ä¸€ä¸ªå­æ¥å£ã€‚å®ƒå¢åŠ äº†ï¼š</p>
<ul>
<li>ä¸Springçš„AOPç‰¹æ€§æ›´å¥½çš„é›†æˆ</li>
<li><code>Message resource</code>æ¶ˆæ¯èµ„æºå¤„ç†ï¼ˆç”¨äºå›½é™…åŒ–ï¼‰</li>
<li><code>Event publication</code>äº‹ä»¶å‘å¸ƒ</li>
<li>åº”ç”¨å±‚ç‰¹å®šçš„ä¸Šä¸‹æ–‡ï¼Œä¾‹å¦‚Webåº”ç”¨ç¨‹åºçš„<code>WebApplicationContext</code></li>
</ul>
<p>ç®€è€Œè¨€ä¹‹ï¼Œ<code>BeanFactory</code> æä¾›äº†é…ç½®æ¡†æ¶å’ŒåŸºæœ¬åŠŸèƒ½ï¼Œ<code>ApplicationContext</code> æ·»åŠ äº†æ›´å¤šä¼ä¸šç‰¹å®šçš„åŠŸèƒ½ã€‚
<code>ApplicationContext</code> æ˜¯ <code>BeanFactory</code> çš„ä¸€ä¸ªè¶…é›†ã€‚ åœ¨ç‰¹åˆ«è¦æ±‚è½»é‡çº§åº”ç”¨ç¨‹åºçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨<code>BeanFactory</code>ã€‚</p>
<p>æƒ³è¦äº†è§£ BeanFactory
å‚é˜… <a href="https://docs.spring.io/spring-framework/reference/core/beans/beanfactory.html" target="_blank" rel="noopener noreferrer">BeanFactory API</a> ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>Bean å®šä¹‰ï¼ˆDefinitionï¼‰</title>
      <link>https://www.geekyspace.cn/md/spring-framework/core/beans-definition.html</link>
      <guid>https://www.geekyspace.cn/md/spring-framework/core/beans-definition.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Bean å®šä¹‰ï¼ˆDefinitionï¼‰</source>
      <description>Bean å®šä¹‰ï¼ˆDefinitionï¼‰ æ¦‚è¿° æ„å»ºåº”ç”¨ç¨‹åºä¸»å¹²å¹¶ç”±Spring IoC å®¹å™¨ç®¡ç†çš„å¯¹è±¡ç§°ä¸º Beanã€‚ åœ¨å®¹å™¨ä¸­ï¼ŒBeançš„å®šä¹‰è¡¨ç¤ºä¸ºorg.springframework.beans.factory.config.BeanDefinitionå¯¹è±¡ã€‚ BeanDefinitionåŒ…å«ä»¥ä¸‹å…ƒæ•°æ®ï¼š å…¨è·¯å¾„ç±»åï¼šé€šå¸¸ï¼Œè¢«å®šä¹‰ä¸ºBeançš„å®ç°...</description>
      <category>Spring</category>
      <pubDate>Mon, 18 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>æ¦‚è¿°</h2>
<blockquote>
<p>æ„å»ºåº”ç”¨ç¨‹åºä¸»å¹²å¹¶ç”±Spring IoC å®¹å™¨ç®¡ç†çš„å¯¹è±¡ç§°ä¸º Beanã€‚</p>
<p>åœ¨å®¹å™¨ä¸­ï¼ŒBeançš„å®šä¹‰è¡¨ç¤ºä¸º<code>org.springframework.beans.factory.config.BeanDefinition</code>å¯¹è±¡ã€‚</p>
</blockquote>
<p><strong>BeanDefinitionåŒ…å«ä»¥ä¸‹å…ƒæ•°æ®ï¼š</strong></p>
<ul>
<li><strong>å…¨è·¯å¾„ç±»å</strong>ï¼šé€šå¸¸ï¼Œè¢«å®šä¹‰ä¸ºBeançš„å®ç°ç±»</li>
<li><strong>è¡Œä¸ºé…ç½®å…ƒç´ </strong>ï¼šè¯´æ˜äº†Beanåœ¨å®¹å™¨ä¸­çš„è¡Œä¸ºæ–¹å¼ï¼Œä¾‹å¦‚ä½œç”¨åŸŸscopeã€ç”Ÿå‘½å‘¨æœŸå›è°ƒç­‰</li>
<li><strong>ä¾èµ–å…³ç³»</strong>ï¼šæè¿°Beanä¸å…¶ä»–Beanä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼ŒåŒ…æ‹¬ä¾èµ–æ³¨å…¥ï¼Œä¾èµ–æŸ¥æ‰¾ç­‰</li>
<li>å…¶ä»–é…ç½®ä¿¡æ¯ï¼šå¦‚ï¼šç®¡ç†è¿æ¥æ± çš„Beanå¯ä»¥é…ç½®poolçš„å¤§å°é™åˆ¶ï¼Œä½¿ç”¨çš„è¿æ¥æ•°é‡ç­‰</li>
</ul>
<p>è¯¥å…ƒæ•°æ®è½¬æ¢ä¸ºç»„æˆæ¯ä¸ªBeanå®šä¹‰çš„ä¸€ç»„å±æ€§ã€‚ ä¸‹è¡¨ä»‹ç»äº†è¿™äº›å±æ€§ï¼š</p>
<p>| å±æ€§                       | æè¿°           |
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>Beanç”Ÿå‘½å‘¨æœŸï¼ˆLifecycleï¼‰</title>
      <link>https://www.geekyspace.cn/md/spring-framework/core/beans-lifecycle.html</link>
      <guid>https://www.geekyspace.cn/md/spring-framework/core/beans-lifecycle.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Beanç”Ÿå‘½å‘¨æœŸï¼ˆLifecycleï¼‰</source>
      <description>Beanç”Ÿå‘½å‘¨æœŸï¼ˆLifecycleï¼‰ Springæ¡†æ¶æä¾›äº†å¤šç§æ¥å£ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™äº›æ¥å£æ¥å®šåˆ¶Beançš„æ€§è´¨ã€‚æœ¬èŠ‚å°†å®ƒä»¬åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š ç”Ÿå‘½å‘¨æœŸå›è°ƒ ApplicationContextAware å’Œ BeanNameAware å…¶ä»–Awareæ¥å£ ç”Ÿå‘½å‘¨æœŸå›è°ƒ ä¸ºäº†ä¸å®¹å™¨ç®¡ç†Beançš„ç”Ÿå‘½å‘¨æœŸè¿›è¡Œäº¤äº’ï¼Œä½ å¯ä»¥å®ç°Springçš„Initializin...</description>
      <category>Spring</category>
      <pubDate>Mon, 08 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Springæ¡†æ¶æä¾›äº†å¤šç§æ¥å£ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™äº›æ¥å£æ¥å®šåˆ¶Beançš„æ€§è´¨ã€‚æœ¬èŠ‚å°†å®ƒä»¬åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p>
<ul>
<li><a href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%9E%E8%B0%83">ç”Ÿå‘½å‘¨æœŸå›è°ƒ</a></li>
<li><a href="#applicationcontextaware%E5%92%8Cbeannameaware">ApplicationContextAware å’Œ BeanNameAware</a></li>
<li><a href="#%E5%85%B6%E4%BB%96aware%E6%8E%A5%E5%8F%A3">å…¶ä»–Awareæ¥å£</a></li>
</ul>
<h2>ç”Ÿå‘½å‘¨æœŸå›è°ƒ</h2>
<p>ä¸ºäº†ä¸å®¹å™¨ç®¡ç†Beançš„ç”Ÿå‘½å‘¨æœŸè¿›è¡Œäº¤äº’ï¼Œä½ å¯ä»¥å®ç°Springçš„<code>InitializingBean</code>å’Œ<code>DisposableBean</code>æ¥å£ã€‚
å®¹å™¨è°ƒç”¨å‰è€…çš„<code>afterPropertiesSet()</code>æ–¹æ³•ä»¥åŠåè€…çš„<code>destroy()</code>æ–¹æ³•ï¼Œè®©Beanåœ¨åˆå§‹åŒ–å’Œé”€æ¯æ—¶æ‰§è¡Œç‰¹å®šçš„æ“ä½œã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>åœ¨ç°ä»£çš„Springåº”ç”¨ç¨‹åºä¸­ï¼Œé€šå¸¸è®¤ä¸ºJSR-250çš„<code>@PostConstruct</code>å’Œ<code>@PreDestroy</code>æ³¨è§£æ˜¯ç”¨äºæ¥æ”¶ç”Ÿå‘½å‘¨æœŸå›è°ƒæœ€ä½³å®è·µã€‚
ä½¿ç”¨è¿™äº›æ³¨è§£æ„å‘³ç€ä½ çš„Beanä¸ä¼šä¸Springç‰¹å®šçš„æ¥å£è€¦åˆã€‚å‚é˜… <a href="https://docs.spring.io/spring-framework/reference/core/beans/annotation-config/postconstruct-and-predestroy-annotations.html" target="_blank" rel="noopener noreferrer">ä½¿ç”¨@PostConstructå’Œ@PreDestroy</a>ã€‚</p>
<p>å¦‚æœä½ ä¸æƒ³ä½¿ç”¨JSR-250æ³¨è§£ï¼Œä½†ä»ç„¶å¸Œæœ›æ¶ˆé™¤è€¦åˆï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨<code>init-method</code>å’Œ<code>destroy-method</code>çš„Beanå®šä¹‰å…ƒæ•°æ®ã€‚</p>
</div>
<p>Springæ¡†æ¶åœ¨å†…éƒ¨ä½¿ç”¨<code>BeanPostProcessor</code>å®ç°æ¥å¤„ç†å®ƒæ‰¾åˆ°çš„ä»»ä½•å›è°ƒæ¥å£ï¼Œå¹¶è°ƒç”¨é€‚å½“çš„æ–¹æ³•ã€‚
å¦‚æœä½ éœ€è¦è‡ªå®šä¹‰åŠŸèƒ½æˆ–å…¶ä»–Springé»˜è®¤ä¸æä¾›çš„ç”Ÿå‘½å‘¨æœŸè¡Œä¸ºï¼Œä½ å¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ª<code>BeanPostProcessor</code>ã€‚
å‚é˜… <a href="https://docs.spring.io/spring-framework/reference/core/beans/factory-extension.html" target="_blank" rel="noopener noreferrer">å®¹å™¨æ‰©å±•ç‚¹</a>ã€‚</p>
<p>é™¤äº†åˆå§‹åŒ–å’Œé”€æ¯å›è°ƒä¹‹å¤–ï¼ŒSpringç®¡ç†çš„å¯¹è±¡è¿˜å¯ä»¥å®ç°<code>Lifecycle</code>æ¥å£ï¼Œä»¥ä¾¿è¿™äº›å¯¹è±¡å¯ä»¥å‚ä¸ç”±å®¹å™¨è‡ªèº«ç”Ÿå‘½å‘¨æœŸé©±åŠ¨çš„å¯åŠ¨å’Œå…³é—­è¿‡ç¨‹ã€‚</p>
<p>ç”Ÿå‘½å‘¨æœŸå›è°ƒæ¥å£åœ¨æœ¬èŠ‚ä¸­æœ‰è¯¦ç»†æè¿°ã€‚</p>
<h3>åˆå§‹åŒ–å›è°ƒ</h3>
<p>å®ç°<code>org.springframework.beans.factory.InitializingBean</code>æ¥å£å…è®¸Beanåœ¨å®¹å™¨è®¾ç½®äº†æ‰€æœ‰å¿…è¦å±æ€§ä¹‹åæ‰§è¡Œåˆå§‹åŒ–å·¥ä½œã€‚
<code>InitializingBean</code>æ¥å£æŒ‡å®šäº†ä¸€ä¸ªæ–¹æ³•ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
</code></pre></div><p>æˆ‘ä»¬å»ºè®®ä¸è¦ä½¿ç”¨<code>InitializingBean</code>æ¥å£ï¼Œå› ä¸ºå®ƒä¼šå°†ä»£ç ä¸å¿…è¦åœ°è€¦åˆåˆ°Springã€‚
ç›¸åï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨<code>@PostConstruct</code>æ³¨è§£æˆ–æŒ‡å®šä¸€ä¸ªPOJOåˆå§‹åŒ–æ–¹æ³•ã€‚
åœ¨åŸºäºXMLçš„é…ç½®ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>init-method</code>å±æ€§æ¥æŒ‡å®šå…·æœ‰<code>void</code>æ— å‚æ•°ç­¾åçš„æ–¹æ³•çš„åç§°ã€‚
å¯¹äºJavaé…ç½®ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>@Bean</code>çš„<code>initMethod</code>å±æ€§ã€‚
å‚é˜… <a href="https://docs.spring.io/spring-framework/reference/core/beans/java/bean-annotation.html#beans-java-lifecycle-callbacks" target="_blank" rel="noopener noreferrer">æ¥æ”¶ç”Ÿå‘½å‘¨æœŸå›è°ƒ</a>ã€‚
è€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>exampleInitBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.ExampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">init-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>init<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleBean</span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// åšä¸€äº›åˆå§‹åŒ–å·¥ä½œ</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸ä»¥ä¸‹ç¤ºä¾‹å‡ ä¹å…·æœ‰ç›¸åŒçš„æ•ˆæœï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>exampleInitBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.AnotherExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnotherExampleBean</span> <span class="token keyword">implements</span> <span class="token class-name">InitializingBean</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// åšä¸€äº›åˆå§‹åŒ–å·¥ä½œ</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç„¶è€Œï¼Œå‰é¢ä¸¤ä¸ªç¤ºä¾‹ä¸­çš„ç¬¬ä¸€ä¸ªå¹¶æœªå°†ä»£ç ä¸Springè€¦åˆã€‚</p>
<div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p>è¯·æ³¨æ„ï¼Œ<code>@PostConstruct</code>å’Œåˆå§‹åŒ–æ–¹æ³•ä¸€èˆ¬åœ¨å®¹å™¨çš„å•ä¾‹åˆ›å»ºé”å†…æ‰§è¡Œã€‚åªæœ‰åœ¨ä»<code>@PostConstruct</code>æ–¹æ³•è¿”å›åï¼Œ
Beanå®ä¾‹æ‰è¢«è§†ä¸ºå®Œå…¨åˆå§‹åŒ–å¹¶å‡†å¤‡å¥½å‘å¸ƒç»™å…¶ä»–å¯¹è±¡ã€‚
è¿™äº›å•ç‹¬çš„åˆå§‹åŒ–æ–¹æ³•ä»…ç”¨äºéªŒè¯é…ç½®çŠ¶æ€å¹¶å¯èƒ½æ ¹æ®ç»™å®šçš„é…ç½®å‡†å¤‡ä¸€äº›æ•°æ®ç»“æ„ï¼Œä½†ä¸æ¶‰åŠå¤–éƒ¨Beanè®¿é—®ç›¸å…³çš„è¿›ä¸€æ­¥æ´»åŠ¨ã€‚
å¦åˆ™ï¼Œå­˜åœ¨åˆå§‹åŒ–æ­»é”çš„é£é™©ã€‚</p>
<p>å¯¹äºéœ€è¦è§¦å‘æ˜‚è´µçš„åˆå§‹åŒ–åæ´»åŠ¨çš„åœºæ™¯ï¼Œä¾‹å¦‚å¼‚æ­¥æ•°æ®åº“å‡†å¤‡æ­¥éª¤ï¼Œä½ çš„Beanåº”è¯¥å®ç°
<code>SmartInitializingSingleton.afterSingletonsInstantiated()</code>æ–¹æ³•ï¼Œæˆ–ä¾èµ–äºä¸Šä¸‹æ–‡åˆ·æ–°äº‹ä»¶ï¼šå®ç°
<code>ApplicationListener&lt;ContextRefreshedEvent&gt;</code>æˆ–å£°æ˜å…¶æ³¨è§£ç­‰æ•ˆçš„ <code>@EventListener(ContextRefreshedEvent.class)</code>ã€‚
è¿™äº›å˜ä½“åœ¨æ‰€æœ‰å¸¸è§„å•ä¾‹åˆå§‹åŒ–ä¹‹åï¼Œå› æ­¤ä¸ä¼šåœ¨ä»»ä½•å•ä¾‹åˆ›å»ºé”å†…ã€‚</p>
<p>æˆ–è€…ï¼Œä½ å¯ä»¥å®ç°<code>(Smart)Lifecycle</code>æ¥å£å¹¶ä¸å®¹å™¨çš„æ•´ä½“ç”Ÿå‘½å‘¨æœŸç®¡ç†é›†æˆï¼ŒåŒ…æ‹¬è‡ªåŠ¨å¯åŠ¨æœºåˆ¶ã€é¢„é”€æ¯åœæ­¢æ­¥éª¤å’Œæ½œåœ¨çš„åœæ­¢/é‡æ–°å¯åŠ¨å›è°ƒï¼ˆå‚è§ä¸‹æ–‡ï¼‰ã€‚</p>
</div>
<h3>é”€æ¯å›è°ƒ</h3>
<p>å®ç°<code>org.springframework.beans.factory.DisposableBean</code>æ¥å£å…è®¸Beanåœ¨åŒ…å«å®ƒçš„å®¹å™¨é”€æ¯æ—¶è·å¾—å›è°ƒã€‚
<code>DisposableBean</code>æ¥å£æŒ‡å®šäº†ä¸€ä¸ªæ–¹æ³•ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
</code></pre></div><p>æˆ‘ä»¬å»ºè®®ä¸è¦ä½¿ç”¨<code>DisposableBean</code>å›è°ƒæ¥å£ï¼Œå› ä¸ºå®ƒä¼šå°†ä»£ç ä¸å¿…è¦åœ°è€¦åˆåˆ°Springã€‚
ç›¸åï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨<code>@PreDestroy</code>æ³¨è§£æˆ–æŒ‡å®šä¸€ä¸ªç”±Beanå®šä¹‰æ”¯æŒçš„é€šç”¨æ–¹æ³•ã€‚
åœ¨åŸºäºXMLçš„é…ç½®ä¸­ï¼Œä½ å¯ä»¥åœ¨<code>&lt;bean/&gt;</code>å…ƒç´ ä¸­ä½¿ç”¨<code>destroy-method</code>å±æ€§ã€‚
åœ¨Javaé…ç½®ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>@Bean</code>çš„<code>destroyMethod</code>å±æ€§ã€‚
å‚é˜… <a href="https://docs.spring.io/spring-framework/reference/core/beans/java/bean-annotation.html#beans-java-lifecycle-callbacks" target="_blank" rel="noopener noreferrer">æ¥æ”¶ç”Ÿå‘½å‘¨æœŸå›è°ƒ</a>ã€‚
è€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>exampleInitBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.ExampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cleanup<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleBean</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// åšä¸€äº›é”€æ¯å·¥ä½œ(æ¯”å¦‚é‡Šæ”¾æ± è¿æ¥)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸ä»¥ä¸‹ç¤ºä¾‹å‡ ä¹å…·æœ‰ç›¸åŒçš„æ•ˆæœï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>exampleInitBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.AnotherExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnotherExampleBean</span> <span class="token keyword">implements</span> <span class="token class-name">DisposableBean</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// åšä¸€äº›é”€æ¯å·¥ä½œ(æ¯”å¦‚é‡Šæ”¾æ± è¿æ¥)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç„¶è€Œï¼Œå‰é¢ä¸¤ä¸ªç¤ºä¾‹ä¸­çš„ç¬¬ä¸€ä¸ªå¹¶æœªå°†ä»£ç ä¸Springè€¦åˆã€‚</p>
<p>è¯·æ³¨æ„ï¼ŒSpringè¿˜æ”¯æŒæ¨æ–­é”€æ¯æ–¹æ³•ï¼Œå¯ä»¥æ£€æµ‹åˆ°å…¬å¼€çš„<code>close</code>æˆ–<code>shutdown</code>æ–¹æ³•ã€‚
è¿™æ˜¯Javaé…ç½®ç±»ä¸­<code>@Bean</code>æ–¹æ³•çš„é»˜è®¤è¡Œä¸ºï¼Œå¹¶ä¸”è‡ªåŠ¨åŒ¹é…<code>java.lang.AutoCloseable</code>æˆ–<code>java.io.Closeable</code>å®ç°ï¼Œä¹Ÿä¸ä¼šå°†é”€æ¯é€»è¾‘ä¸Springè€¦åˆã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>åœ¨XMLé…ç½®ä¸­ï¼Œä½ å¯ä»¥å°†<code>&lt;bean&gt;</code>å…ƒç´ çš„<code>destroy-method</code>å±æ€§è®¾ç½®ä¸ºä¸€ä¸ªç‰¹æ®Šçš„(inferred)å€¼ã€‚
è¯¥å€¼æŒ‡ç¤ºSpringè‡ªåŠ¨æ£€æµ‹ç‰¹å®šBeanç±»ä¸Šçš„public <code>close</code>æˆ–<code>shutdown</code>æ–¹æ³•ã€‚
å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥å°†è¿™ä¸ªç‰¹æ®Šï¼ˆinferredï¼‰å€¼èµ‹ç»™<code>&lt;beans&gt;</code>å…ƒç´ çš„<code>default-destroy-method</code>å±æ€§ï¼Œä»¥å°†æ­¤è¡Œä¸ºåº”ç”¨äºä¸€ç»„Beanå®šä¹‰ã€‚
ï¼ˆå‚é˜… <a href="https://docs.spring.io/spring-framework/reference/core/beans/factory-nature.html#beans-factory-lifecycle-default-init-destroy-methods" target="_blank" rel="noopener noreferrer">é»˜è®¤åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</a>ï¼‰ã€‚</p>
</div>
<div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p>è¦å®ç°æ‰©å±•çš„å…³é—­é˜¶æ®µï¼Œä½ å¯ä»¥å®ç°<code>Lifecycle</code>æ¥å£ï¼Œè¿™æ ·å¯ä»¥åœ¨è°ƒç”¨ä»»ä½•å•ä¾‹Beançš„é”€æ¯æ–¹æ³•ä¹‹å‰æ¥æ”¶åˆ°æ—©æœŸåœæ­¢ä¿¡å·ã€‚
æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥å®ç°<code>SmartLifecycle</code>æ¥å£ï¼Œç”¨äºæ—¶é—´é™åˆ¶çš„åœæ­¢æ­¥éª¤ï¼Œå®¹å™¨å°†ç­‰å¾…æ‰€æœ‰è¿™ç±»åœæ­¢å¤„ç†å®Œæˆåå†ç»§ç»­æ‰§è¡Œé”€æ¯æ–¹æ³•ã€‚</p>
</div>
<h3>é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</h3>
<p>å½“ä½ ç¼–å†™åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•æ—¶ï¼Œå¦‚æœä¸ä½¿ç”¨Springç‰¹å®š<code>InitializingBean</code>å’Œ<code>DisposableBean</code>å›è°ƒæ¥å£ï¼Œ
é€šå¸¸ä¼šä½¿ç”¨<code>init()</code>ã€<code>initialize()</code>ã€<code>dispose()</code>ç­‰åç§°çš„æ–¹æ³•ã€‚
ç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™äº›ç”Ÿå‘½å‘¨æœŸå›è°ƒæ–¹æ³•çš„å‘½ååº”åœ¨é¡¹ç›®ä¸­æ ‡å‡†åŒ–ï¼Œä»¥ä¾¿æ‰€æœ‰å¼€å‘äººå‘˜ä½¿ç”¨ç›¸åŒçš„æ–¹æ³•åç§°å¹¶ç¡®ä¿ä¸€è‡´æ€§ã€‚</p>
<p>åœ¨Springä¸­ï¼Œä½ å¯ä»¥é…ç½®å®¹å™¨æ¥è‡ªåŠ¨"å¯»æ‰¾"æ¯ä¸ªBeanä¸Šå…·æœ‰ç‰¹å®šåç§°çš„åˆå§‹åŒ–å’Œé”€æ¯å›è°ƒæ–¹æ³•ã€‚
è¿™æ„å‘³ç€ä½œä¸ºåº”ç”¨å¼€å‘è€…ï¼Œä½ å¯ä»¥ç¼–å†™åº”ç”¨ç±»å¹¶ä½¿ç”¨åä¸º<code>init()</code>çš„åˆå§‹åŒ–å›è°ƒï¼Œè€Œæ— éœ€åœ¨æ¯ä¸ªBeanå®šä¹‰ä¸­é…ç½®<code>init-method="init"</code>å±æ€§ã€‚
Spring IoCå®¹å™¨ä¼šåœ¨åˆ›å»ºBeanæ—¶è°ƒç”¨è¯¥æ–¹æ³•
ï¼ˆå¹¶ä¸”ç¬¦åˆ<a href="https://docs.spring.io/spring-framework/reference/core/beans/factory-nature.html#beans-factory-lifecycle" target="_blank" rel="noopener noreferrer">ä¹‹å‰æè¿°</a>
çš„æ ‡å‡†ç”Ÿå‘½å‘¨æœŸå›è°ƒçº¦å®šï¼‰ã€‚è¿™ä¸ªç‰¹æ€§è¿˜å¯ä»¥å¼ºåˆ¶æ‰§è¡Œåˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•å›è°ƒçš„ä¸€è‡´å‘½åçº¦å®šã€‚</p>
<p>å‡è®¾ä½ çš„åˆå§‹åŒ–å›è°ƒæ–¹æ³•å‘½åä¸º<code>init()</code>ï¼Œé”€æ¯å›è°ƒæ–¹æ³•å‘½åä¸º<code>destroy()</code>ã€‚é‚£ä¹ˆä½ çš„ç±»å°†ç±»ä¼¼äºä»¥ä¸‹ç¤ºä¾‹ä¸­çš„ç±»ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DefaultBlogService</span> <span class="token keyword">implements</span> <span class="token class-name">BlogService</span> <span class="token punctuation">{</span>

	<span class="token keyword">private</span> <span class="token class-name">BlogDao</span> blogDao<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBlogDao</span><span class="token punctuation">(</span><span class="token class-name">BlogDao</span> blogDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>blogDao <span class="token operator">=</span> blogDao<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// è¿™ä¸ªæ–¹æ³•è¢«æ ‡è®°ä¸ºåˆå§‹åŒ–å›è°ƒæ–¹æ³•</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>blogDao <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">"å¿…é¡»è®¾ç½® [blogDao] å±æ€§"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç„¶åä½ å¯ä»¥åœ¨ä¸€ä¸ªç±»ä¼¼äºä»¥ä¸‹ç¤ºä¾‹çš„Beanä¸­ä½¿ç”¨è¯¥ç±»ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">default-init-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>init<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>blogService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.something.DefaultBlogService<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>blogDao<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>blogDao<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>åœ¨é¡¶å±‚<code>&lt;beans/&gt;</code>å…ƒç´ ä¸­æ·»åŠ <code>default-init-method</code>å±æ€§ä¼šå¯¼è‡´Spring IoCå®¹å™¨è¯†åˆ«Beanç±»ä¸­åä¸º<code>init</code>çš„æ–¹æ³•ä½œä¸ºåˆå§‹åŒ–æ–¹æ³•çš„å›è°ƒã€‚
å½“åˆ›å»ºå’Œç»„è£…Beanæ—¶ï¼Œå¦‚æœBeanç±»å…·æœ‰è¿™æ ·çš„æ–¹æ³•ï¼Œå®ƒä¼šåœ¨é€‚å½“çš„æ—¶å€™è¢«è°ƒç”¨ã€‚</p>
<p>ä½ å¯ä»¥ç±»ä¼¼åœ°ï¼ˆåœ¨XMLä¸­ï¼‰é€šè¿‡åœ¨é¡¶å±‚<code>&lt;beans/&gt;</code>å…ƒç´ ä¸Šä½¿ç”¨<code>default-destroy-method</code>å±æ€§æ¥é…ç½®é”€æ¯æ–¹æ³•çš„å›è°ƒã€‚</p>
<p>å¦‚æœç°æœ‰çš„Beanç±»å·²ç»æœ‰äº†ä¸çº¦å®šä¸ç¬¦çš„å›è°ƒæ–¹æ³•çš„åç§°ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨<code>&lt;bean/&gt;</code>æœ¬èº«ä¸Šä½¿ç”¨<code>init-method</code>å’Œ<code>destroy-method</code>
å±æ€§ï¼ˆåœ¨XMLä¸­ï¼‰æ¥è¦†ç›–é»˜è®¤å€¼ï¼ŒæŒ‡å®šæ–¹æ³•çš„åç§°ã€‚</p>
<p>Springå®¹å™¨ä¿è¯åœ¨ä¸ºBeanæä¾›æ‰€æœ‰ä¾èµ–é¡¹ä¹‹åç«‹å³è°ƒç”¨é…ç½®çš„åˆå§‹åŒ–å›è°ƒã€‚ å› æ­¤ï¼Œåˆå§‹åŒ–å›è°ƒåœ¨åŸå§‹Beanå¼•ç”¨ä¸Šè¢«è°ƒç”¨ï¼Œè¿™æ„å‘³ç€AOPæ‹¦æˆªå™¨ç­‰è¿˜æ²¡æœ‰è¢«åº”ç”¨åˆ°Beanä¸Šã€‚
é¦–å…ˆå®Œå…¨åˆ›å»ºç›®æ ‡Beanï¼Œç„¶åå†åº”ç”¨AOPä»£ç†ï¼ˆä¾‹å¦‚ï¼‰åŠå…¶æ‹¦æˆªå™¨é“¾ã€‚ å¦‚æœç›®æ ‡Beanå’Œä»£ç†æ˜¯åˆ†å¼€å®šä¹‰çš„ï¼Œä½ çš„ä»£ç ç”šè‡³å¯ä»¥ä¸åŸå§‹ç›®æ ‡Beanäº¤äº’ï¼Œç»•è¿‡ä»£ç†ã€‚
å› æ­¤ï¼Œå°†æ‹¦æˆªå™¨åº”ç”¨äº<code>init</code>æ–¹æ³•æ˜¯ä¸ä¸€è‡´çš„ï¼Œå› ä¸ºè¿™æ ·åšä¼šå°†ç›®æ ‡Beançš„ç”Ÿå‘½å‘¨æœŸä¸å®ƒçš„ä»£ç†æˆ–æ‹¦æˆªå™¨è€¦åˆåœ¨ä¸€èµ·ï¼Œå½“ä½ çš„ä»£ç ç›´æ¥ä¸åŸå§‹ç›®æ ‡Beanäº¤äº’æ—¶ï¼Œä¼šç•™ä¸‹å¥‡æ€ªçš„è¯­ä¹‰ã€‚</p>
<h3>ç»„åˆå¼ç”Ÿå‘½å‘¨æœŸæœºåˆ¶</h3>
<p>æˆªè‡³Spring 2.5ï¼Œä½ æœ‰ä¸‰ç§é€‰é¡¹æ¥æ§åˆ¶beançš„ç”Ÿå‘½å‘¨æœŸè¡Œä¸ºï¼š</p>
<ul>
<li><a href="https://docs.spring.io/spring-framework/reference/core/beans/factory-nature.html#beans-factory-lifecycle-initializingbean" target="_blank" rel="noopener noreferrer">InitializingBean</a>
å’Œ<a href="https://docs.spring.io/spring-framework/reference/core/beans/factory-nature.html#beans-factory-lifecycle-disposablebean" target="_blank" rel="noopener noreferrer">DisposableBean</a>
å›è°ƒæ¥å£</li>
<li>è‡ªå®šä¹‰<code>init()</code>å’Œ<code>destroy()</code>æ–¹æ³•</li>
<li><code>@PostConstruct</code>å’Œ<code>@PreDestroy</code>æ³¨è§£
<ol>
<li>ä½ å¯ä»¥ç»„åˆè¿™äº›æœºåˆ¶æ¥æ§åˆ¶Beançš„ç”Ÿå‘½å‘¨æœŸè¡Œä¸º</li>
</ol>
</li>
</ul>
<div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p>å¦‚æœä¸ºä¸€ä¸ªBeané…ç½®äº†å¤šç§ç”Ÿå‘½å‘¨æœŸæœºåˆ¶ï¼Œå¹¶ä¸”æ¯ç§æœºåˆ¶éƒ½é…ç½®äº†ä¸åŒçš„æ–¹æ³•åç§°ï¼Œåˆ™æ¯ä¸ªé…ç½®çš„æ–¹æ³•æŒ‰ç…§æœ¬è¯´æ˜åé¢åˆ—å‡ºçš„é¡ºåºè¿è¡Œã€‚
ç„¶è€Œï¼Œå¦‚æœä¸ºè¿™äº›ç”Ÿå‘½å‘¨æœŸæœºåˆ¶ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªé…ç½®äº†ç›¸åŒçš„æ–¹æ³•åç§°ï¼Œä¾‹å¦‚ä½¿ç”¨<code>init()</code>
ä½œä¸ºåˆå§‹åŒ–æ–¹æ³•çš„åç§°ï¼Œåˆ™è¯¥æ–¹æ³•åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œè¯¦ç»†è¯´æ˜å‚è€ƒ <a href="https://docs.spring.io/spring-framework/reference/core/beans/factory-nature.html#beans-factory-lifecycle-default-init-destroy-methods" target="_blank" rel="noopener noreferrer">ä¸Šä¸€èŠ‚</a>ã€‚</p>
</div>
<p>ä¸ºåŒä¸€ä¸ªBeané…ç½®äº†å¤šä¸ªç”Ÿå‘½å‘¨æœŸæœºåˆ¶ï¼Œå¹¶ä¸”ä½¿ç”¨äº†ä¸åŒçš„åˆå§‹åŒ–æ–¹æ³•æ—¶ï¼Œè°ƒç”¨é¡ºåºå¦‚ä¸‹ï¼š</p>
<ol>
<li>ä½¿ç”¨<code>@PostConstruct</code>æ³¨è§£çš„æ–¹æ³•</li>
<li>å®ç°<code>InitializingBean</code>æ¥å£å®šä¹‰çš„<code>afterPropertiesSet()</code>æ–¹æ³•</li>
<li>è‡ªå®šä¹‰é…ç½®çš„<code>init()</code>æ–¹æ³•</li>
</ol>
<p>é”€æ¯æ–¹æ³•çš„è°ƒç”¨é¡ºåºä¹Ÿç±»ä¼¼ï¼š</p>
<ol>
<li>ä½¿ç”¨<code>@PreDestroy</code>æ³¨è§£çš„æ–¹æ³•</li>
<li>å®ç°<code>DisposableBean</code>æ¥å£å®šä¹‰çš„<code>destroy()</code>æ–¹æ³•</li>
<li>è‡ªå®šä¹‰é…ç½®çš„<code>destroy()</code>æ–¹æ³•</li>
</ol>
<h3>å¯åŠ¨å’Œå…³é—­çš„å›è°ƒ</h3>
<p><code>Lifecycle</code>æ¥å£å®šä¹‰äº†ä»»ä½•å…·æœ‰è‡ªèº«ç”Ÿå‘½å‘¨æœŸè¦æ±‚çš„å¯¹è±¡çš„åŸºæœ¬æ–¹æ³•ï¼ˆä¾‹å¦‚å¯åŠ¨å’Œåœæ­¢æŸäº›åå°è¿›ç¨‹ï¼‰ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Lifecycle</span> <span class="token punctuation">{</span>

    <span class="token comment">// å¯åŠ¨æ–¹æ³•</span>
	<span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// åœæ­¢æ–¹æ³•</span>
	<span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// æ˜¯å¦æ­£åœ¨è¿è¡Œ</span>
	<span class="token keyword">boolean</span> <span class="token function">isRunning</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä»»ä½•ç”±Springç®¡ç†çš„å¯¹è±¡éƒ½å¯ä»¥å®ç°<code>Lifecycle</code>æ¥å£ã€‚
ç„¶åï¼Œå½“<code>ApplicationContext</code>æœ¬èº«æ¥æ”¶åˆ°å¯åŠ¨å’Œåœæ­¢ä¿¡å·æ—¶ï¼ˆä¾‹å¦‚ï¼Œåœ¨è¿è¡Œæ—¶è¿›è¡Œåœæ­¢/é‡å¯åœºæ™¯ï¼‰ï¼Œå®ƒä¼šå°†è¿™äº›è°ƒç”¨çº§è”åˆ°è¯¥ä¸Šä¸‹æ–‡ä¸­å®šä¹‰çš„æ‰€æœ‰<code>Lifecycle</code>å®ç°ä¸­ã€‚
å®ƒé€šè¿‡å§”æ‰˜ç»™ä¸€ä¸ª<code>LifecycleProcessor</code>æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">LifecycleProcessor</span> <span class="token keyword">extends</span> <span class="token class-name">Lifecycle</span> <span class="token punctuation">{</span>

    <span class="token comment">// åˆ·æ–°æ—¶è§¦å‘çš„æ–¹æ³•</span>
	<span class="token keyword">void</span> <span class="token function">onRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å…³é—­æ—¶è§¦å‘çš„æ–¹æ³•</span>
	<span class="token keyword">void</span> <span class="token function">onClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¯·æ³¨æ„ï¼Œ<code>LifecycleProcessor</code>æœ¬èº«å°±å®ç°äº†<code>Lifecycle</code>æ¥å£ã€‚å®ƒè¿˜æ·»åŠ äº†å¦å¤–ä¸¤ä¸ªæ–¹æ³•ï¼Œç”¨äºåœ¨ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰è¢«åˆ·æ–°å’Œå…³é—­æ—¶åšå‡ºååº”ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>è¯·æ³¨æ„ï¼Œå¸¸è§„çš„<code>org.springframework.context.Lifecycle</code>æ¥å£æ˜¯ä¸€ä¸ªæ˜ç¡®çš„<code>start</code>å’Œ<code>stop</code>é€šçŸ¥çš„ç®€å•çº¦å®šï¼Œå¹¶ä¸æ„å‘³ç€åœ¨ä¸Šä¸‹æ–‡åˆ·æ–°æ—¶è‡ªåŠ¨å¯åŠ¨ã€‚
ä¸ºäº†å¯¹ç‰¹å®šBeançš„è‡ªåŠ¨å¯åŠ¨è¿›è¡Œç»†ç²’åº¦æ§åˆ¶ï¼ˆåŒ…æ‹¬å¯åŠ¨å’Œåœæ­¢é˜¶æ®µï¼‰ï¼Œå»ºè®®å®ç°æ‰©å±•çš„<code>org.springframework.context.SmartLifecycle</code>æ¥å£ã€‚</p>
<p>æ­¤å¤–ï¼Œè¯·æ³¨æ„ï¼Œ<code>stop</code>é€šçŸ¥ä¸èƒ½ä¿è¯åœ¨é”€æ¯ä¹‹å‰æ‰§è¡Œã€‚
åœ¨æ­£å¸¸å…³é—­æ—¶ï¼Œæ‰€æœ‰<code>Lifecycle</code> Beané¦–å…ˆæ¥æ”¶åˆ°<code>stop</code>é€šçŸ¥ï¼Œç„¶åæ‰ä¼šè¢«ä¼ æ’­åˆ°ä¸€èˆ¬çš„é”€æ¯å›è°ƒã€‚
ç„¶è€Œï¼Œåœ¨ä¸Šä¸‹æ–‡ç”Ÿå‘½å‘¨æœŸä¸­çš„çƒ­åˆ·æ–°æˆ–<code>stop</code>åˆ·æ–°æ—¶ï¼Œåªä¼šè°ƒç”¨é”€æ¯æ–¹æ³•ã€‚</p>
</div>
<p>å¯åŠ¨å’Œå…³é—­è°ƒç”¨çš„é¡ºåºå¯èƒ½éå¸¸é‡è¦ã€‚å¦‚æœä»»ä½•ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´å­˜åœ¨â€œä¾èµ–(depends-on)â€å…³ç³»ï¼Œåˆ™ä¾èµ–æ–¹ä¼šåœ¨å…¶ä¾èµ–é¡¹ä¹‹åå¯åŠ¨ï¼Œå¹¶åœ¨å…¶ä¾èµ–é¡¹ä¹‹å‰åœæ­¢ã€‚
ç„¶è€Œï¼Œæœ‰æ—¶å€™ç›´æ¥çš„ä¾èµ–å…³ç³»æ˜¯æœªçŸ¥çš„ã€‚ä½ å¯èƒ½åªçŸ¥é“æŸç§ç±»å‹çš„å¯¹è±¡åº”è¯¥åœ¨å¦ä¸€ç§ç±»å‹çš„å¯¹è±¡ä¹‹å‰å¯åŠ¨ã€‚
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>SmartLifecycle</code>æ¥å£å®šä¹‰äº†å¦ä¸€ç§é€‰æ‹©ï¼Œå³å…¶çˆ¶æ¥å£<code>Phased</code>ä¸Šå®šä¹‰çš„<code>getPhase()</code>æ–¹æ³•ã€‚ä»¥ä¸‹ä»£ç å±•ç¤ºäº†<code>Phased</code>æ¥å£çš„å®šä¹‰ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Phased</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// è¿”å›ä¸€ä¸ªæ•´æ•°å€¼ï¼Œè¡¨ç¤ºè¯¥å¯¹è±¡çš„å¯åŠ¨å’Œåœæ­¢é¡ºåº</span>
    <span class="token keyword">int</span> <span class="token function">getPhase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸‹é¢åˆ—å‡ºäº†<code>SmartLifecycle</code>æ¥å£çš„å®šä¹‰ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SmartLifecycle</span> <span class="token keyword">extends</span> <span class="token class-name">Lifecycle</span><span class="token punctuation">,</span> <span class="token class-name">Phased</span> <span class="token punctuation">{</span>

    <span class="token comment">// è¿”å›ä¸€ä¸ªbooleanå€¼ï¼Œè¡¨ç¤ºè¯¥å¯¹è±¡æ˜¯å¦åº”è¯¥è‡ªåŠ¨å¯åŠ¨</span>
	<span class="token keyword">boolean</span> <span class="token function">isAutoStartup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// é€šçŸ¥è¯¥å¯¹è±¡å·²è¯·æ±‚åœæ­¢</span>
	<span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯åŠ¨æ—¶ï¼Œ<code>phase</code>æœ€ä½çš„å¯¹è±¡é¦–å…ˆå¯åŠ¨ã€‚åœæ­¢æ—¶ï¼ŒæŒ‰ç›¸åçš„é¡ºåºæ‰§è¡Œã€‚
å› æ­¤ï¼Œå®ç°<code>SmartLifecycle</code>æ¥å£å¹¶ä¸”<code>getPhase()</code>æ–¹æ³•è¿”å›Integer.MIN_VALUEçš„å¯¹è±¡ä¼šæ˜¯æœ€å…ˆå¯åŠ¨å’Œæœ€ååœæ­¢çš„å¯¹è±¡ä¹‹ä¸€ã€‚
åœ¨å¦ä¸€ç«¯ï¼Œå¦‚æœé˜¶æ®µå€¼ä¸ºInteger.MAX_VALUEï¼Œåˆ™è¡¨ç¤ºè¯¥å¯¹è±¡åº”è¯¥æœ€åå¯åŠ¨å¹¶ä¸”æœ€å…ˆåœæ­¢ï¼ˆé€šå¸¸æ˜¯å› ä¸ºå®ƒä¾èµ–äºå…¶ä»–æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼‰ã€‚
åœ¨è€ƒè™‘<code>phase</code>å€¼æ—¶ï¼Œè¿˜è¦çŸ¥é“ä»»ä½•æ²¡æœ‰å®ç°<code>SmartLifecycle</code>æ¥å£çš„â€œæ­£å¸¸â€<code>Lifecycle</code>å¯¹è±¡çš„é»˜è®¤<code>phase</code>æ˜¯0ã€‚
å› æ­¤ï¼Œä»»ä½•è´Ÿçš„<code>phase</code>å€¼è¡¨ç¤ºå¯¹è±¡åº”è¯¥åœ¨è¿™äº›æ ‡å‡†ç»„ä»¶ä¹‹å‰å¯åŠ¨ï¼ˆå¹¶åœ¨å®ƒä»¬ä¹‹ååœæ­¢ï¼‰ã€‚åä¹‹ï¼Œä»»ä½•æ­£çš„<code>phase</code>å€¼ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p>
<p><code>SmartLifecycle</code>å®šä¹‰çš„<code>stop</code>æ–¹æ³•æ¥å—ä¸€ä¸ªå›è°ƒã€‚ ä»»ä½•å®ç°éƒ½å¿…é¡»åœ¨è¯¥å®ç°çš„å…³é—­è¿‡ç¨‹å®Œæˆåè°ƒç”¨è¯¥å›è°ƒçš„<code>run()</code>æ–¹æ³•ã€‚
è¿™ä½¿å¾—åœ¨å¿…è¦æ—¶å¯ä»¥å®ç°å¼‚æ­¥å…³æœºï¼Œå› ä¸º<code>LifecycleProcessor</code>æ¥å£çš„é»˜è®¤å®ç°<code>DefaultLifecycleProcessor</code>ä¼šç­‰å¾…æ¯ä¸ªé˜¶æ®µå†…çš„å¯¹è±¡ç»„è°ƒç”¨è¯¥å›è°ƒï¼Œç›´åˆ°å…¶è¶…æ—¶å€¼ã€‚
æ¯ä¸ªé˜¶æ®µçš„é»˜è®¤è¶…æ—¶æ—¶é—´æ˜¯30ç§’ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨ä¸Šä¸‹æ–‡ä¸­å®šä¹‰ä¸€ä¸ªåä¸º<code>lifecycleProcessor</code>çš„Beanæ¥è¦†ç›–é»˜è®¤çš„ç”Ÿå‘½å‘¨æœŸå¤„ç†å™¨å®ä¾‹ã€‚
å¦‚æœä½ åªæƒ³ä¿®æ”¹è¶…æ—¶æ—¶é—´ï¼Œå®šä¹‰ä»¥ä¸‹å†…å®¹å°±è¶³å¤Ÿäº†ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lifecycleProcessor<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.context.support.DefaultLifecycleProcessor<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- è¶…æ—¶å€¼ï¼Œå•ä½ä¸ºæ¯«ç§’ --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>timeoutPerShutdownPhase<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10000<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å¦‚å‰æ‰€è¿°ï¼Œ<code>LifecycleProcessor</code>æ¥å£è¿˜å®šä¹‰äº†ç”¨äºåˆ·æ–°å’Œå…³é—­ä¸Šä¸‹æ–‡ï¼ˆcontext ï¼‰çš„å›è°ƒæ–¹æ³•ã€‚
åè€…é©±åŠ¨å…³é—­è¿‡ç¨‹ï¼Œå°±åƒæ˜¾å¼è°ƒç”¨äº†<code>stop()</code>æ–¹æ³•ä¸€æ ·ï¼Œä½†å®ƒå‘ç”Ÿåœ¨ä¸Šä¸‹æ–‡å…³é—­æ—¶ã€‚
å¦ä¸€æ–¹é¢ï¼Œâ€œ<code>refresh</code>â€å›è°ƒå®ç°äº†<code>SmartLifecycle</code> Beançš„å¦ä¸€ä¸ªç‰¹æ€§ã€‚
å½“ä¸Šä¸‹æ–‡è¢«åˆ·æ–°ï¼ˆåœ¨æ‰€æœ‰å¯¹è±¡éƒ½è¢«å®ä¾‹åŒ–å’Œåˆå§‹åŒ–ä¹‹åï¼‰æ—¶ï¼Œè¯¥å›è°ƒè¢«è°ƒç”¨ã€‚
æ­¤æ—¶ï¼Œé»˜è®¤çš„ç”Ÿå‘½å‘¨æœŸå¤„ç†å™¨ä¼šæ£€æŸ¥æ¯ä¸ª<code>SmartLifecycle</code>å¯¹è±¡çš„<code>isAutoStartup()</code>æ–¹æ³•è¿”å›çš„å¸ƒå°”å€¼ã€‚
å¦‚æœä¸ºtrueï¼Œè¯¥å¯¹è±¡å°†åœ¨æ­¤æ—¶å¯åŠ¨ï¼Œè€Œä¸æ˜¯ç­‰å¾…ä¸Šä¸‹æ–‡æˆ–è‡ªèº«<code>start()</code>æ–¹æ³•çš„æ˜¾å¼è°ƒç”¨ï¼ˆä¸ä¸Šä¸‹æ–‡åˆ·æ–°ä¸åŒï¼Œä¸Šä¸‹æ–‡çš„å¯åŠ¨ä¸ä¼šè‡ªåŠ¨å‘ç”Ÿåœ¨æ ‡å‡†çš„ä¸Šä¸‹æ–‡å®ç°ä¸­ï¼‰ã€‚
å¦‚å‰æ‰€è¿°ï¼Œ<code>phase</code>å€¼å’Œä»»ä½•"ä¾èµ–"å…³ç³»å†³å®šäº†å¯åŠ¨çš„é¡ºåºã€‚</p>
<h3>åœ¨éWebåº”ç”¨ä¸­ä¼˜é›…åœ°å…³é—­Spring IoCå®¹å™¨</h3>
<div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p>æœ¬èŠ‚ä»…é€‚ç”¨äºéWebåº”ç”¨ã€‚Springçš„åŸºäºWebçš„<code>ApplicationContext</code>å®ç°å·²ç»æœ‰ä»£ç å¯ä»¥åœ¨ç›¸å…³Webåº”ç”¨å…³é—­æ—¶ä¼˜é›…åœ°å…³é—­Spring IoCå®¹å™¨ã€‚</p>
</div>
<p>å¦‚æœä½ åœ¨éWebåº”ç”¨ç¨‹åºç¯å¢ƒä¸­ï¼ˆä¾‹å¦‚ï¼Œåœ¨å®¢æˆ·ç«¯æ¡Œé¢ç¯å¢ƒä¸­ï¼‰ä½¿ç”¨Springçš„IoCå®¹å™¨ï¼Œè¯·å‘JVMæ³¨å†Œä¸€ä¸ªå…³é—­é’©å­ï¼ˆshutdown hookï¼‰ã€‚
è¿™æ ·åšå¯ä»¥ç¡®ä¿ä¼˜é›…åœ°å…³é—­ï¼Œå¹¶è°ƒç”¨ä½ çš„å•ä¾‹Beanä¸Šçš„ç›¸å…³é”€æ¯<code>destroy</code>æ–¹æ³•ï¼Œä»¥é‡Šæ”¾æ‰€æœ‰èµ„æºã€‚ä½ ä»ç„¶å¿…é¡»æ­£ç¡®é…ç½®å’Œå®ç°è¿™äº›é”€æ¯<code>destroy</code>å›è°ƒã€‚</p>
<p>è¦æ³¨å†Œä¸€ä¸ªå…³é—­é’©å­ï¼ˆshutdown hookï¼‰ï¼Œè°ƒç”¨<code>ConfigurableApplicationContext</code>æ¥å£ä¸Šå£°æ˜çš„<code>registerShutdownHook</code>()æ–¹æ³•ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Boot</span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token comment">// åŠ è½½Springé…ç½®æ–‡ä»¶å¹¶åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡</span>
		<span class="token class-name">ConfigurableApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// ä¸ºä¸Šè¿°ä¸Šä¸‹æ–‡æ·»åŠ ä¸€ä¸ªå…³é—­é’©å­...</span>
		ctx<span class="token punctuation">.</span><span class="token function">registerShutdownHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// åº”ç”¨ç¨‹åºåœ¨æ­¤å¤„è¿è¡Œ...</span>

		<span class="token comment">// mainæ–¹æ³•é€€å‡ºå‰ï¼Œé’©å­åœ¨åº”ç”¨å…³é—­ä¹‹å‰è¢«è°ƒç”¨...</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>çº¿ç¨‹å®‰å…¨æ€§å’Œå¯è§æ€§</h3>
<p>Springæ ¸å¿ƒå®¹å™¨ä»¥çº¿ç¨‹å®‰å…¨çš„æ–¹å¼å‘å¸ƒåˆ›å»ºçš„å•ä¾‹å®ä¾‹ï¼Œé€šè¿‡ä¸€ä¸ªå•ä¾‹é”æ¥ä¿æŠ¤è®¿é—®ï¼Œå¹¶ç¡®ä¿åœ¨å…¶ä»–çº¿ç¨‹ä¸­çš„å¯è§æ€§ã€‚</p>
<p>å› æ­¤ï¼Œç”±åº”ç”¨ç¨‹åºæä¾›çš„Beanç±»ä¸å¿…æ‹…å¿ƒå…¶åˆå§‹åŒ–çŠ¶æ€çš„å¯è§æ€§ã€‚
åªè¦å¸¸è§„é…ç½®å­—æ®µä»…åœ¨åˆå§‹åŒ–é˜¶æ®µè¢«ä¿®æ”¹ï¼Œå®ƒä»¬å°±ä¸éœ€è¦è¢«æ ‡è®°ä¸º<code>volatile</code>ï¼Œä»è€Œæä¾›äº†ç±»ä¼¼äº<code>final</code>çš„å¯è§æ€§ä¿è¯ï¼Œ
å³ä½¿æ˜¯å¯¹äºåœ¨åˆå§‹é˜¶æ®µå¯å˜çš„åŸºäºsetterçš„é…ç½®çŠ¶æ€ä¹Ÿæ˜¯å¦‚æ­¤ã€‚
å¦‚æœè¿™äº›å­—æ®µåœ¨Beanåˆ›å»ºé˜¶æ®µä¹‹ååŠå…¶éšåçš„åˆå§‹å‘å¸ƒä¹‹åè¢«æ›´æ”¹ï¼Œåˆ™éœ€è¦å°†å®ƒä»¬å£°æ˜ä¸º<code>volatile</code>æˆ–åœ¨è®¿é—®æ—¶å—åˆ°å…¬å…±é”çš„ä¿æŠ¤ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œåœ¨ä»å®¹å™¨æ–¹é¢è¿›è¡Œå®‰å…¨åˆå§‹å‘å¸ƒåï¼Œå¯¹å•ä¾‹Beanå®ä¾‹ä¸­çš„è¿™ç§é…ç½®çŠ¶æ€è¿›è¡Œå¹¶å‘è®¿é—®
ï¼ˆä¾‹å¦‚æ§åˆ¶å™¨å®ä¾‹æˆ–å­˜å‚¨åº“å®ä¾‹ï¼‰ æ˜¯å®Œå…¨çº¿ç¨‹å®‰å…¨çš„ã€‚è¿™è¿˜åŒ…æ‹¬é€šç”¨çš„å•ä¾‹<code>FactoryBean</code>å®ä¾‹ï¼Œè¿™äº›å®ä¾‹ä¹Ÿåœ¨é€šç”¨å•ä¾‹é”ä¸­è¿›è¡Œå¤„ç†ã€‚</p>
<p>å¯¹äºé”€æ¯å›è°ƒï¼Œé…ç½®çŠ¶æ€ä»ç„¶æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†åœ¨åˆå§‹åŒ–å’Œé”€æ¯ä¹‹é—´ç´¯ç§¯çš„ä»»ä½•è¿è¡Œæ—¶çŠ¶æ€åº”è¯¥ä¿å­˜åœ¨çº¿ç¨‹å®‰å…¨çš„ç»“æ„ä¸­
ï¼ˆæˆ–è€…å¯¹äºç®€å•æƒ…å†µï¼Œä¿å­˜åœ¨<code>volatile</code>å­—æ®µä¸­ï¼‰ï¼Œæ ¹æ®å¸¸è§çš„JavaæŒ‡å¯¼æ–¹é’ˆã€‚</p>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œæ›´æ·±å…¥çš„ç”Ÿå‘½å‘¨æœŸé›†æˆæ¶‰åŠåˆ°è¿è¡Œæ—¶å¯å˜çŠ¶æ€ï¼Œä¾‹å¦‚ä¸€ä¸ªå¯è¿è¡Œå­—æ®µï¼Œè¿™ä¸ªå­—æ®µå°†éœ€è¦å£°æ˜ä¸º<code>volatile</code>ã€‚
è™½ç„¶å¸¸è§çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒéµå¾ªä¸€å®šçš„é¡ºåºï¼Œä¾‹å¦‚ï¼Œå¯åŠ¨å›è°ƒåªä¼šåœ¨å®Œå…¨åˆå§‹åŒ–ä¹‹åå‘ç”Ÿï¼Œè€Œåœæ­¢å›è°ƒåªä¼šåœ¨åˆå§‹å¯åŠ¨ä¹‹åå‘ç”Ÿï¼Œ
ä½†ä¸å¸¸è§çš„åœæ­¢å‰é”€æ¯å®‰æ’æœ‰ä¸€ä¸ªç‰¹æ®Šæƒ…å†µï¼šå¼ºçƒˆå»ºè®®åœ¨ä»»ä½•è¿™æ ·çš„Beanä¸­å†…éƒ¨çŠ¶æ€ä¹Ÿå…è®¸åœ¨æ²¡æœ‰å…ˆå‰åœæ­¢çš„æƒ…å†µä¸‹ç«‹å³è¿›è¡Œé”€æ¯å›è°ƒï¼Œ
å› ä¸ºè¿™å¯èƒ½ä¼šåœ¨å–æ¶ˆå¼•å¯¼æ—¶æˆ–åœ¨ç”±å¦ä¸€ä¸ªbeanå¼•èµ·çš„åœæ­¢è¶…æ—¶çš„æƒ…å†µä¸‹å‘ç”Ÿéå¸¸è§„å…³é—­æ—¶å‘ç”Ÿã€‚</p>
<h2>ApplicationContextAware</h2>
<p>å½“ä¸€ä¸ªç±»å®ç°äº†<code>org.springframework.context.ApplicationContextAware</code>æ¥å£æ—¶ï¼Œ
è¯¥ç±»çš„å®ä¾‹ä¼šå¾—åˆ°å¯¹åº”çš„<code>ApplicationContext</code>å®ä¾‹çš„å¼•ç”¨ã€‚</p>
<p>ä»¥ä¸‹æ˜¯<code>ApplicationContextAware</code>æ¥å£çš„å®šä¹‰ç¤ºä¾‹ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ApplicationContextAware</span> <span class="token punctuation">{</span>

	<span class="token keyword">void</span> <span class="token function">setApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ„å‘³ç€ï¼Œå½“ä¸€ä¸ªBeanå®ç°äº†<code>ApplicationContextAware</code>æ¥å£æˆ– å¼•ç”¨äº†è¯¥æ¥å£çš„å·²çŸ¥å­ç±»ï¼ˆå¦‚<code>ConfigurableApplicationContext</code>ï¼‰ï¼Œ
å®ƒå°±å¯ä»¥é€šè¿‡<code>ApplicationContext</code>æ¥å£æ¥è®¿é—®Springå®¹å™¨çš„å„ç§åŠŸèƒ½ï¼Œ
æ¯”å¦‚è®¿é—®å…¶ä»–Beanã€è·å–æ–‡ä»¶èµ„æºã€å‘å¸ƒäº‹ä»¶ï¼Œä»¥åŠè®¿é—®<code>MessageSource</code>çš„åŠŸèƒ½ã€‚
è¿™äº›é¢å¤–åŠŸèƒ½åœ¨<a href="https://docs.spring.io/spring-framework/reference/core/beans/context-introduction.html" target="_blank" rel="noopener noreferrer">ApplicationContextçš„é™„åŠ åŠŸèƒ½</a>
ä¸­æè¿°ã€‚ ä¸è¿‡ï¼Œé€šå¸¸æƒ…å†µä¸‹ä¸æ¨èè¿‡åº¦ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå› ä¸ºå®ƒä¼šå°†ä»£ç ä¸Springæ¡†æ¶è€¦åˆåœ¨ä¸€èµ·ï¼Œä¸ç¬¦åˆæ§åˆ¶åè½¬çš„åŸåˆ™ã€‚</p>
<p>å¦ä¸€ç§è·å¾—å¯¹<code>ApplicationContext</code>å¼•ç”¨çš„æ–¹å¼æ˜¯é€šè¿‡è‡ªåŠ¨è£…é…ï¼ˆAutowiringï¼‰ã€‚
ä½ å¯ä»¥ä½¿ç”¨<code>@Autowired</code>æ³¨è§£æ¥è‡ªåŠ¨è£…é… ApplicationContextï¼Œè¿™æ ·å°±å¯ä»¥åœ¨éœ€è¦æ—¶è½»æ¾è®¿é—®Springå®¹å™¨çš„åŠŸèƒ½ã€‚
è¯¦ç»†ä¿¡æ¯å¯ä»¥æŸ¥é˜…ä½¿ç”¨<a href="https://docs.spring.io/spring-framework/reference/core/beans/annotation-config/autowired.html" target="_blank" rel="noopener noreferrer">ä½¿ç”¨@Autowired</a>ã€‚</p>
<h2>BeanNameAware</h2>
<p>å½“ä¸€ä¸ªç±»å®ç°äº†<code>org.springframework.beans.factory.BeanNameAware</code>æ¥å£æ—¶ï¼Œ
è¿™ä¸ªç±»çš„å®ä¾‹ä¼šå¾—åˆ°å¯¹åº”çš„Beanåç§°çš„å¼•ç”¨ã€‚</p>
<p>ä»¥ä¸‹æ˜¯<code>BeanNameAware</code>æ¥å£çš„å®šä¹‰ç¤ºä¾‹ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanNameAware</span> <span class="token punctuation">{</span>

	<span class="token keyword">void</span> <span class="token function">setBeanName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å›è°ƒæ–¹æ³•ä¼šåœ¨Beançš„å±æ€§å¡«å……å &amp; åˆå§‹åŒ–å›è°ƒä¹‹å‰ï¼ˆå¦‚<code>InitializingBean.afterPropertiesSet</code>() æˆ– è‡ªå®šä¹‰<code>init</code>æ–¹æ³•ï¼‰è¢«è°ƒç”¨ã€‚
é€šè¿‡å®ç°<code>BeanNameAware</code>æ¥å£ï¼ŒBeanå¯ä»¥åœ¨éœ€è¦æ—¶è·å–è‡ªå·±åœ¨Springå®¹å™¨ä¸­çš„åç§°ï¼Œè¿™åœ¨æŸäº›åœºæ™¯ä¸‹å¯èƒ½ä¼šå¾ˆæœ‰ç”¨ã€‚</p>
<h2>å…¶ä»–Awareæ¥å£</h2>
<p>é™¤äº†ä¹‹å‰è®¨è®ºçš„<code>ApplicationContextAware</code>å’Œ<code>BeanNameAware</code>ï¼ŒSpringè¿˜æä¾›äº†ä¸€ç³»åˆ—å¹¿æ³›çš„<code>Aware</code>å›è°ƒæ¥å£ï¼Œ
è®©Beanå‘å®¹å™¨è¡¨æ˜å®ƒä»¬éœ€è¦æŸç§åŸºç¡€è®¾æ–½çš„ä¾èµ–æ€§ã€‚é€šå¸¸ï¼Œæ¥å£åç§°åæ˜ äº†ä¾èµ–çš„ç±»å‹ã€‚ä»¥ä¸‹è¡¨æ ¼æ€»ç»“äº†æœ€é‡è¦çš„<code>Aware</code>æ¥å£ï¼š</p>
<p>| Aware æ¥å£                         | æ³¨å…¥çš„ä¾èµ–                       | è§£é‡Š                                                                                                                                                                                |
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>Beanä½œç”¨åŸŸï¼ˆScopeï¼‰</title>
      <link>https://www.geekyspace.cn/md/spring-framework/core/beans-scope.html</link>
      <guid>https://www.geekyspace.cn/md/spring-framework/core/beans-scope.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Beanä½œç”¨åŸŸï¼ˆScopeï¼‰</source>
      <description>Beanä½œç”¨åŸŸï¼ˆScopeï¼‰ å½“ä½ åˆ›å»ºä¸€ä¸ªBeanå®šä¹‰æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨åˆ›å»ºBeanå®šä¹‰æ‰€å®šä¹‰ç±»çš„å®é™…å®ä¾‹çš„é…æ–¹ã€‚ å°†Beanå®šä¹‰è§†ä¸ºâ€œé…æ–¹â€çš„æ¦‚å¿µéå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒæ„å‘³ç€ï¼Œå°±åƒä¸€ä¸ªç±»ä¸€æ ·ï¼Œä½ å¯ä»¥ä»ä¸€ä¸ªå•ä¸€çš„â€œé…æ–¹â€ä¸­åˆ›å»ºå¤šä¸ªå¯¹è±¡å®ä¾‹ã€‚ ä½ ä¸ä»…å¯ä»¥æ§åˆ¶Beanå®šä¹‰ä¸­çš„å„ç§ä¾èµ–é¡¹å’Œé…ç½®å€¼ï¼Œè¿˜å¯ä»¥æ§åˆ¶ç”±Beanå®šä¹‰åˆ›å»ºçš„å¯¹è±¡çš„ä½œç”¨åŸŸï¼ˆscopeï¼‰ã€‚ è¿™ç§æ–¹æ³•æ˜¯å¼º...</description>
      <category>Spring</category>
      <pubDate>Wed, 03 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>å½“ä½ åˆ›å»ºä¸€ä¸ªBeanå®šä¹‰æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨åˆ›å»ºBeanå®šä¹‰æ‰€å®šä¹‰ç±»çš„å®é™…å®ä¾‹çš„é…æ–¹ã€‚
å°†Beanå®šä¹‰è§†ä¸ºâ€œé…æ–¹â€çš„æ¦‚å¿µéå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒæ„å‘³ç€ï¼Œå°±åƒä¸€ä¸ªç±»ä¸€æ ·ï¼Œä½ å¯ä»¥ä»ä¸€ä¸ªå•ä¸€çš„â€œé…æ–¹â€ä¸­åˆ›å»ºå¤šä¸ªå¯¹è±¡å®ä¾‹ã€‚</p>
<p>ä½ ä¸ä»…å¯ä»¥æ§åˆ¶Beanå®šä¹‰ä¸­çš„å„ç§ä¾èµ–é¡¹å’Œé…ç½®å€¼ï¼Œè¿˜å¯ä»¥æ§åˆ¶ç”±Beanå®šä¹‰åˆ›å»ºçš„å¯¹è±¡çš„ä½œç”¨åŸŸï¼ˆscopeï¼‰ã€‚
è¿™ç§æ–¹æ³•æ˜¯å¼ºå¤§ä¸”çµæ´»çš„ï¼Œå› ä¸ºä½ å¯ä»¥é€šè¿‡é…ç½®é€‰æ‹©åˆ›å»ºçš„å¯¹è±¡çš„ä½œç”¨åŸŸï¼Œè€Œä¸å¿…åœ¨Javaç±»çº§åˆ«ä¸Šå›ºå®šå¯¹è±¡çš„ä½œç”¨åŸŸã€‚
Beanå®šä¹‰å¯ä»¥æ˜¯å¤šç§ä½œç”¨åŸŸä¹‹ä¸€ã€‚Springæ¡†æ¶æ”¯æŒå…­ç§ä½œç”¨åŸŸï¼Œå…¶ä¸­å››ç§ä»…åœ¨ä½¿ç”¨Webæ„ŸçŸ¥ï¼ˆawareï¼‰çš„<code>ApplicationContext</code>æ—¶æ‰å¯ç”¨ã€‚
ä½ è¿˜å¯ä»¥åˆ›å»º<a href="https://docs.spring.io/spring-framework/reference/core/beans/factory-scopes.html#beans-factory-scopes-custom" target="_blank" rel="noopener noreferrer">è‡ªå®šä¹‰ä½œç”¨åŸŸ</a>ã€‚</p>
<p>| Beanä½œç”¨åŸŸï¼ˆScopeï¼‰ | æè¿°                                   |
|</p>
]]></content:encoded>
      <enclosure url="http://img.geekyspace.cn/pictures/2024/singleton.png" type="image/png"/>
    </item>
    <item>
      <title>Beanå®šä¹‰ç»§æ‰¿</title>
      <link>https://www.geekyspace.cn/md/spring-framework/core/child-bean-definitions.html</link>
      <guid>https://www.geekyspace.cn/md/spring-framework/core/child-bean-definitions.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Beanå®šä¹‰ç»§æ‰¿</source>
      <description>Beanå®šä¹‰ç»§æ‰¿ ä¸€ä¸ªBeanå®šä¹‰å¯ä»¥åŒ…å«å¤§é‡çš„é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ„é€ å‡½æ•°å‚æ•°ã€å±æ€§å€¼ä»¥åŠå®¹å™¨ç‰¹å®šçš„ä¿¡æ¯ï¼Œæ¯”å¦‚åˆå§‹åŒ–æ–¹æ³•ã€é™æ€å·¥å‚æ–¹æ³•åç§°ç­‰ç­‰ã€‚ ä¸€ä¸ªå­Beanå®šä¹‰ä¼šä»çˆ¶å®šä¹‰ä¸­ç»§æ‰¿é…ç½®æ•°æ®ã€‚å­å®šä¹‰å¯ä»¥æ ¹æ®éœ€è¦è¦†ç›–ä¸€äº›å€¼æˆ–æ·»åŠ å…¶ä»–å€¼ã€‚ ä½¿ç”¨çˆ¶å­Beanå®šä¹‰å¯ä»¥èŠ‚çœå¤§é‡çš„è¾“å…¥å·¥ä½œã€‚å®é™…ä¸Šï¼Œè¿™æ˜¯ä¸€ç§æ¨¡æ¿åŒ–çš„å½¢å¼ã€‚ å¦‚æœä½ ä»¥ç¼–ç¨‹æ–¹å¼ä½¿ç”¨ApplicationCon...</description>
      <category>Spring</category>
      <pubDate>Wed, 10 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>ä¸€ä¸ªBeanå®šä¹‰å¯ä»¥åŒ…å«å¤§é‡çš„é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ„é€ å‡½æ•°å‚æ•°ã€å±æ€§å€¼ä»¥åŠå®¹å™¨ç‰¹å®šçš„ä¿¡æ¯ï¼Œæ¯”å¦‚åˆå§‹åŒ–æ–¹æ³•ã€é™æ€å·¥å‚æ–¹æ³•åç§°ç­‰ç­‰ã€‚
ä¸€ä¸ªå­Beanå®šä¹‰ä¼šä»çˆ¶å®šä¹‰ä¸­ç»§æ‰¿é…ç½®æ•°æ®ã€‚å­å®šä¹‰å¯ä»¥æ ¹æ®éœ€è¦è¦†ç›–ä¸€äº›å€¼æˆ–æ·»åŠ å…¶ä»–å€¼ã€‚
ä½¿ç”¨çˆ¶å­Beanå®šä¹‰å¯ä»¥èŠ‚çœå¤§é‡çš„è¾“å…¥å·¥ä½œã€‚å®é™…ä¸Šï¼Œè¿™æ˜¯ä¸€ç§æ¨¡æ¿åŒ–çš„å½¢å¼ã€‚</p>
<p>å¦‚æœä½ ä»¥ç¼–ç¨‹æ–¹å¼ä½¿ç”¨<code>ApplicationContext</code>æ¥å£ï¼Œå­Beanå®šä¹‰ç”±<code>ChildBeanDefinition</code>ç±»è¡¨ç¤ºã€‚
å¤§å¤šæ•°ç”¨æˆ·ä¸ä¼šåœ¨è¿™ä¸ªå±‚é¢ä¸Šç›´æ¥æ“ä½œå®ƒä»¬ã€‚ç›¸åï¼Œä»–ä»¬ä¼šåœ¨è¯¸å¦‚<code>ClassPathXmlApplicationContext</code>ä¹‹ç±»çš„ç±»ä¸­ä»¥å£°æ˜æ€§æ–¹å¼é…ç½®Beanå®šä¹‰ã€‚
å½“ä½ ä½¿ç”¨åŸºäºXMLçš„é…ç½®å…ƒæ•°æ®æ—¶ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨<code>parent</code>å±æ€§æŒ‡å®šçˆ¶Beanæ¥è¡¨ç¤ºå­Beanå®šä¹‰ï¼Œå°†çˆ¶Beanä½œä¸ºæ­¤å±æ€§çš„å€¼ã€‚ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•è¿™æ ·åšï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- æŠ½è±¡çš„çˆ¶Beanå®šä¹‰ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>inheritedTestBean<span class="token punctuation">"</span></span> <span class="token attr-name">abstract</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.beans.TestBean<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- è®¾ç½®nameå±æ€§ä¸ºparent --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>age<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- è®¾ç½®ageå±æ€§ä¸º1 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- ç»§æ‰¿çˆ¶Beanå®šä¹‰çš„å­Bean --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>inheritsWithDifferentClass<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.beans.DerivedTestBean<span class="token punctuation">"</span></span>
		<span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>inheritedTestBean<span class="token punctuation">"</span></span> <span class="token attr-name">init-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>initialize<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>override<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- è¦†ç›–nameå±æ€§ä¸ºoverride --&gt;</span>
	<span class="token comment">&lt;!-- ageå±æ€§çš„å€¼1å°†ä»çˆ¶Beanç»§æ‰¿ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å­Beanå®šä¹‰å¦‚æœæœªæŒ‡å®šBeanç±»ï¼Œåˆ™ä¼šä½¿ç”¨çˆ¶å®šä¹‰ä¸­çš„Beanç±»ï¼Œä½†ä¹Ÿå¯ä»¥è¦†ç›–å®ƒã€‚
åœ¨åä¸€ç§æƒ…å†µä¸‹ï¼Œå­Beanç±»å¿…é¡»ä¸çˆ¶Beanç±»å…¼å®¹ï¼ˆå³ï¼Œå®ƒå¿…é¡»æ¥å—çˆ¶Beançš„å±æ€§å€¼ï¼‰ã€‚</p>
<p>å­Beanå®šä¹‰ä»çˆ¶Beanç»§æ‰¿ä½œç”¨åŸŸï¼ˆScopeï¼‰ã€æ„é€ å‡½æ•°å‚æ•°å€¼ã€å±æ€§å€¼å’Œæ–¹æ³•é‡å†™ï¼Œå¹¶æœ‰æ·»åŠ æ–°å€¼çš„é€‰é¡¹ã€‚
ä½ æŒ‡å®šçš„ä»»ä½•ä½œç”¨åŸŸã€åˆå§‹åŒ–æ–¹æ³•ã€é”€æ¯ï¼ˆdestroyï¼‰æ–¹æ³•æˆ–é™æ€ï¼ˆstaticï¼‰å·¥å‚æ–¹æ³•è®¾ç½®éƒ½ä¼šè¦†ç›–ç›¸åº”çš„çˆ¶è®¾ç½®ã€‚</p>
<p>å‰©ä½™çš„è®¾ç½®å§‹ç»ˆæ¥è‡ªäºå­Beanå®šä¹‰ï¼šä¾èµ–ï¼ˆdepends onï¼‰ã€è‡ªåŠ¨æ³¨å…¥ï¼ˆautowireï¼‰æ¨¡å¼ã€ä¾èµ–æ£€æŸ¥ã€singletonä»¥åŠæ‡’åŠ è½½ï¼ˆlazy initï¼‰ã€‚</p>
<p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œé€šè¿‡ä½¿ç”¨<code>abstract</code>å±æ€§æ˜¾å¼åœ°å°†çˆ¶Beanå®šä¹‰æ ‡è®°ä¸ºæŠ½è±¡ã€‚
å¦‚æœçˆ¶å®šä¹‰æ²¡æœ‰æŒ‡å®šç±»ï¼Œåˆ™éœ€è¦æ˜¾å¼åœ°å°†çˆ¶Beanå®šä¹‰æ ‡è®°ä¸ºæŠ½è±¡ï¼Œå¦‚ä¸‹é¢çš„ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- æŠ½è±¡çš„çˆ¶Beanå®šä¹‰ï¼ŒæœªæŒ‡å®šç±» --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>inheritedTestBeanWithoutClass<span class="token punctuation">"</span></span> <span class="token attr-name">abstract</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>age<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- ç»§æ‰¿çˆ¶Beanå®šä¹‰çš„å­Bean --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>inheritsWithClass<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.beans.DerivedTestBean<span class="token punctuation">"</span></span>
      <span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>inheritedTestBeanWithoutClass<span class="token punctuation">"</span></span> <span class="token attr-name">init-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>initialize<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>override<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- è¦†ç›–nameå±æ€§ä¸ºoverride --&gt;</span>
    <span class="token comment">&lt;!-- age å±æ€§å°†ç»§æ‰¿çˆ¶Beanå®šä¹‰ä¸­çš„å€¼1 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>çˆ¶Beanå®šä¹‰ä¸èƒ½å•ç‹¬å®ä¾‹åŒ–ï¼Œå› ä¸ºå®ƒæ˜¯ä¸å®Œæ•´çš„ï¼Œå¹¶ä¸”ä¹Ÿæ˜ç¡®æ ‡è®°ä¸º<code>abstract</code>ã€‚
å½“ä¸€ä¸ªå®šä¹‰æ˜¯<code>abstract</code>çš„æ—¶å€™ï¼Œå®ƒåªèƒ½ä½œä¸ºçº¯æ¨¡æ¿Beanå®šä¹‰ä½¿ç”¨ï¼Œç”¨ä½œå­å®šä¹‰çš„çˆ¶å®šä¹‰ã€‚
å°è¯•å•ç‹¬ä½¿ç”¨è¿™æ ·çš„<code>abstract</code>çˆ¶Beanï¼Œé€šè¿‡å°†å…¶ä½œä¸ºå¦ä¸€ä¸ªBeançš„<code>ref</code>å±æ€§å¼•ç”¨æˆ–è€…æ˜¾å¼åœ°ä½¿ç”¨<code>getBean()</code>æ–¹æ³•è°ƒç”¨çˆ¶Beançš„IDï¼Œéƒ½ä¼šè¿”å›é”™è¯¯ã€‚
åŒæ ·ï¼Œå®¹å™¨çš„å†…éƒ¨<code>preInstantiateSingletons()</code>æ–¹æ³•ä¼šå¿½ç•¥é‚£äº›è¢«å®šä¹‰ä¸ºæŠ½è±¡çš„Beanå®šä¹‰ã€‚</p>
<div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p><code>ApplicationContext</code> é»˜è®¤é¢„è®¾äº†æ‰€æœ‰çš„å•ä¾‹Beanã€‚å› æ­¤ï¼Œé‡è¦çš„æ˜¯ï¼ˆè‡³å°‘å¯¹äºå•ä¾‹Beanæ¥è¯´ï¼‰ï¼Œ
å¦‚æœä½ æœ‰ä¸€ä¸ªï¼ˆçˆ¶ï¼‰Beanå®šä¹‰ï¼Œä½ æ‰“ç®—åªä½œä¸ºæ¨¡æ¿ä½¿ç”¨ï¼Œå¹¶ä¸”è¿™ä¸ªå®šä¹‰æŒ‡å®šäº†ä¸€ä¸ªç±»ï¼Œä½ å¿…é¡»ç¡®ä¿å°†<code>abstract</code>å±æ€§è®¾ç½®ä¸º
trueï¼Œå¦åˆ™åº”ç”¨ä¸Šä¸‹æ–‡å°†å°è¯•é¢„å®åŒ–<code>abstract</code> Beanã€‚</p>
</div>
]]></content:encoded>
    </item>
    <item>
      <title>IoC å®¹å™¨ï¼ˆContainerï¼‰</title>
      <link>https://www.geekyspace.cn/md/spring-framework/core/ioc-container.html</link>
      <guid>https://www.geekyspace.cn/md/spring-framework/core/ioc-container.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">IoC å®¹å™¨ï¼ˆContainerï¼‰</source>
      <description>IoC å®¹å™¨ï¼ˆContainerï¼‰ æ¦‚è¿° Spring IoCï¼ˆæ§åˆ¶åè½¬ï¼‰å®¹å™¨æ˜¯Springæ¡†æ¶çš„æ ¸å¿ƒã€‚ org.springframework.context.ApplicationContextæ¥å£ä»£è¡¨Spring IoCå®¹å™¨ï¼Œè´Ÿè´£å®ä¾‹åŒ–ã€é…ç½®å’Œç»„è£…Beanã€‚ Springæä¾›äº†å‡ ä¸ª ApplicationContext æ¥å£çš„å®ç°ï¼Œåœ¨ç‹¬ç«‹åº”ç”¨ç¨‹åº...</description>
      <category>Spring</category>
      <pubDate>Mon, 18 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>æ¦‚è¿°</h2>
<blockquote>
<p>Spring IoCï¼ˆæ§åˆ¶åè½¬ï¼‰å®¹å™¨æ˜¯Springæ¡†æ¶çš„æ ¸å¿ƒã€‚
<code>org.springframework.context.ApplicationContext</code>æ¥å£ä»£è¡¨Spring IoCå®¹å™¨ï¼Œè´Ÿè´£å®ä¾‹åŒ–ã€é…ç½®å’Œç»„è£…<code>Bean</code>ã€‚</p>
</blockquote>
<p>Springæä¾›äº†å‡ ä¸ª ApplicationContext æ¥å£çš„å®ç°ï¼Œåœ¨ç‹¬ç«‹åº”ç”¨ç¨‹åºä¸­ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ï¼š</p>
<ul>
<li><a href="https://docs.spring.io/spring-framework/docs/6.1.5/javadoc-api/org/springframework/context/support/ClassPathXmlApplicationContext.html" target="_blank" rel="noopener noreferrer">ClassPathXmlApplicationContext</a></li>
<li><a href="https://docs.spring.io/spring-framework/docs/6.1.5/javadoc-api/org/springframework/context/support/FileSystemXmlApplicationContext.html" target="_blank" rel="noopener noreferrer">FileSystemXmlApplicationContext</a></li>
<li>ç­‰ç­‰</li>
</ul>
<p><strong>æ”¯æŒä»¥XMLã€Javaæ³¨é‡Šæˆ–Javaä»£ç ä½œä¸ºé…ç½®å…ƒæ•°æ®çš„æ ¼å¼</strong></p>
<p>è™½ç„¶<code>XML</code>ä¸€ç›´æ˜¯å®šä¹‰é…ç½®å…ƒæ•°æ®çš„ä¼ ç»Ÿæ ¼å¼ï¼Œ ä½†ä½ å¯ä»¥é€šè¿‡æä¾›å°‘é‡çš„<code>XML</code>é…ç½®æ¥æŒ‡å®šå®¹å™¨ä½¿ç”¨<code>Javaæ³¨è§£</code>æˆ–<code>Javaä»£ç </code>ä½œä¸ºå…ƒæ•°æ®æ ¼å¼ã€‚
ä»¥å£°æ˜å¼æ–¹å¼å¯ç”¨å¯¹è¿™äº›å…ƒæ•°æ®æ ¼å¼çš„æ”¯æŒï¼Œä»è€Œæ›´çµæ´»åœ°å®šä¹‰åº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ã€‚</p>
<p><strong>ä¸ºWebåº”ç”¨ç¨‹åºæä¾›æ–¹ä¾¿çš„ApplicationContextå®ä¾‹åŒ–</strong></p>
<p>åœ¨å¤§å¤šæ•°åº”ç”¨åœºæ™¯ä¸­ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™ä»£ç æ¥å®ä¾‹åŒ–<strong>Spring IoC</strong>å®¹å™¨ï¼›
ä¾‹å¦‚ï¼šåœ¨Webåº”ç”¨åœºæ™¯ä¸­ï¼Œé€šå¸¸åªéœ€è¦åœ¨åº”ç”¨ç¨‹åºçš„<code>web.xml</code>æ–‡ä»¶ä¸­ç¼–å†™ 8
è¡Œï¼ˆæˆ–æ›´å¤šï¼‰<a href="https://docs.spring.io/spring-framework/reference/core/beans/context-introduction.html#context-create" target="_blank" rel="noopener noreferrer">æ¨¡æ¿å¼çš„Webæè¿°ç¬¦</a>
å³å¯åˆå§‹åŒ–<code>ApplicationContext</code></p>
<p><strong>è§£æSpringæ¡†æ¶çš„å·¥ä½œåŸç†ï¼š<mark>åº”ç”¨ç¨‹åºç±»</mark>ä¸<mark>é…ç½®å…ƒæ•°æ®</mark>çš„æ•´åˆ</strong></p>
<p>ä¸‹å›¾è¡¨å±•ç¤ºäº†Springæ¡†æ¶çš„å·¥ä½œåŸç†é«˜å±‚è§†å›¾ã€‚é€šè¿‡å°†ä½ çš„åº”ç”¨ç¨‹åºç±»ä¸é…ç½®å…ƒæ•°æ®ç»“åˆèµ·æ¥ï¼Œ
ä¸€æ—¦<code>ApplicationContext</code>è¢«åˆ›å»ºå’Œåˆå§‹åŒ–ï¼Œä½ å°±è·å¾—äº†ä¸€ä¸ªå®Œå…¨é…ç½®ä¸”å¯æ‰§è¡Œçš„ç³»ç»Ÿæˆ–åº”ç”¨ç¨‹åºã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/202403181756387.png" alt="Spring IoCå®¹å™¨" tabindex="0" loading="lazy"><figcaption>Spring IoCå®¹å™¨</figcaption></figure>
<h2>é…ç½®å…ƒæ•°æ®</h2>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒSpring IoCå®¹å™¨æ¶ˆè´¹é…ç½®å…ƒæ•°æ®ã€‚
è¿™ç§é…ç½®å…ƒæ•°æ®ä»£è¡¨äº†ä½ ä½œä¸ºä¸€ä¸ªåº”ç”¨å¼€å‘è€…ï¼Œå¦‚ä½•å‘Šè¯‰Springå®¹å™¨åœ¨ä½ çš„åº”ç”¨ä¸­å®ä¾‹åŒ–ã€é…ç½®å’Œç»„è£…å¯¹è±¡ã€‚</p>
<div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p><strong>æ³¨æ„âš ï¸</strong>ï¼šSpring IoCå®¹å™¨æœ¬èº«ä¸å®é™…é…ç½®å…ƒæ•°æ®çš„ç¼–å†™æ ¼å¼å®Œå…¨è§£è€¦ã€‚
å¦‚ä»Šï¼Œè®¸å¤šå¼€å‘è€…é€‰æ‹©ä½¿ç”¨<a href="https://docs.spring.io/spring-framework/reference/core/beans/java.html" target="_blank" rel="noopener noreferrer">åŸºäºJavaçš„å®¹å™¨é…ç½®</a>
æ¥æ„å»ºä»–ä»¬çš„Springåº”ç”¨ç¨‹åºã€‚</p>
</div>
<p>æœ‰å…³åœ¨<code>Spring</code>å®¹å™¨ä¸­ä½¿ç”¨å…¶ä»–å½¢å¼çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œå‚é˜…ï¼š</p>
<ul>
<li><a href="https://docs.spring.io/spring-framework/reference/core/beans/dependencies/factory-collaborators.html" target="_blank" rel="noopener noreferrer">åŸºäºXMLçš„å®¹å™¨é…ç½®</a></li>
<li><a href="https://docs.spring.io/spring-framework/reference/core/beans/annotation-config.html" target="_blank" rel="noopener noreferrer">åŸºäºæ³¨è§£çš„å®¹å™¨é…ç½®</a>ï¼ˆSpring
2.5å¼€å§‹æ”¯æŒï¼‰</li>
<li><a href="https://docs.spring.io/spring-framework/reference/core/beans/java.html" target="_blank" rel="noopener noreferrer">åŸºäºJavaçš„å®¹å™¨é…ç½®</a>ï¼ˆSpring
3.0å¼€å§‹æ”¯æŒï¼›å‚é˜… <a href="https://docs.spring.io/spring-framework/docs/6.1.5/javadoc-api/org/springframework/context/annotation/Configuration.html" target="_blank" rel="noopener noreferrer">@Configuration</a>, <a href="https://docs.spring.io/spring-framework/docs/6.1.5/javadoc-api/org/springframework/context/annotation/Bean.html" target="_blank" rel="noopener noreferrer">@Bean</a>,
<a href="https://docs.spring.io/spring-framework/docs/6.1.5/javadoc-api/org/springframework/context/annotation/Import.html" target="_blank" rel="noopener noreferrer">@Import</a>,
å’Œ <a href="https://docs.spring.io/spring-framework/docs/6.1.5/javadoc-api/org/springframework/context/annotation/DependsOn.html" target="_blank" rel="noopener noreferrer">@DependsOn</a>
æ³¨è§£ï¼‰</li>
</ul>
<p>Springçš„é…ç½®åŒ…å«è‡³å°‘ä¸€ä¸ªï¼Œé€šå¸¸æ˜¯å¤šä¸ª<code>&lt;bean&gt;</code>å…ƒç´ ã€‚å®¹å™¨å¿…é¡»ç®¡ç†è¿™äº›å®šä¹‰çš„beanã€‚</p>
<ul>
<li>XMLé…ç½®ï¼šå°†è¿™äº›Beané…ç½®ä¸ºé¡¶å±‚ <code>&lt;beans/&gt;</code> å…ƒç´ å†…çš„ <code>&lt;bean/&gt;</code> å…ƒç´ </li>
<li>Javaé…ç½®ï¼šå°†è¿™äº›Beané…ç½®ä¸º<code>@Configuration</code>ç±»ä¸­çš„<code>@Bean</code>æ³¨è§£çš„æ–¹æ³•</li>
</ul>
<p>è¿™äº›Beançš„å®šä¹‰å¯¹åº”äºæ„æˆåº”ç”¨ç¨‹åºçš„å®é™…å¯¹è±¡ï¼Œ
å¦‚æœåŠ¡å±‚å¯¹è±¡ï¼ŒæŒä¹…å±‚å¯¹è±¡ï¼ˆDaoï¼‰ï¼Œè¡¨ç¤ºå±‚å¯¹è±¡ï¼ˆWebæ§åˆ¶å™¨ï¼‰ï¼ŒåŸºç¡€è®¾æ–½å¯¹è±¡ï¼ˆJPA EntityManagerFactoryï¼‰ï¼ŒJMSé˜Ÿåˆ—ç­‰ã€‚
é€šå¸¸ï¼Œäººä»¬ä¸ä¼šåœ¨å®¹å™¨ä¸­é…ç½®ç»†ç²’åº¦çš„<code>domain</code>å¯¹è±¡ï¼Œå› ä¸ºåˆ›å»ºå’ŒåŠ è½½<code>domain</code>å¯¹è±¡çš„é€šå¸¸æ˜¯<code>repository</code>å’Œ<code>service</code>å±‚é€»è¾‘çš„è´£ä»»ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºäº†åŸºäºXMLçš„é…ç½®å…ƒæ•°æ®çš„åŸºæœ¬ç»“æ„ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>...<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>...<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>(1) (2)
        <span class="token comment">&lt;!-- è¿™ä¸ªbeançš„åä½œè€…å’Œé…ç½®åœ¨è¿™é‡Œ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>...<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>...<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- è¿™ä¸ªbeançš„åä½œè€…å’Œé…ç½®åœ¨è¿™é‡Œ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- æ›´å¤šbean å®šä¹‰åœ¨è¿™é‡Œ --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol>
<li><code>id</code>å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨äº<mark>å”¯ä¸€æ ‡è¯†</mark>Bean</li>
<li><code>class</code>å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨äºæŒ‡å®šBeançš„<mark>å®Œæ•´ç±»å</mark>ï¼ˆåŒ…æ‹¬åŒ…åï¼‰</li>
</ol>
<p><code>id</code>å±æ€§çš„å€¼å¯ä»¥ç”¨æ¥æŒ‡ä»£å…¶ä»–Beançš„<code>ref</code>å±æ€§ï¼Œä»è€Œå®ç°Beanä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚
å‚é˜… <a href="https://docs.spring.io/spring-framework/reference/core/beans/dependencies.html" target="_blank" rel="noopener noreferrer">ä¾èµ–</a>ã€‚</p>
<h2>å®ä¾‹åŒ–å®¹å™¨</h2>
<p>æä¾›ç»™<code>ApplicationContext</code>
æ„é€ å‡½æ•°çš„ä¸€æ¡æˆ–å¤šæ¡è·¯å¾„æ˜¯<mark>èµ„æºå­—ç¬¦ä¸²</mark>ï¼Œå®ƒè®©å®¹å™¨ä»å„ç§å¤–éƒ¨èµ„æºï¼ˆå¦‚æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€Java <code>CLASSPATH</code>
ç­‰ï¼‰åŠ è½½é…ç½®å…ƒæ•°æ®ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"services.xml"</span><span class="token punctuation">,</span> <span class="token string">"daos.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p>äº†è§£æ›´å¤šå…³äº<a href="https://docs.spring.io/spring-framework/reference/core/resources.html" target="_blank" rel="noopener noreferrer">èµ„æºåŠ è½½</a>çš„ä¿¡æ¯ï¼›
å®ƒæä¾›äº†ä¸€ç§ç®€å•çš„æ–¹æ³•ï¼Œå¯ä»¥ä»<code>URI</code>è¯­æ³•ä¸­å®šä¹‰çš„ä½ç½®è¯»å–<code>InputStream</code>ã€‚ ç‰¹åˆ«æ˜¯ï¼Œ<code>Resource</code>è·¯å¾„è¢«ç”¨æ¥æ„å»ºåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ï¼Œ å¦‚
<a href="https://docs.spring.io/spring-framework/reference/core/resources.html#resources-app-ctx" target="_blank" rel="noopener noreferrer">Application Contextå’Œèµ„æºè·¯å¾„</a>
ä¸­æ‰€è¿°ã€‚</p>
</div>
<p>ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†<strong>æœåŠ¡å±‚å¯¹è±¡</strong><code>services.xml</code> é…ç½®æ–‡ä»¶ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans
		https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- services --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>petStore<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.samples.jpetstore.services.PetStoreServiceImpl<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>accountDao<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>accountDao<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>itemDao<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>itemDao<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- è¿™ä¸ªbeançš„åä½œè€…å’Œé…ç½®åœ¨è¿™é‡Œ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- æ›´å¤šæœåŠ¡çš„bean å®šä¹‰åœ¨è¿™é‡Œ --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤º<strong>æ•°æ®è®¿é—®å¯¹è±¡</strong>ï¼ˆdata access objectï¼‰<code>daos.xml</code> æ–‡ä»¶ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans
		https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>accountDao<span class="token punctuation">"</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.samples.jpetstore.dao.jpa.JpaAccountDao<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- è¿™ä¸ªbeançš„åä½œè€…å’Œé…ç½®åœ¨è¿™é‡Œ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>itemDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.samples.jpetstore.dao.jpa.JpaItemDao<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- è¿™ä¸ªbeançš„åä½œè€…å’Œé…ç½®åœ¨è¿™é‡Œ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- æ›´å¤šæ•°æ®è®¿é—®å¯¹è±¡çš„bean å®šä¹‰åœ¨è¿™é‡Œ --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>åœ¨å‰é¢çš„ç¤ºä¾‹ä¸­ï¼ŒæœåŠ¡å±‚ç”± <code>PetStoreServiceImpl</code> ç±»å’Œä¸¤ä¸ªç±»å‹ä¸º <code>JpaAccountDao</code> å’Œ <code>JpaItemDao</code> çš„æ•°æ®è®¿é—®å¯¹è±¡ç»„æˆï¼ˆåŸºäºJPAå¯¹è±¡-å…³ç³»æ˜ å°„æ ‡å‡†ï¼‰ã€‚</p>
<ul>
<li><code>property name</code> å…ƒç´ æŒ‡çš„æ˜¯<code>JavaBean</code>å±æ€§çš„åç§°</li>
<li><code>ref</code> å…ƒç´ æŒ‡çš„æ˜¯å¼•ç”¨å¦ä¸€ä¸ª<code>Bean</code>å®šä¹‰çš„åç§°</li>
</ul>
<p><code>id</code> å’Œ <code>ref</code>å…ƒç´ ä¹‹é—´çš„è¿™ç§è”ç³»ï¼Œè¡¨è¾¾äº†åä½œå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚
æœ‰å…³é…ç½®å¯¹è±¡ä¾èµ–é¡¹çš„è¯¦ç»†ä¿¡æ¯ï¼Œå‚é˜… <a href="https://docs.spring.io/spring-framework/reference/core/beans/dependencies.html" target="_blank" rel="noopener noreferrer">ä¾èµ–</a>ã€‚</p>
<h2>ä½¿ç”¨å®¹å™¨</h2>
<p><code>ApplicationContext</code>æ˜¯ä¸€ä¸ªé«˜çº§å·¥å‚çš„æ¥å£ï¼Œèƒ½å¤Ÿç»´æŠ¤ä¸åŒBeanåŠå…¶ä¾èµ–å…³ç³»çš„æ³¨å†Œè¡¨ã€‚
é€šè¿‡ä½¿ç”¨æ–¹æ³• <code>T getBean(String name, Class&lt;T&gt; requiredType)</code>ï¼Œä½ å¯ä»¥æ£€ç´¢åˆ°Beançš„å®ä¾‹ã€‚</p>
<p><code>ApplicationContext</code>å¯ä»¥è®©ä½ è¯»å–Beanå®šä¹‰ï¼ˆdefinitionï¼‰å¹¶è®¿é—®å®ƒä»¬ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// åˆ›å»ºå’Œé…ç½®Bean</span>
<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"services.xml"</span><span class="token punctuation">,</span> <span class="token string">"daos.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ£€ç´¢é…ç½®çš„å®ä¾‹</span>
<span class="token class-name">PetStoreService</span> service <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"petStore"</span><span class="token punctuation">,</span> <span class="token class-name">PetStoreService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ä½¿ç”¨é…ç½®çš„å®ä¾‹</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> userList <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">getUsernameList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>ä¸ç›´æ¥ä¾èµ–äºSpringçš„API</strong></p>
<blockquote>
<p>ç†æƒ³æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºä»£ç ä¸åº”è¯¥ç›´æ¥ä¾èµ–äºSpringçš„APIï¼Œè€Œæ˜¯é€šè¿‡å…ƒæ•°æ®ï¼ˆå¦‚è‡ªåŠ¨è£…é…<code>@Autowired</code>æ³¨è§£ï¼‰å£°æ˜å¯¹ç‰¹å®šBeançš„ä¾èµ–ã€‚</p>
</blockquote>
<p>è™½ç„¶ ApplicationContext æ¥å£æä¾›äº†ä¸€äº›æ£€ç´¢ Bean çš„æ–¹æ³•ï¼Œå¦‚ getBean() ç­‰ï¼Œä½†åœ¨è®¾è®¡ä¸Šï¼Œåº”è¯¥é¿å…ç›´æ¥ä¾èµ–è¿™äº›æ–¹æ³•ã€‚</p>
<p>ä¾‹å¦‚ï¼ŒSpringä¸Webæ¡†æ¶çš„é›†æˆä¸ºå„ç§<strong>Webæ¡†æ¶ç»„ä»¶</strong>ï¼ˆå¦‚Controlleræ§åˆ¶å™¨å’ŒJSFç®¡ç†çš„Beanï¼‰æä¾›äº†ä¾èµ–æ³¨å…¥çš„èƒ½åŠ›ï¼Œ
ä½¿å¾—ä½ å¯ä»¥é€šè¿‡å…ƒæ•°æ®ï¼ˆå¦‚<code>@Autowired</code>æ³¨è§£ï¼‰å£°æ˜å¯¹ç‰¹å®š<code>Bean</code>çš„ä¾èµ–ï¼Œè€Œä¸å¿…ç›´æ¥è°ƒç”¨<code>getBean()</code>ç­‰æ–¹æ³•ã€‚
è¿™æ ·å¯ä»¥ä½¿ä»£ç æ›´åŠ æ¨¡å—åŒ–ã€å¯ç»´æŠ¤æ€§æ›´é«˜ã€‚</p>
]]></content:encoded>
      <enclosure url="https://img.geekyspace.cn/pictures/2024/202403181756387.png" type="image/png"/>
    </item>
    <item>
      <title>Spring Framework æ¦‚è¿°</title>
      <link>https://www.geekyspace.cn/md/spring-framework/overview/</link>
      <guid>https://www.geekyspace.cn/md/spring-framework/overview/</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Spring Framework æ¦‚è¿°</source>
      <description>Spring Framework æ¦‚è¿° Spring Framework ç®€ä»‹ Springæ˜¯ä¸€ä¸ªå¼€æºã€è½»é‡çº§ã€ä¾èµ–æ³¨å…¥(DI)å®¹å™¨å’Œæ¡†æ¶ï¼Œç”¨äºæ„å»ºJavaä¼ä¸šåº”ç”¨ç¨‹åºã€‚ Spring å®˜ç½‘ï¼šspring.io Spring ä¸­æ–‡ç½‘ï¼šspringdoc.cn ä¸ºä»€ä¹ˆä½¿ç”¨Springï¼Ÿ å®˜ç½‘è§£é‡Šï¼šwhy-spring Springè®©Javaç¼–ç¨‹å˜å¾—æ›´å¿«ã€...</description>
      <category>Spring</category>
      <pubDate>Fri, 15 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>Spring Framework ç®€ä»‹</h2>
<p>Springæ˜¯ä¸€ä¸ªå¼€æºã€è½»é‡çº§ã€ä¾èµ–æ³¨å…¥(DI)å®¹å™¨å’Œæ¡†æ¶ï¼Œç”¨äºæ„å»ºJavaä¼ä¸šåº”ç”¨ç¨‹åºã€‚</p>
<ul>
<li>Spring å®˜ç½‘ï¼š<a href="https://docs.spring.io/spring-framework/reference/" target="_blank" rel="noopener noreferrer">spring.io</a></li>
<li>Spring ä¸­æ–‡ç½‘ï¼š<a href="https://springdoc.cn/spring/" target="_blank" rel="noopener noreferrer">springdoc.cn</a></li>
</ul>
<h2>ä¸ºä»€ä¹ˆä½¿ç”¨Springï¼Ÿ</h2>
<blockquote>
<p>å®˜ç½‘è§£é‡Šï¼š<a href="https://spring.io/why-spring" target="_blank" rel="noopener noreferrer">why-spring</a></p>
<p>Springè®©Javaç¼–ç¨‹å˜å¾—æ›´å¿«ã€æ›´å®¹æ˜“ã€æ›´å®‰å…¨ã€‚
Springå¯¹é€Ÿåº¦ã€ç®€å•æ€§å’Œç”Ÿäº§åŠ›çš„å…³æ³¨ä½¿å…¶æˆä¸ºä¸–ç•Œä¸Šæœ€å—æ¬¢è¿çš„Javaæ¡†æ¶ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬ä½¿ç”¨äº†è®¸å¤šSpringæ¡†æ¶æä¾›çš„å·¥å…·ï¼Œå¹¶å—ç›Šäºè®¸å¤š<mark>å¼€ç®±å³ç”¨</mark>çš„è§£å†³æ–¹æ¡ˆï¼Œ
æ— éœ€æ‹…å¿ƒç¼–å†™å¤§é‡é¢å¤–çš„ä»£ç ï¼Œå› æ­¤è¿™ç¡®å®ä¸ºæˆ‘ä»¬èŠ‚çœäº†æ—¶é—´å’Œç²¾åŠ›ã€‚</p>
<h2>æ ¸å¿ƒæ€æƒ³</h2>
<p>Springçš„æ ¸å¿ƒæ€æƒ³æ˜¯ <strong>æ§åˆ¶åè½¬ï¼ˆIOCï¼‰</strong> å’Œ <strong>é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰</strong>ã€‚</p>
<p><strong>æ§åˆ¶åè½¬ï¼ˆIoCï¼‰</strong></p>
<p>æ§åˆ¶åè½¬æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒå°†å¯¹è±¡çš„åˆ›å»ºå’Œå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»çš„ç®¡ç†äº¤ç»™äº†Spring IoCå®¹å™¨ã€‚
åœ¨ä¼ ç»Ÿçš„å¼€å‘æ¨¡å¼ä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºå’Œå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»çš„ç®¡ç†éƒ½æ˜¯ç”±ç¨‹åºå‘˜æ¥å®Œæˆçš„ã€‚</p>
<p><strong>é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰</strong></p>
<p>é¢å‘åˆ‡é¢ç¼–ç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå®ƒå°†ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘å’Œç³»ç»Ÿçº§æœåŠ¡ï¼ˆå¦‚æ—¥å¿—ï¼Œäº‹åŠ¡ï¼Œå®‰å…¨ç­‰ï¼‰åˆ†å¼€ï¼Œé€šè¿‡æ¨ªåˆ‡å…³æ³¨ç‚¹çš„æ–¹å¼æ¥è§£è€¦ã€‚
åœ¨ä¼ ç»Ÿçš„å¼€å‘æ¨¡å¼ä¸­ï¼Œä¸šåŠ¡é€»è¾‘å’Œç³»ç»Ÿçº§æœåŠ¡æ˜¯æ··åœ¨ä¸€èµ·çš„ï¼Œè¿™æ ·ä¼šå¯¼è‡´ä»£ç çš„å¤æ‚æ€§å¢åŠ ã€‚</p>
<h2>ç‰ˆæœ¬æ”¯æŒ</h2>
<p>æˆ‘ä»¬å»ºè®®å°½å¯èƒ½ä»Maven Centralå‡çº§åˆ°æœ€æ–°çš„<strong>Spring Framework 6.0.x / 5.3.x</strong> ç‰ˆæœ¬</p>
<p>åœ¨Spring Framework 6.0ä¸­ï¼Œ Springéœ€è¦Java 17+ã€‚</p>
<ul>
<li>6.2.x (2024å¹´11æœˆ) - ä¸‹ä¸€ä¸ªåŠŸèƒ½åˆ†æ”¯</li>
<li>6.1.x (2023å¹´11æœˆ) - å³å°†æ¨å‡ºçš„åŠŸèƒ½åˆ†æ”¯</li>
<li>6.0.x (2022å¹´11æœˆ) - ä¸»è¦ç”Ÿäº§çº¿ï¼ŒåŸºäºJDK 17å’ŒJakarta EE 9</li>
<li>5.3.x - ç¬¬äº”ä»£æœ€ç»ˆåŠŸèƒ½åˆ†æ”¯ï¼Œé•¿æœŸæ”¯æŒï¼Œæ”¯æŒJDK 8ã€11ã€17å’ŒJava EE 8</li>
<li>4.3.x - EOL (2020å¹´12æœˆ31æ—¥)ï¼Œä¸å†æä¾›ç»´æŠ¤å’Œå®‰å…¨è¡¥ä¸</li>
<li>3.2.x - EOL (2016å¹´12æœˆ31æ—¥)ï¼Œä¸å†æä¾›ç»´æŠ¤å’Œå®‰å…¨è¡¥ä¸</li>
</ul>
<p>æ‚¨å¯ä»¥åœ¨ <a href="https://spring.io/projects/spring-framework#support" target="_blank" rel="noopener noreferrer">spring.io#support</a>ä¸Šæ‰¾åˆ°æœ‰å…³å®˜æ–¹æ”¯æŒæ—¥æœŸçš„æ›´å¤šä¿¡æ¯ã€‚</p>
<h2>å…¥é—¨æŒ‡å—</h2>
<p>ä½¿ç”¨<a href="https://spring.io/projects/spring-boot" target="_blank" rel="noopener noreferrer">Spring Boot</a>æ¥å¿«é€Ÿåˆ›å»ºç”Ÿäº§å°±ç»ªçš„Springåº”ç”¨ç¨‹åº</p>
<ul>
<li>æ‚¨å¯ä»¥é€šè¿‡<a href="start.spring.io">start.spring.io</a>ç”ŸæˆåŸºæœ¬é¡¹ç›®</li>
<li>æˆ–è€…éµå¾ª"<a href="https://spring.io/guides" target="_blank" rel="noopener noreferrer">å…¥é—¨æŒ‡å—</a>"
ä¹‹ä¸€ï¼Œä¾‹å¦‚"<a href="https://spring.io/guides/gs/rest-service/" target="_blank" rel="noopener noreferrer">å¼€å§‹æ„å»ºRESTful WebæœåŠ¡</a>"</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Spring Framework å¿«é€Ÿå¼€å§‹</title>
      <link>https://www.geekyspace.cn/md/spring-framework/overview/quickstart.html</link>
      <guid>https://www.geekyspace.cn/md/spring-framework/overview/quickstart.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">Spring Framework å¿«é€Ÿå¼€å§‹</source>
      <description>Spring Framework å¿«é€Ÿå¼€å§‹ IntelliJ IDEA æä¾›çš„ä¸“ç”¨é¡¹ç›®å‘å¯¼ï¼Œæ‚¨èƒ½å¤Ÿå¿«é€Ÿåˆ›å»ºSpringåº”ç”¨ç¨‹åºï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºSpringåº”ç”¨ç¨‹åºçš„æœ€ä½³æ–¹å¼ä¹‹ä¸€ã€‚ å‚è€ƒğŸš€ ï¼šJetbrains åˆ›å»ºç¬¬ä¸€ä¸ªSpringåº”ç”¨ç¨‹åº åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•å…¬å¼€HTTPç«¯ç‚¹å¹¶å°†å…¶æ˜ å°„åˆ°ä¸€ä¸ªæ–¹æ³•ï¼Œå½“ç”¨æˆ·é€šè¿‡Webæµè§ˆå™¨è®¿é—®æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šå‘ç”¨æˆ·è¿”å›é—®å€™...</description>
      <category>Spring</category>
      <pubDate>Fri, 15 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p><strong>IntelliJ IDEA</strong> æä¾›çš„ä¸“ç”¨é¡¹ç›®å‘å¯¼ï¼Œæ‚¨èƒ½å¤Ÿå¿«é€Ÿåˆ›å»ºSpringåº”ç”¨ç¨‹åºï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºSpringåº”ç”¨ç¨‹åºçš„æœ€ä½³æ–¹å¼ä¹‹ä¸€ã€‚</p>
</blockquote>
<p>å‚è€ƒğŸš€ ï¼š<a href="https://www.jetbrains.com/help/idea/your-first-spring-application.html" target="_blank" rel="noopener noreferrer">Jetbrains åˆ›å»ºç¬¬ä¸€ä¸ªSpringåº”ç”¨ç¨‹åº</a></p>
<p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•å…¬å¼€HTTPç«¯ç‚¹å¹¶å°†å…¶æ˜ å°„åˆ°ä¸€ä¸ªæ–¹æ³•ï¼Œå½“ç”¨æˆ·é€šè¿‡Webæµè§ˆå™¨è®¿é—®æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šå‘ç”¨æˆ·è¿”å›é—®å€™ä¿¡æ¯ã€‚</p>
<h2>åˆ›å»º Spring Booté¡¹ç›®</h2>
<ol>
<li>åœ¨ä¸»èœå•ä¸­ï¼Œè½¬åˆ° <strong>æ–‡ä»¶(File) | æ–°å»º(New) | é¡¹ç›®(Project)</strong></li>
<li>åœ¨ <strong>æ–°å»ºé¡¹ç›®(New Project)</strong> å¯¹è¯æ¡†ä¸­ï¼Œé€‰æ‹© <code>Spring Initializr</code></li>
<li>æŒ‡å®šé¡¹ç›®çš„åç§° <mark>spring-boot-tutorial</mark>ï¼Œå•å‡» <strong>ä¸‹ä¸€æ­¥(Next)</strong> ç»§ç»­</li>
</ol>
<figure><img src="https://img.geekyspace.cn/pictures/2024/spring-new-project-initializr.png" alt="Spring Initializr in the New Project wizard" tabindex="0" loading="lazy"><figcaption>Spring Initializr in the New Project wizard</figcaption></figure>
<ol start="4">
<li>åœ¨<strong>Web</strong>ç»„ä¸‹é€‰æ‹©<strong>Spring Web</strong>ä¾èµ–é¡¹ï¼Œç„¶åå•å‡» <strong>åˆ›å»º(Create)</strong> ç”Ÿæˆå¹¶è®¾ç½®é¡¹ç›®</li>
</ol>
<figure><img src="https://img.geekyspace.cn/pictures/2024/spring-new-project-dependencies.png" alt="Spring Dependencies in the New Project wizard" tabindex="0" loading="lazy"><figcaption>Spring Dependencies in the New Project wizard</figcaption></figure>
<h2>æ·»åŠ  sayHello() æ–¹æ³•</h2>
<p><code>Spring Initializr</code> ä¼šåˆ›å»ºä¸€ä¸ªå¸¦æœ‰ <code>main()</code> æ–¹æ³•çš„ç±»æ¥å¯åŠ¨ä½ çš„ Spring åº”ç”¨ç¨‹åºã€‚</p>
<ol>
<li>è½¬åˆ° "<strong>å¯¼èˆª(Navigate) | æ–‡ä»¶(File )</strong>"ï¼Œæœç´¢<code>SpringBootTutorialApplication.java</code>æ–‡ä»¶å¹¶æ‰“å¼€</li>
</ol>
<figure><img src="https://img.geekyspace.cn/pictures/2024/spring-boot-tutorial-gotofile.png" alt="Using Go To File to open SpringBootTutorialApplication.java" tabindex="0" loading="lazy"><figcaption>Using Go To File to open SpringBootTutorialApplication.java</figcaption></figure>
<ol start="2">
<li>æ·»åŠ  <code>sayHello()</code> æ–¹æ³•ï¼Œå¹¶åŒ…å«æ‰€æœ‰å¿…è¦çš„æ³¨è§£å’Œå¯¼å…¥ï¼š</li>
</ol>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>springboottutorial</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestParam</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBootTutorialApplication</span> <span class="token punctuation">{</span>

   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringBootTutorialApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>
   <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"myName"</span><span class="token punctuation">,</span> defaultValue <span class="token operator">=</span> <span class="token string">"World"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"Hello %s!"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p><code>sayHello()</code>æ–¹æ³•æ¥å—ä¸€ä¸ªåå­—å‚æ•°ï¼Œå¹¶è¿”å›ä¸å‚æ•°å€¼ç»„åˆçš„<code>Hello</code>å•è¯ã€‚å…¶ä½™çš„å·¥ä½œç”±æ·»åŠ Springæ³¨è§£æ¥å¤„ç†ï¼š</p>
<ul>
<li><code>@RestController</code>æ³¨è§£å°†<code>SpringBootTutorialApplication</code>ç±»æ ‡è®°ä¸ºè¯·æ±‚å¤„ç†ç¨‹åºï¼ˆ<mark>RESTæ§åˆ¶å™¨</mark>ï¼‰ã€‚</li>
<li><code>@GetMapping("/hello")</code>æ³¨è§£å°†<code>sayHello()</code>æ–¹æ³•<mark>æ˜ å°„</mark>åˆ°GETè¯·æ±‚çš„<code>/hello</code>è·¯å¾„ã€‚
*<code> @RequestParam</code>æ³¨è§£å°†åå­—<strong>æ–¹æ³•å‚æ•°</strong><mark>æ˜ å°„</mark>åˆ°<code>myName</code> Webè¯·æ±‚å‚æ•°ã€‚å¦‚æœæ‚¨åœ¨Webè¯·æ±‚ä¸­æœªæä¾›<code>myName</code>
å‚æ•°ï¼Œåˆ™é»˜è®¤ä¸º<code>World</code>ã€‚</li>
</ul>
<h2>è¿è¡ŒSpringåº”ç”¨ç¨‹åº</h2>
<p><strong>IntelliJ IDEA</strong> åˆ›å»ºäº†ä¸€ä¸ª<code> Spring Boot</code> è¿è¡Œé…ç½®ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥è¿è¡Œæ–° <code>Spring</code> åº”ç”¨ç¨‹åºã€‚</p>
<ul>
<li>å¦‚æœé€‰æ‹©äº†è¿è¡Œé…ç½®ï¼Œè¯·æŒ‰ <code>Shift</code> <code>F10</code>é”®ã€‚</li>
<li>è¿˜å¯ä»¥ç‚¹å‡» <code>SpringBootTutorialApplication.java</code> æ–‡ä»¶<code> main()</code>æ–¹æ³•æ—è¾¹çš„â–¶ï¸å›¾æ ‡è¿è¡Œã€‚</li>
</ul>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒIntelliJ IDEA ä¼šåœ¨è¿è¡Œå·¥å…·çª—å£ä¸­æ˜¾ç¤ºä½ æ­£åœ¨è¿è¡Œçš„ Spring Boot åº”ç”¨ç¨‹åºã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/spring-boot-demo-run-console_dark.png" alt="The Run tool window with a running Spring Boot application" tabindex="0" loading="lazy"><figcaption>The Run tool window with a running Spring Boot application</figcaption></figure>
<p>æ§åˆ¶å°é€‰é¡¹å¡æ˜¾ç¤º Spring æ—¥å¿—æ¶ˆæ¯çš„è¾“å‡ºã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œå†…ç½®çš„ Apache Tomcat æœåŠ¡å™¨æ­£åœ¨ç›‘å¬ç«¯å£ 8080ã€‚
æ‰“å¼€ä½ çš„ç½‘ç»œæµè§ˆå™¨å¹¶è®¿é—® <a href="http://localhost:8080/hello" target="_blank" rel="noopener noreferrer">http://localhost:8080/hello</a>ã€‚
å¦‚æœä½ æ“ä½œæ­£ç¡®ï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°ä½ çš„åº”ç”¨ç¨‹åºä»¥ Hello World! å›åº”ã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/spring-boot-web-browser-hello-world.png" alt="Spring Boot Hello World response in the browser" tabindex="0" loading="lazy"><figcaption>Spring Boot Hello World response in the browser</figcaption></figure>
<p>è¿™æ˜¯é»˜è®¤çš„å“åº”ã€‚ä½ å¯ä»¥åœ¨ä½ çš„ç½‘ç»œè¯·æ±‚ä¸­æä¾›ä¸€ä¸ªå‚æ•°ï¼Œè®©åº”ç”¨ç¨‹åºçŸ¥é“å¦‚ä½•é€‚å½“åœ°é—®å€™ä½ ã€‚
ä¾‹å¦‚ï¼Œå°è¯•è®¿é—® <a href="http://localhost:8080/hello?myName=Human" target="_blank" rel="noopener noreferrer">http://localhost:8080/hello?myName=Human</a>ã€‚</p>
<h2>æ·»åŠ ä¸»é¡µ</h2>
<p>åˆ›å»ºçš„ Spring Boot åº”ç”¨ç¨‹åºåœ¨ <code>/hello</code> è·¯å¾„ä¸‹æœ‰ä¸€ä¸ªç«¯ç‚¹å¯ç”¨ã€‚
ç„¶è€Œï¼Œå¦‚æœä½ åœ¨ <a href="http://localhost:8080/" target="_blank" rel="noopener noreferrer">http://localhost:8080/</a> ä¸­æ‰“å¼€ä½ çš„åº”ç”¨ç¨‹åºçš„æ ¹ä¸Šä¸‹æ–‡ï¼Œä½ ä¼šæ”¶åˆ°é”™è¯¯ï¼Œå› ä¸ºæ²¡æœ‰å®šä¹‰æ ¹èµ„æºã€‚
è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªé™æ€ HTML é¦–é¡µï¼Œå…¶ä¸­åŒ…å«æŒ‡å‘ä½ ç«¯ç‚¹çš„é“¾æ¥ã€‚</p>
<ol>
<li>è¯·åœ¨ <code>/src/main/resources/static/</code> ä¸‹åˆ›å»º <code>index.html</code> æ–‡ä»¶ã€‚</li>
<li>ä½ å¯ä»¥ä¿®æ”¹é»˜è®¤æ¨¡æ¿æˆ–è€…ä½¿ç”¨ä»¥ä¸‹ HTML ä»£ç æ›¿æ¢å®ƒï¼š</li>
</ol>
<div class="language-html" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">HTML</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>æ‚¨çš„ç¬¬ä¸€ä¸ª Spring åº”ç”¨ç¨‹åº<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Content-Type<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/html; charset=UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/hello<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>é—®å€™å…¨ä¸–ç•Œï¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ifm</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/hello<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GET<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nameForm<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nameField<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>åº”ç”¨ç¨‹åºåº”è¯¥æ€æ ·ç§°å‘¼æ‚¨ï¼Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myName<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nameField<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>é—®å€™æˆ‘ï¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ifm</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3.åœ¨è¿è¡Œå·¥å…·çª—å£ä¸­ï¼Œç‚¹å‡» "<strong>é‡æ–°è¿è¡Œ</strong>" æŒ‰é’®ï¼Œæˆ–æŒ‰ä¸‹ <code>Shift</code> + <code>F10</code>ã€‚
ç°åœ¨ä½ çš„åº”ç”¨ç¨‹åºå°†ä¼šåœ¨ <a href="http://localhost:8080/" target="_blank" rel="noopener noreferrer">http://localhost:8080/</a> ä¸Šä½œä¸ºæ ¹èµ„æºæä¾› <code>index.html</code> é¡µé¢ã€‚</p>
<figure><img src="https://img.geekyspace.cn/pictures/2024/image-20240316015405566.png" alt="image-20240316015405566" tabindex="0" loading="lazy"><figcaption>image-20240316015405566</figcaption></figure>
<h2>ä¸‹ä¸€ä¸ªæ•™ç¨‹</h2>
<p>è¿™ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºæ¼”ç¤ºäº†å¦‚ä½•å¼€å§‹ä½¿ç”¨ Springã€‚ è¦äº†è§£ IntelliJ IDEA å¦‚ä½•å¸®åŠ©ä½ ç¼–å†™ä»£ç å¹¶åœ¨è¿è¡Œæ—¶ç®¡ç†åº”ç”¨ç¨‹åºï¼Œ
è¯·å‚è€ƒä¸‹ä¸€ä¸ªæ•™ç¨‹ï¼Œè¯¥æ•™ç¨‹é‡ç‚¹ä»‹ç»æ›´é«˜çº§çš„ <a href="https://www.jetbrains.com/help/idea/spring-support-tutorial.html" target="_blank" rel="noopener noreferrer">Spring æ”¯æŒåŠŸèƒ½</a>ã€‚</p>
]]></content:encoded>
      <enclosure url="https://img.geekyspace.cn/pictures/2024/spring-new-project-initializr.png" type="image/png"/>
    </item>
    <item>
      <title>ä¾èµ–ï¼ˆDependenciesï¼‰</title>
      <link>https://www.geekyspace.cn/md/spring-framework/core/dependencies/</link>
      <guid>https://www.geekyspace.cn/md/spring-framework/core/dependencies/</guid>
      <source url="https://www.geekyspace.cn/rss.xml">ä¾èµ–ï¼ˆDependenciesï¼‰</source>
      <description>ä¾èµ–ï¼ˆDependenciesï¼‰ ä¼ä¸šåº”ç”¨ç¨‹åºé€šå¸¸ä¸æ˜¯ç”±å•ä¸ªå¯¹è±¡ï¼ˆæˆ–Springæœ¯è¯­ä¸­çš„Beanï¼‰æ„æˆçš„ã€‚ å³ä½¿æ˜¯æœ€ç®€å•çš„åº”ç”¨ç¨‹åºï¼Œä¹Ÿæ˜¯ç”±å¤šä¸ªå¯¹è±¡å…±åŒåä½œæ¥å‘ˆç°ç»™æœ€ç»ˆç”¨æˆ·ä¸€ä¸ªè¿è´¯çš„åº”ç”¨ä½“éªŒã€‚ ä¸‹ä¸€èŠ‚å°†è§£é‡Šå¦‚ä½•ä»å®šä¹‰ç‹¬ç«‹çš„Beanå¼€å§‹ï¼Œé€æ­¥å®ç°ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ç¨‹åºã€‚ åœ¨è¿™ä¸ªåº”ç”¨ç¨‹åºä¸­ï¼Œå„ä¸ªå¯¹è±¡å°†ç›¸äº’åä½œï¼Œå®ç°ä¸€ä¸ªå…±åŒçš„ç›®æ ‡ã€‚ ç« èŠ‚æ‘˜è¦</description>
      <category>Spring</category>
      <pubDate>Tue, 26 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>ä¼ä¸šåº”ç”¨ç¨‹åºé€šå¸¸ä¸æ˜¯ç”±å•ä¸ªå¯¹è±¡ï¼ˆæˆ–<code>Spring</code>æœ¯è¯­ä¸­çš„<code>Bean</code>ï¼‰æ„æˆçš„ã€‚
å³ä½¿æ˜¯æœ€ç®€å•çš„åº”ç”¨ç¨‹åºï¼Œä¹Ÿæ˜¯ç”±å¤šä¸ªå¯¹è±¡å…±åŒåä½œæ¥å‘ˆç°ç»™æœ€ç»ˆç”¨æˆ·ä¸€ä¸ªè¿è´¯çš„åº”ç”¨ä½“éªŒã€‚</p>
<p>ä¸‹ä¸€èŠ‚å°†è§£é‡Šå¦‚ä½•ä»å®šä¹‰ç‹¬ç«‹çš„Beanå¼€å§‹ï¼Œé€æ­¥å®ç°ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ç¨‹åºã€‚
åœ¨è¿™ä¸ªåº”ç”¨ç¨‹åºä¸­ï¼Œå„ä¸ªå¯¹è±¡å°†ç›¸äº’åä½œï¼Œå®ç°ä¸€ä¸ªå…±åŒçš„ç›®æ ‡ã€‚</p>
<h2>ç« èŠ‚æ‘˜è¦</h2>
<ul>
<li><a href="/md/spring-framework/core/dependencies/factory-collaborators.html" target="_blank">ä¾èµ–æ³¨å…¥</a></li>
<li><a href="/md/spring-framework/core/dependencies/factory-properties-detailed.html" target="_blank">ä¾èµ–å’Œé…ç½®è¯¦è§£</a></li>
<li><a href="/md/spring-framework/core/dependencies/factory-dependson.html" target="_blank">ä½¿ç”¨depends-on</a></li>
<li><a href="/md/spring-framework/core/dependencies/factory-lazy-init.html" target="_blank">æ‡’åŠ è½½Bean</a></li>
<li><a href="/md/spring-framework/core/dependencies/factory-autowire.html" target="_blank">è‡ªåŠ¨è£…é…åä½œè€…</a></li>
<li><a href="/md/spring-framework/core/dependencies/factory-method-injection.html" target="_blank">æ–¹æ³•æ³¨å…¥</a></li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>è‡ªåŠ¨è£…é…åä½œè€…</title>
      <link>https://www.geekyspace.cn/md/spring-framework/core/dependencies/factory-autowire.html</link>
      <guid>https://www.geekyspace.cn/md/spring-framework/core/dependencies/factory-autowire.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">è‡ªåŠ¨è£…é…åä½œè€…</source>
      <description>è‡ªåŠ¨è£…é…åä½œè€…ï¼ˆAutowiring Collaboratorsï¼‰ Springå®¹å™¨å¯ä»¥è‡ªåŠ¨è£…é…åä½œBeanä¹‹é—´çš„å…³ç³»ã€‚ ä½ å¯ä»¥é€šè¿‡æ£€æŸ¥ApplicationContextçš„å†…å®¹ï¼Œè®©Springè‡ªåŠ¨ä¸ºä½ çš„Beanè§£æåä½œå¯¹è±¡ï¼ˆå…¶ä»–Beanï¼‰ã€‚ è‡ªåŠ¨è£…é…çš„ä¼˜åŠ¿ å‡å°‘æ‰‹åŠ¨é…ç½®ï¼šè‡ªåŠ¨è£…é…å¯ä»¥æ˜¾è‘—å‡å°‘å¯¹æ‰‹åŠ¨æŒ‡å®šå±æ€§æˆ–æ„é€ æ–¹æ³•å‚æ•°çš„éœ€æ±‚ã€‚ å…¶ä»–æœºåˆ¶ ï¼Œå¦‚bean...</description>
      <category>Spring</category>
      <pubDate>Tue, 26 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Springå®¹å™¨å¯ä»¥è‡ªåŠ¨è£…é…åä½œBeanä¹‹é—´çš„å…³ç³»ã€‚
ä½ å¯ä»¥é€šè¿‡æ£€æŸ¥<code>ApplicationContext</code>çš„å†…å®¹ï¼Œè®©Springè‡ªåŠ¨ä¸ºä½ çš„Beanè§£æåä½œå¯¹è±¡ï¼ˆå…¶ä»–Beanï¼‰ã€‚</p>
<p><strong>è‡ªåŠ¨è£…é…çš„ä¼˜åŠ¿</strong></p>
<ul>
<li><strong>å‡å°‘æ‰‹åŠ¨é…ç½®</strong>ï¼šè‡ªåŠ¨è£…é…å¯ä»¥æ˜¾è‘—å‡å°‘å¯¹æ‰‹åŠ¨æŒ‡å®šå±æ€§æˆ–æ„é€ æ–¹æ³•å‚æ•°çš„éœ€æ±‚ã€‚
<a href="https://docs.spring.io/spring-framework/reference/core/beans/child-bean-definitions.html" target="_blank" rel="noopener noreferrer">å…¶ä»–æœºåˆ¶</a>
ï¼Œå¦‚beanæ¨¡æ¿ï¼Œåœ¨è¿™æ–¹é¢ä¹Ÿæ˜¯éå¸¸æœ‰ä»·å€¼çš„ã€‚</li>
<li><strong>åŠ¨æ€æ›´æ–°é…ç½®</strong>ï¼šéšç€é¡¹ç›®çš„å‘å±•ï¼Œå¯¹è±¡å¯èƒ½ä¼šå¢åŠ æ–°çš„ä¾èµ–ã€‚è‡ªåŠ¨è£…é…èƒ½å¤Ÿé€‚åº”è¿™ç§å˜åŒ–ï¼Œè‡ªåŠ¨æ»¡è¶³æ–°çš„ä¾èµ–å…³ç³»ï¼Œè€Œæ— éœ€æ‰‹åŠ¨æ›´æ–°é…ç½®ã€‚
è¿™ä¸€ç‚¹åœ¨é¡¹ç›®çš„è¿­ä»£å¼€å‘è¿‡ç¨‹ä¸­å°¤ä¸ºæœ‰ç”¨ã€‚åŒæ—¶ï¼Œå½“é¡¹ç›®ç¨³å®šä¸‹æ¥åï¼Œå¼€å‘è€…ä»ç„¶å¯ä»¥é€‰æ‹©åˆ‡æ¢åˆ°æ˜¾å¼è£…é…ï¼Œä»¥è·å¾—æ›´ç²¾ç¡®çš„æ§åˆ¶ã€‚</li>
</ul>
<p><strong>å››ç§è‡ªåŠ¨è£…é…æ¨¡å¼</strong></p>
<p>åœ¨ä½¿ç”¨XMLé…ç½®æ—¶ï¼Œ
ï¼ˆå‚é˜… <a href="https://docs.spring.io/spring-framework/reference/core/beans/dependencies/factory-collaborators.html" target="_blank" rel="noopener noreferrer">ä¾èµ–æ³¨å…¥</a>ï¼‰ï¼Œ
å¯ä»¥é€šè¿‡<code>&lt;bean/&gt;</code>å…ƒç´ çš„<code>autowire</code>å±æ€§æ¥å®šä¹‰Beançš„è‡ªåŠ¨è£…é…æ¨¡å¼ã€‚
Springæä¾›äº†å››ç§è‡ªåŠ¨è£…é…æ¨¡å¼ï¼Œå…è®¸ä½ ä¸ºæ¯ä¸ªBeanå•ç‹¬æŒ‡å®šä½¿ç”¨å“ªç§æ¨¡å¼ã€‚ä»¥ä¸‹æ˜¯è¿™å››ç§æ¨¡å¼çš„è¯¦ç»†æè¿°ï¼š</p>
<p>| æ¨¡å¼          | æè¿°                                                                                                                                           |
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>ä¾èµ–æ³¨å…¥</title>
      <link>https://www.geekyspace.cn/md/spring-framework/core/dependencies/factory-collaborators.html</link>
      <guid>https://www.geekyspace.cn/md/spring-framework/core/dependencies/factory-collaborators.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">ä¾èµ–æ³¨å…¥</source>
      <description>ä¾èµ–æ³¨å…¥ ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ Spring IoCï¼ˆæ§åˆ¶åè½¬ï¼‰ä¹Ÿè¢«ç§°ä¸ºä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ å®ƒæ˜¯ä¸€ä¸ªè¿‡ç¨‹ï¼Œå¯¹è±¡ä»…é€šè¿‡æ„é€ å‚æ•°ã€å·¥å‚æ–¹æ³•å‚æ•°æˆ–åœ¨å¯¹è±¡å®ä¾‹è¢«æ„é€ å‡½æ•°æˆ–å·¥å‚æ–¹æ³•è¿”å›åï¼Œåœ¨å…¶ä¸Šè®¾ç½®çš„å±æ€§æ¥å®šä¹‰å®ƒä»¬çš„ä¾èµ–å…³ç³»ã€‚ åœ¨IoCå®¹å™¨åˆ›å»ºBeanæ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨æ³¨å…¥è¿™äº›ä¾èµ–é¡¹ã€‚ ä¸å†éœ€è¦é€šç›´æ¥æ„é€ ä¾èµ–é¡¹æˆ–ä½¿ç”¨æœåŠ¡å®šä½å™¨æ¨¡å¼ç­‰æ–¹å¼æ¥ç®¡ç†å¯¹è±¡çš„å®ä¾‹åŒ–æˆ–ä½ç½®ï¼Œ è€Œ...</description>
      <category>Spring</category>
      <pubDate>Tue, 26 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p><strong>Spring IoCï¼ˆæ§åˆ¶åè½¬ï¼‰ä¹Ÿè¢«ç§°ä¸ºä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰</strong></p>
<p>å®ƒæ˜¯ä¸€ä¸ªè¿‡ç¨‹ï¼Œå¯¹è±¡ä»…é€šè¿‡æ„é€ å‚æ•°ã€å·¥å‚æ–¹æ³•å‚æ•°æˆ–åœ¨<strong>å¯¹è±¡å®ä¾‹</strong>è¢«æ„é€ å‡½æ•°æˆ–å·¥å‚æ–¹æ³•è¿”å›åï¼Œåœ¨å…¶ä¸Šè®¾ç½®çš„å±æ€§æ¥å®šä¹‰å®ƒä»¬çš„ä¾èµ–å…³ç³»ã€‚
åœ¨IoCå®¹å™¨åˆ›å»ºBeanæ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨æ³¨å…¥è¿™äº›ä¾èµ–é¡¹ã€‚ ä¸å†éœ€è¦é€š<code>ç›´æ¥æ„é€ ä¾èµ–é¡¹</code>æˆ–ä½¿ç”¨<code>æœåŠ¡å®šä½å™¨æ¨¡å¼</code>ç­‰æ–¹å¼æ¥ç®¡ç†å¯¹è±¡çš„å®ä¾‹åŒ–æˆ–ä½ç½®ï¼Œ
è€Œæ˜¯äº¤ç”±IoCå®¹å™¨æ¥ç®¡ç†ï¼Œå› æ­¤ç§°ä¸º<strong>æ§åˆ¶åè½¬</strong>ã€‚</p>
<p><strong>DIè§£è€¦</strong></p>
<p>é‡‡ç”¨ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰åŸåˆ™ï¼Œå¯ä»¥ä½¿ä»£ç æ›´å¹²å‡€ç®€æ´ï¼ŒåŒæ—¶ä¹Ÿæ›´æœ‰æ•ˆåœ°è§£è€¦ã€‚
é€šè¿‡DIï¼Œå¯¹è±¡ä¸éœ€è¦æŸ¥æ‰¾å…¶ä¾èµ–ï¼Œä¹Ÿä¸çŸ¥é“ä¾èµ–çš„ä½ç½®æˆ–ç±»åˆ«ã€‚
å› æ­¤ï¼Œä½ çš„ç±»å˜å¾—æ›´æ˜“äºæµ‹è¯•ï¼Œç‰¹åˆ«æ˜¯å½“ä¾èµ–æ˜¯åœ¨æ¥å£æˆ–æŠ½è±¡åŸºç±»ä¸Šæ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>stub</code>æˆ–<code>mock</code>è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚
è¿™ç§æ–¹å¼ä½¿ä»£ç æ›´åŠ æ•´æ´ï¼ŒåŒæ—¶ä¹Ÿæ›´ç¬¦åˆé¢å‘å¯¹è±¡çš„è®¾è®¡åŸåˆ™ã€‚</p>
<p>DIæœ‰ä¸¤ä¸ªä¸»è¦çš„å˜ä½“ã€‚ åŸºäº<a href="#%E5%9F%BA%E4%BA%8E%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5">æ„é€ å™¨çš„ä¾èµ–æ³¨å…¥</a>å’Œ<a href="#%E5%9F%BA%E4%BA%8Esetter%E7%9A%84%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5">åŸºäºSetterçš„ä¾èµ–æ³¨å…¥</a>ã€‚</p>
<h2>åŸºäºæ„é€ å‡½æ•°çš„ä¾èµ–æ³¨å…¥</h2>
<p><strong>åŸºäºæ„é€ å‡½æ•°çš„ä¾èµ–æ³¨å…¥</strong>æ˜¯å®¹å™¨ï¼ˆå¦‚Springæ¡†æ¶ï¼‰è°ƒç”¨å…·æœ‰å¤šä¸ªå‚æ•°çš„æ„é€ å‡½æ•°æ¥å®ç°ï¼Œæ¯ä¸ªå‚æ•°ä»£è¡¨ä¸€ä¸ªä¾èµ–é¡¹ï¼Œå®¹å™¨è´Ÿè´£åœ¨åˆ›å»ºBeanæ—¶æ³¨å…¥è¿™äº›ä¾èµ–é¡¹ã€‚
<strong>ä¸é™æ€å·¥å‚æ–¹æ³•çš„æ¯”è¾ƒ</strong>æ„é€ Beanå‡ ä¹æ˜¯ç­‰ä»·çš„ã€‚</p>
<p>ä»¥ä¸‹ç¤ºä¾‹é€šè¿‡æ„é€ å‡½æ•°è¿›è¡Œä¾èµ–æ³¨å…¥ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleMovieLister</span> <span class="token punctuation">{</span>

    <span class="token comment">// SimpleMovieLister ä¾èµ–äº MovieFinder</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">MovieFinder</span> movieFinder<span class="token punctuation">;</span>

    <span class="token comment">// æ„é€ å‡½æ•°ï¼Œä»¥ä¾¿Springå®¹å™¨å¯ä»¥æ³¨å…¥MovieFinder</span>
    <span class="token keyword">public</span> <span class="token class-name">SimpleMovieLister</span><span class="token punctuation">(</span><span class="token class-name">MovieFinder</span> movieFinder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieFinder <span class="token operator">=</span> movieFinder<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// çœç•¥äº†å®é™…ä½¿ç”¨æ³¨å…¥çš„ MovieFinder çš„ä¸šåŠ¡é€»è¾‘...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™ä¸ªç±»å¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ã€‚å®ƒæ˜¯ä¸€ä¸ªæ™®é€šçš„POJOï¼ˆç®€å•çš„Javaå¯¹è±¡ï¼‰ï¼Œä¸ä¾èµ–äºå®¹å™¨ç‰¹å®šçš„æ¥å£ã€åŸºç±»æˆ–æ³¨è§£ã€‚</p>
<h3>æ„é€ å‡½æ•°å‚æ•°è§£æ</h3>
<p><strong>1.æŒ‰å®šä¹‰çš„é¡ºåºä¼ é€’æ„é€ å‡½æ•°çš„å‚æ•°ï¼ˆå‚æ•°æ— æ­§ä¹‰æ—¶ï¼‰</strong></p>
<p>æ„é€ å‡½æ•°å‚æ•°çš„è§£æåŒ¹é…æ˜¯é€šè¿‡ä½¿ç”¨å‚æ•°çš„ç±»å‹æ¥å®Œæˆçš„ã€‚
å¦‚æœBeanå®šä¹‰ä¸­çš„æ„é€ å‡½æ•°å‚æ•°ä¸å­˜åœ¨æ­§ä¹‰ï¼Œ é‚£ä¹ˆæ„é€ å‡½æ•°å‚æ•°çš„é¡ºåºå°±æ˜¯Beanå®šä¹‰ä¸­çš„å®šä¹‰é¡ºåºã€‚
è¿™æ ·åœ¨å®ä¾‹åŒ–Beanæ—¶ï¼ŒSpring IoCå®¹å™¨å°±ä¼šæŒ‰ç…§å®šä¹‰çš„é¡ºåºä¼ é€’å‚æ•°ã€‚ è¯·è€ƒè™‘ä»¥ä¸‹è¿™ä¸ªç±»ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">x<span class="token punctuation">.</span>y</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThingOne</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">ThingOne</span><span class="token punctuation">(</span><span class="token class-name">ThingTwo</span> thingTwo<span class="token punctuation">,</span> <span class="token class-name">ThingThree</span> thingThree<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å‡è®¾<code>ThingTwo</code>å’Œ<code>ThingThree</code>ç±»æ²¡æœ‰ç»§æ‰¿å…³ç³»ï¼Œä¸å­˜åœ¨æ½œåœ¨çš„æ­§ä¹‰ã€‚
å› æ­¤ï¼Œä¸‹é¢çš„é…ç½®å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œä½ ä¸éœ€è¦åœ¨<code>&lt;constructor-arg/&gt;</code>å…ƒç´ ä¸­æ˜¾ç¤ºæŒ‡å®šæ„é€ å‡½æ•°å‚æ•°çš„ç´¢å¼•æˆ–ç±»å‹ã€‚</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanOne<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>x.y.ThingOne<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanTwo<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanThree<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanTwo<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>x.y.ThingTwo<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanThree<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>x.y.ThingThree<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>2.ä½¿ç”¨<code>type</code>å±æ€§æ˜¾å¼æŒ‡å®šæ„é€ å‡½æ•°å‚æ•°çš„ç±»å‹</strong></p>
<p>å½“å¼•ç”¨å¦ä¸€ä¸ªBeanæ—¶ï¼Œç±»å‹æ˜¯å·²çŸ¥çš„ï¼Œå¹¶ä¸”å¯ä»¥è¿›è¡ŒåŒ¹é…ï¼ˆå°±åƒå‰é¢çš„ä¾‹å­é‚£æ ·ï¼‰ã€‚
ä½†æ˜¯ï¼Œå½“ä½¿ç”¨ç®€å•ç±»å‹æ—¶ï¼Œæ¯”å¦‚<code>&lt;value&gt;true&lt;/value&gt;</code>ï¼ŒSpringä¸èƒ½ç¡®å®šå€¼çš„ç±»å‹ï¼Œæ‰€ä»¥åœ¨æ²¡æœ‰å¸®åŠ©çš„æƒ…å†µä¸‹ä¸èƒ½é€šè¿‡ç±»å‹è¿›è¡ŒåŒ¹é…ã€‚
è¯·è€ƒè™‘ä»¥ä¸‹è¿™ä¸ªç±»ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">examples</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleBean</span> <span class="token punctuation">{</span>

	<span class="token comment">// ç”¨äºè®¡ç®—ç»ˆæç­”æ¡ˆçš„å¹´æ•°</span>
	<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> years<span class="token punctuation">;</span>

	<span class="token comment">// ç”Ÿå‘½ã€å®‡å®™å’Œä¸‡ç‰©çš„ç»ˆæç­”æ¡ˆ</span>
	<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ultimateAnswer<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">ExampleBean</span><span class="token punctuation">(</span><span class="token keyword">int</span> years<span class="token punctuation">,</span> <span class="token class-name">String</span> ultimateAnswer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>years <span class="token operator">=</span> years<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>ultimateAnswer <span class="token operator">=</span> ultimateAnswer<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨ä¸Šè¿°æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨<code>type</code>å±æ€§æ˜¾å¼æŒ‡å®šæ„é€ å‡½æ•°å‚æ•°çš„ç±»å‹ï¼Œå®¹å™¨å°±å¯¹ç®€å•ç±»å‹è¿›è¡Œç±»å‹åŒ¹é…ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>exampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.ExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>int<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7500000<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>java.lang.String<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>42<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>3.ä½¿ç”¨<code>index</code>å±æ€§æ˜¾ç¤ºæŒ‡å®šæ„é€ å‡½æ•°å‚æ•°çš„ç´¢å¼•</strong></p>
<p>ä½ è¿˜å¯ä»¥ä½¿ç”¨<code>index</code>å±æ€§æ˜¾ç¤ºæŒ‡å®šæ„é€ å‡½æ•°å‚æ•°çš„ç´¢å¼•ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>exampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.ExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7500000<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>42<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>é™¤äº†è§£å†³å¤šä¸ªç®€å•å€¼çš„æ­§ä¹‰å¤–ï¼ŒæŒ‡å®šç´¢å¼•è¿˜å¯ä»¥è§£å†³æ„é€ å‡½æ•°å…·æœ‰ä¸¤ä¸ªç›¸åŒç±»å‹å‚æ•°çš„æ­§ä¹‰é—®é¢˜ã€‚</p>
<div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p><strong>æ³¨æ„âš ï¸</strong>ï¼šç´¢å¼•ï¼ˆä¸‹æ ‡ï¼‰ä»0å¼€å§‹ã€‚</p>
</div>
<p>ä½ è¿˜å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°çš„å‚æ•°åç§°æ¥æ¶ˆé™¤å€¼çš„æ­§ä¹‰ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>exampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.ExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>years<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7500000<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ultimateAnswer<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>42<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>4.ä½¿ç”¨<code>@ConstructorProperties</code>æŒ‡å®šæ„é€ å‡½æ•°å‚æ•°åç§°</strong></p>
<p>è¯·è®°ä½ï¼Œè¦ä½¿è¿™ä¸€æ–¹æ³•å¼€ç®±å³ç”¨ï¼Œä»£ç åœ¨ç¼–è¯‘æ—¶å¿…é¡»å¯ç”¨<code>debug</code>æ ‡å¿—ï¼Œä»¥ä¾¿Springå¯ä»¥ä»æ„é€ å‡½æ•°ä¸­æŸ¥æ‰¾å‚æ•°åç§°ã€‚</p>
<p>å¦‚æœä½ ä¸æƒ³ç”¨<code>debug</code>æ ‡å¿—ç¼–è¯‘ä½ çš„ä»£ç ï¼Œ
å¯ä»¥ä½¿ç”¨<a href="https://download.oracle.com/javase/8/docs/api/java/beans/ConstructorProperties.html" target="_blank" rel="noopener noreferrer">@ConstructorProperties</a>
JDKæ³¨è§£æ¥æ˜¾å¼å‘½åä½ çš„æ„é€ å‡½æ•°å‚æ•°ã€‚ ç¤ºä¾‹ç±»å°†å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">examples</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleBean</span> <span class="token punctuation">{</span>

	<span class="token comment">// çœç•¥å­—æ®µ</span>

    <span class="token comment">// æŒ‡å®šæ„é€ å‡½æ•°å±æ€§ï¼Œä»¥ä¾¿Springå®¹å™¨å¯ä»¥æ³¨å…¥å‚æ•°</span>
	<span class="token annotation punctuation">@ConstructorProperties</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"years"</span><span class="token punctuation">,</span> <span class="token string">"ultimateAnswer"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">ExampleBean</span><span class="token punctuation">(</span><span class="token keyword">int</span> years<span class="token punctuation">,</span> <span class="token class-name">String</span> ultimateAnswer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>years <span class="token operator">=</span> years<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>ultimateAnswer <span class="token operator">=</span> ultimateAnswer<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>åŸºäºSetterçš„ä¾èµ–æ³¨å…¥</h2>
<p><strong>åŸºäºSetterçš„ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰</strong> æ˜¯æŒ‡å®¹å™¨åœ¨è°ƒç”¨<code>æ— å‚æ„é€ å‡½æ•°</code>æˆ–<code>æ— å‚é™æ€å·¥å‚æ–¹æ³•</code>å®ä¾‹åŒ–Beanåï¼Œè°ƒç”¨Setteræ–¹æ³•æ¥å®ç°çš„ã€‚</p>
<p>ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†ä¸€ä¸ªåªèƒ½é€šè¿‡Setterè¿›è¡Œä¾èµ–æ³¨å…¥çš„ç±»ã€‚è¿™ä¸ªç±»æ˜¯ä¼ ç»Ÿçš„Javaç±»ï¼Œæ˜¯ä¸€ä¸ªæ™®é€šçš„POJOï¼Œä¸ä¾èµ–äºå®¹å™¨ç‰¹å®šçš„æ¥å£ã€åŸºç±»æˆ–æ³¨è§£ã€‚</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleMovieLister</span> <span class="token punctuation">{</span>

    <span class="token comment">// SimpleMovieLister ä¾èµ–äº MovieFinder</span>
    <span class="token keyword">private</span> <span class="token class-name">MovieFinder</span> movieFinder<span class="token punctuation">;</span>

    <span class="token comment">// Setteræ–¹æ³•ï¼Œä»¥ä¾¿Springå®¹å™¨å¯ä»¥æ³¨å…¥MovieFinder</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMovieFinder</span><span class="token punctuation">(</span><span class="token class-name">MovieFinder</span> movieFinder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieFinder <span class="token operator">=</span> movieFinder<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// çœç•¥äº†å®é™…ä½¿ç”¨æ³¨å…¥çš„ MovieFinder çš„ä¸šåŠ¡é€»è¾‘...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>ApplicationContextçš„ä¾èµ–æ³¨å…¥æ”¯æŒ</strong>ï¼š<code>ApplicationContext</code>åœ¨ç®¡ç†çš„<code>Bean</code>æ—¶æ”¯æŒåŸºäºæ„é€ å‡½æ•°å’ŒåŸºäºSetterçš„ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ã€‚
æ­¤å¤–ï¼Œå®ƒè¿˜æ”¯æŒé€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–é¡¹åï¼Œå†ä½¿ç”¨Setteræ–¹æ³•æ³¨å…¥å…¶ä»–ä¾èµ–é¡¹ã€‚
<strong>é…ç½®ä¾èµ–å…³ç³»å’Œå±æ€§è½¬æ¢</strong>ï¼šä½ å¯ä»¥é€šè¿‡<code>BeanDefinition</code>æ¥é…ç½®ä¾èµ–å…³ç³»ï¼Œå¹¶åˆ©ç”¨<code>java.beans.PropertyEditor</code>
æ¥å£å®ä¾‹å°†å±æ€§å€¼ä»ä¸€ç§æ ¼å¼è½¬æ¢ä¸ºå¦ä¸€ç§æ ¼å¼ã€‚
<strong>Springç”¨æˆ·çš„ä½¿ç”¨æ–¹å¼</strong>ï¼šç„¶è€Œï¼Œå¤§å¤šæ•°Springç”¨æˆ·å¹¶ä¸ç›´æ¥ä½¿ç”¨è¿™äº›ç±»ï¼ˆå³ä»¥ç¼–ç¨‹æ–¹å¼ï¼‰ï¼Œè€Œæ˜¯ä½¿ç”¨XML Beanå®šä¹‰ã€
æ³¨è§£ç»„ä»¶ï¼ˆå³ä½¿ç”¨<code>@Component</code>ã€<code>@Controller</code>ç­‰æ³¨è§£çš„ç±»ï¼‰ï¼Œ
æˆ–åŸºäºJavaçš„<code>@Configuration</code>ç±»ä¸­çš„<code>@Bean</code>æ–¹æ³•ã€‚
<strong>å†…éƒ¨è½¬æ¢ä¸ºBeanDefinition</strong>ï¼šç„¶åï¼Œè¿™äº›æ¥æºåœ¨å†…éƒ¨è¢«è½¬æ¢ä¸º<code>BeanDefinition</code>çš„å®ä¾‹ï¼Œå¹¶ç”¨äºåŠ è½½æ•´ä¸ªSpring IoCå®¹å™¨å®ä¾‹ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">åŸºäºæ„é€ å™¨çš„DIè¿˜æ˜¯åŸºäºSetterçš„DIï¼Ÿ</p>
<p>é€šå¸¸å»ºè®®å¯¹äºå¿…è¦çš„ä¾èµ–é¡¹ä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥ï¼ˆDIï¼‰ï¼Œå¯¹äºå¯é€‰çš„ä¾èµ–é¡¹ä½¿ç”¨Setteræ–¹æ³•æˆ–é…ç½®æ–¹æ³•è¿›è¡Œæ³¨å…¥ã€‚
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨Setteræ–¹æ³•ä¸Šä½¿ç”¨<a href="https://docs.spring.io/spring-framework/reference/core/beans/annotation-config/autowired.html" target="_blank" rel="noopener noreferrer">@Autowired</a>
æ³¨è§£ä¹Ÿå¯ä»¥ä½¿å±æ€§æ ‡è®°ä¸ºå¿…éœ€çš„ä¾èµ–é¡¹ï¼›ä½†æ˜¯ï¼Œå¸¦æœ‰å‚æ•°çš„ç¨‹åºåŒ–éªŒè¯çš„æ„é€ å‡½æ•°æ³¨å…¥æ›´ä¸ºæ¨èã€‚</p>
<p>Springå›¢é˜Ÿå€¡å¯¼ä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥ï¼Œå®ƒå…è®¸ä½ å°†åº”ç”¨ç¨‹åºç»„ä»¶å®ç°ä¸ºä¸å¯å˜<code>final</code>å¯¹è±¡ï¼Œå¹¶ç¡®ä¿äº†æ‰€éœ€çš„ä¾èµ–é¡¹ä¸æ˜¯<code>null</code>ã€‚
æ­¤å¤–ï¼Œæ„é€ å‡½æ•°æ³¨å…¥ç»„ä»¶æ€»æ˜¯ä»¥å®Œå…¨åˆå§‹åŒ–çš„çŠ¶æ€è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œè¿™æœ‰åˆ©äºæé«˜ç¨³å®šæ€§å’Œå¯é¢„æµ‹æ€§ã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼ŒSetteræ³¨å…¥é€‚ç”¨äºå¯é€‰çš„ä¾èµ–é¡¹ï¼Œå¯ä»¥åœ¨ç±»å†…éƒ¨è®¾ç½®é»˜è®¤å€¼ã€‚
ä½†æ˜¯ï¼Œå®ƒéœ€è¦åœ¨æ•´ä¸ªä»£ç åº“ä½¿ç”¨ä¾èµ–æ€§çš„åœ°æ–¹è¿›è¡Œé¢å¤–çš„<code>null</code>å€¼æ£€æŸ¥ï¼Œä»¥å¤„ç†ä¾èµ–é¡¹æœªè®¾ç½®çš„æƒ…å†µã€‚
é€šè¿‡<a href="https://docs.spring.io/spring-framework/reference/integration/jmx.html" target="_blank" rel="noopener noreferrer">JMX MBean</a>è¿›è¡Œç®¡ç†æ˜¯Setteræ³¨å…¥çš„ä¸€ä¸ªå¾ˆå¥½çš„ç”¨ä¾‹ã€‚</p>
<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œé€‰æ‹©æ„é€ å‡½æ•°æ³¨å…¥æˆ–Setteræ³¨å…¥å¯èƒ½ç”±ç±»æœ¬èº«å†³å®šï¼Œç‰¹åˆ«æ˜¯å½“å¤„ç†æ²¡æœ‰æºä»£ç çš„ç¬¬ä¸‰æ–¹ç±»æ—¶ã€‚
ä¾‹å¦‚ï¼Œå¦‚æœç¬¬ä¸‰æ–¹ç±»æ²¡æœ‰æš´éœ²ä»»ä½•Setteræ–¹æ³•ï¼Œåˆ™æ„é€ å‡½æ•°æ³¨å…¥å¯èƒ½æ˜¯å”¯ä¸€å¯ç”¨çš„DIå½¢å¼ã€‚</p>
</div>
<h2>ä¾èµ–çš„è§£æè¿‡ç¨‹</h2>
<p>å®¹å™¨æ‰§è¡ŒBeanä¾èµ–è§£æçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>å®¹å™¨åˆå§‹åŒ–</strong>ï¼š
<ul>
<li><code>ApplicationContext</code> æ˜¯ Spring å®¹å™¨çš„æ¥å£ï¼Œç”¨äºåˆ›å»ºå’Œç®¡ç† Bean</li>
<li>é…ç½®å…ƒæ•°æ®å¯ä»¥æ˜¯ XMLã€Java ä»£ç æˆ–æ³¨è§£ï¼Œå®ƒä»¬æè¿°äº† Bean çš„é…ç½®ä¿¡æ¯</li>
</ul>
</li>
<li><strong>ä¾èµ–è¡¨è¾¾æ–¹å¼</strong>ï¼š
<ul>
<li>ä¾èµ–å¯ä»¥è¡¨è¾¾ä¸ºå±æ€§ã€æ„é€ å‡½æ•°å‚æ•°æˆ–é™æ€å·¥å‚æ–¹æ³•çš„å‚æ•°</li>
<li>Spring ä¼šæ ¹æ®ä¾èµ–è¡¨è¾¾æ–¹å¼æ¥åˆ›å»ºå’Œæ³¨å…¥ä¾èµ–çš„ Bean</li>
</ul>
</li>
<li><strong>å±æ€§å’Œæ„é€ å‡½æ•°å‚æ•°å®šä¹‰</strong>ï¼š
<ul>
<li>å±æ€§æˆ–æ„é€ å‡½æ•°å‚æ•°å¯ä»¥æ˜¯å€¼çš„å®šä¹‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹å®¹å™¨ä¸­å¦ä¸€ä¸ª Bean çš„å¼•ç”¨</li>
<li><strong>å±æ€§å€¼è½¬æ¢</strong>ï¼šå¯¹äºå€¼çš„å®šä¹‰ï¼ŒSpring ä¼šå°†ä»¥å­—ç¬¦ä¸²æ ¼å¼æä¾›çš„å€¼è½¬æ¢ä¸ºæ‰€æœ‰å†…ç½®ç±»å‹ï¼Œå¦‚<code>int</code>ã€<code>long</code>ã€<code>String</code>ã€<code>boolean</code>ç­‰ç­‰</li>
</ul>
</li>
<li><strong>å®¹å™¨éªŒè¯å’ŒBeanåˆ›å»º</strong>:
<ul>
<li>å®¹å™¨åœ¨åˆ›å»ºæ—¶ï¼Œä¼šéªŒè¯æ¯ä¸ªBeançš„é…ç½®</li>
<li>å®¹å™¨è¢«åˆ›å»ºæ—¶ï¼Œå•ä¾‹ä½œç”¨åŸŸå¹¶è¢«è®¾ç½®ä¸ºé¢„å®ä¾‹åŒ–çš„Beanï¼ˆé»˜è®¤ï¼‰è¢«åˆ›å»ºã€‚
ä½œç”¨åŸŸèŒƒå›´åœ¨<a href="https://docs.spring.io/spring-framework/reference/core/beans/factory-scopes.html" target="_blank" rel="noopener noreferrer">Bean Scope</a>ä¸­å®šä¹‰</li>
<li>éå•ä¾‹Beanåªæœ‰åœ¨è¢«è¯·æ±‚æ—¶æ‰ä¼šè¢«åˆ›å»º</li>
</ul>
</li>
<li><strong>Beançš„ä¾èµ–é¡¹è§£æ</strong>ï¼š
<ul>
<li>åˆ›å»ºBeanå¯èƒ½ä¼šå¯¼è‡´åˆ›å»ºBean Graphï¼Œå› ä¸ºBeançš„ä¾èµ–é¡¹åŠå…¶ä¾èµ–é¡¹çš„ä¾èµ–é¡¹ï¼ˆä»¥æ­¤ç±»æ¨ï¼‰ä¼šè¢«åˆ›å»ºå’Œåˆ†é…</li>
</ul>
</li>
<li><strong>æ³¨æ„âš ï¸ï¼šè§£æä¸åŒ¹é…é—®é¢˜</strong>
<ul>
<li>ä¾èµ–é¡¹ä¹‹é—´çš„è§£æä¸åŒ¹é…å¯èƒ½ä¼šåœ¨åˆ›å»ºå—å½±å“çš„ Bean æ—¶æ‰ä¼šå‡ºç°é—®é¢˜</li>
</ul>
</li>
</ol>
<div class="hint-container tip">
<p class="hint-container-title">å¾ªç¯ä¾èµ–</p>
<p>å¾ªç¯ä¾èµ–æ˜¯æŒ‡åœ¨ä½¿ç”¨ä¸»è¦åŸºäºæ„é€ å‡½æ•°çš„ä¾èµ–æ³¨å…¥æ—¶ï¼Œå¯èƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ— æ³•è§£å†³çš„å¾ªç¯ä¾èµ–åœºæ™¯ã€‚</p>
<p>ä¾‹å¦‚ï¼šClass Aé€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥éœ€è¦Class Bçš„å®ä¾‹ï¼Œè€ŒClass Bé€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥éœ€è¦Class Açš„å®ä¾‹ã€‚
å¦‚æœé…ç½®Bean Aå’ŒBean Bç›¸äº’æ³¨å…¥å¯¹æ–¹ï¼ŒSpring IoCå®¹å™¨ä¼šåœ¨è¿è¡Œæ—¶æ£€æµ‹åˆ°è¿™ç§å¾ªç¯å¼•ç”¨ï¼Œå¹¶æŠ›å‡º<code>BeanCurrentlyInCreationException</code>
å¼‚å¸¸ã€‚</p>
<p>è§£å†³è¿™ç§é—®é¢˜çš„ä¸€ä¸ªå¯èƒ½æ–¹æ³•æ˜¯ç¼–è¾‘æŸäº›ç±»çš„æºä»£ç ï¼Œæ”¹ä¸ºé€šè¿‡Setteræ–¹æ³•é…ç½®ï¼Œè€Œä¸æ˜¯æ„é€ å‡½æ•°ã€‚
å¦ä¸€ä¸ªæ–¹æ³•æ˜¯é¿å…æ„é€ å‡½æ•°æ³¨å…¥ï¼Œåªä½¿ç”¨Setteræ³¨å…¥ã€‚æ¢å¥è¯è¯´ï¼Œè™½ç„¶ä¸æ¨èï¼Œä½†ä½ å¯ä»¥é€šè¿‡Setteræ³¨å…¥é…ç½®å¾ªç¯ä¾èµ–ã€‚</p>
<p>ä¸å…¸å‹æƒ…å†µï¼ˆæ²¡æœ‰å¾ªç¯ä¾èµ–ï¼‰ä¸åŒï¼ŒBean Aå’ŒBean Bä¹‹é—´çš„å¾ªç¯ä¾èµ–ä¼šå¯¼è‡´å…¶ä¸­ä¸€ä¸ªBeanåœ¨è‡ªèº«å®Œå…¨åˆå§‹åŒ–ä¹‹å‰è¢«æ³¨å…¥åˆ°å¦ä¸€ä¸ªBeanä¸­ï¼ˆç»å…¸çš„é¸¡ç”Ÿè›‹è›‹ç”Ÿé¸¡çš„æƒ…å†µï¼‰ã€‚</p>
</div>
<p><strong>Springå®¹å™¨çš„è¡Œä¸º</strong>ï¼š é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ç›¸ä¿¡Springä¼šåšæ­£ç¡®çš„äº‹æƒ…ã€‚
å®ƒåœ¨å®¹å™¨åŠ è½½æ—¶æ£€æµ‹é…ç½®é—®é¢˜ï¼Œä¾‹å¦‚å¼•ç”¨ä¸å­˜åœ¨çš„Beanæˆ–å­˜åœ¨å¾ªç¯ä¾èµ–ç­‰ã€‚
<strong>å¼‚å¸¸ç”Ÿæˆå¯èƒ½æ€§</strong>ï¼š Springä¼šå°½å¯èƒ½åœ°å»¶è¿Ÿè®¾ç½®å±æ€§å’Œè§£æä¾èµ–ï¼Œç›´åˆ°çœŸæ­£åˆ›å»ºBeanæ—¶æ‰ä¼šè¿›è¡Œã€‚
è¿™æ„å‘³ç€ï¼Œä¸€ä¸ªæ­£ç¡®åŠ è½½çš„Springå®¹å™¨åœ¨è¯·æ±‚å¯¹è±¡æ—¶å¯èƒ½ä¼šç”Ÿæˆå¼‚å¸¸ï¼›ä¾‹å¦‚åœ¨åˆ›å»ºè¯¥å¯¹è±¡æˆ–å…¶ä¾èµ–å…³ç³»æ—¶å‡ºç°é—®é¢˜ï¼ŒBeanç”±äºç¼ºå°‘æˆ–æ— æ•ˆå±æ€§è€ŒæŠ›å‡ºå¼‚å¸¸ã€‚
<strong>ApplicationContextçš„é¢„å®ä¾‹åŒ–</strong>ï¼š è¿™ç§æ½œåœ¨çš„å»¶è¿Ÿæš´éœ²ä¸€äº›é…ç½®çš„æƒ…å†µï¼Œæ˜¯<code>ApplicationContext</code>å®ç°é»˜è®¤é¢„å…ˆå®ä¾‹åŒ–å•ä¾‹Beançš„åŸå› ã€‚
åœ¨å®é™…åˆ›å»ºè¿™äº›Beanä¹‹å‰ï¼Œå°½ç®¡éœ€è¦èŠ±è´¹ä¸€äº›å‰æœŸæ—¶é—´å’Œå†…å­˜ä»£ä»·ï¼Œä½†è¿™æ ·åšå¯ä»¥åœ¨åˆ›å»º<code>ApplicationContext</code>æ—¶å‘ç°é…ç½®é—®é¢˜ï¼Œè€Œä¸æ˜¯ä¹‹åã€‚
<strong>è¦†ç›–é»˜è®¤è¡Œä¸º</strong>ï¼š ä½ ä»ç„¶å¯ä»¥è¦†ç›–è¿™ç§é»˜è®¤è¡Œä¸ºï¼Œä½¿å¾—å•ä¾‹Beanå»¶è¿Ÿï¼ˆæ‡’åŠ è½½ï¼‰åˆå§‹åŒ–ï¼Œè€Œä¸æ˜¯é¢„å…ˆå®ä¾‹åŒ–ã€‚</p>
<h2>ä¾èµ–æ³¨å…¥çš„ä¾‹å­</h2>
<h3>Setterä¾èµ–æ³¨å…¥</h3>
<p>ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨åŸºäºXMLçš„é…ç½®å…ƒæ•°æ®æ¥å®ç°åŸºäºSetterçš„ä¾èµ–æ³¨å…¥ã€‚Spring XMLé…ç½®æ–‡ä»¶çš„ä¸€å°éƒ¨åˆ†å¦‚ä¸‹æ‰€ç¤ºï¼ŒæŒ‡å®šäº†ä¸€äº›<code>Bean</code>å®šä¹‰ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>exampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.ExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ä½¿ç”¨åµŒå¥—çš„ ref å…ƒç´ è¿›è¡ŒSetteræ³¨å…¥ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanOne<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anotherExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- ä½¿ç”¨æ›´ç®€æ´çš„ ref å±æ€§è¿›è¡ŒSetteræ³¨å…¥ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanTwo<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>yetAnotherBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>integerProperty<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anotherExampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.AnotherBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>yetAnotherBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.YetAnotherBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†ç›¸åº”çš„<code>ExampleBean</code>ç±»ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleBean</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">AnotherBean</span> beanOne<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">YetAnotherBean</span> beanTwo<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanOne</span><span class="token punctuation">(</span><span class="token class-name">AnotherBean</span> beanOne<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>beanOne <span class="token operator">=</span> beanOne<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanTwo</span><span class="token punctuation">(</span><span class="token class-name">YetAnotherBean</span> beanTwo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>beanTwo <span class="token operator">=</span> beanTwo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setIntegerProperty</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>i <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>æ„é€ å‡½æ•°ä¾èµ–æ³¨å…¥</h3>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒSetter æ–¹æ³•è¢«å£°æ˜æ¥åŒ¹é… XML æ–‡ä»¶ä¸­æŒ‡å®šçš„å±æ€§ã€‚ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨åŸºäºæ„é€ å‡½æ•°ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>exampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.ExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ä½¿ç”¨åµŒå¥—çš„refå…ƒç´ è¿›è¡Œæ„é€ å‡½æ•°æ³¨å…¥ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anotherExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- ä½¿ç”¨æ›´ç®€æ´çš„refå±æ€§è¿›è¡Œæ„é€ å‡½æ•°æ³¨å…¥ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>yetAnotherBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>int<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anotherExampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.AnotherBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>yetAnotherBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.YetAnotherBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>å¯¹åº”çš„<code>ExampleBean</code>ç±»å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleBean</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">AnotherBean</span> beanOne<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">YetAnotherBean</span> beanTwo<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ExampleBean</span><span class="token punctuation">(</span>
        <span class="token class-name">AnotherBean</span> anotherBean<span class="token punctuation">,</span> <span class="token class-name">YetAnotherBean</span> yetAnotherBean<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>beanOne <span class="token operator">=</span> anotherBean<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>beanTwo <span class="token operator">=</span> yetAnotherBean<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>i <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨<code>Bean</code>å®šä¹‰ä¸­æŒ‡å®šçš„æ„é€ å‡½æ•°å‚æ•°å°†ä½œä¸º<code>ExampleBean</code>çš„æ„é€ å‡½æ•°å‚æ•°ä½¿ç”¨ã€‚</p>
<h3>é™æ€å·¥å‚æ–¹æ³•ä¾èµ–æ³¨å…¥</h3>
<p>ç°åœ¨è€ƒè™‘è¿™ä¸ªç¤ºä¾‹çš„ä¸€ä¸ªå˜ä½“ï¼Œåœ¨è¿™ä¸ªå˜ä½“ä¸­ï¼Œä¸æ˜¯ä½¿ç”¨æ„é€ å‡½æ•°ï¼Œè€Œæ˜¯å‘Šè¯‰ Spring è°ƒç”¨ä¸€ä¸ªé™æ€å·¥å‚æ–¹æ³•æ¥è¿”å›å¯¹è±¡çš„å®ä¾‹ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>exampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.ExampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>createInstance<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anotherExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>yetAnotherBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anotherExampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.AnotherBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>yetAnotherBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.YetAnotherBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†ç›¸åº”çš„<code>ExampleBean</code>ç±»ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleBean</span> <span class="token punctuation">{</span>

	<span class="token comment">// ç§æœ‰æ„é€ å‡½æ•°</span>
	<span class="token keyword">private</span> <span class="token class-name">ExampleBean</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// é™æ€å·¥å‚æ–¹æ³•ï¼›è¯¥æ–¹æ³•çš„å‚æ•°å¯ä»¥è¢«è§†ä¸ºè¿”å›çš„Beançš„ä¾èµ–é¡¹ï¼Œ</span>
	<span class="token comment">// ä¸ç®¡è¿™äº›å‚æ•°å®é™…ä¸Šæ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ExampleBean</span> createInstance <span class="token punctuation">(</span>
		<span class="token class-name">AnotherBean</span> anotherBean<span class="token punctuation">,</span> <span class="token class-name">YetAnotherBean</span> yetAnotherBean<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token class-name">ExampleBean</span> eb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExampleBean</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// å…¶ä»–æ“ä½œ...</span>
		<span class="token keyword">return</span> eb<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é™æ€å·¥å‚æ–¹æ³•çš„å‚æ•°ç”±<code>&lt;constructor-arg/&gt;</code>å…ƒç´ æä¾›ï¼Œä¸å®é™…ä½¿ç”¨æ„é€ å‡½æ•°æ—¶å®Œå…¨ç›¸åŒã€‚
è¢«å·¥å‚æ–¹æ³•è¿”å›çš„ç±»çš„ç±»å‹ä¸ä¸€å®šä¸åŒ…å«é™æ€å·¥å‚æ–¹æ³•çš„ç±»çš„ç±»å‹ç›¸åŒï¼ˆå°½ç®¡åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒæ˜¯ç›¸åŒçš„ï¼‰ã€‚
å®ä¾‹ï¼ˆéé™æ€ï¼‰å·¥å‚æ–¹æ³•å¯ä»¥ä»¥åŸºæœ¬ç›¸åŒçš„æ–¹å¼ä½¿ç”¨ï¼ˆé™¤äº†ä½¿ç”¨<code>factory-bean</code>å±æ€§è€Œä¸æ˜¯<code>class</code>å±æ€§ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬ä¸åœ¨æ­¤è®¨è®ºè¿™äº›ç»†èŠ‚ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>ä½¿ç”¨depends-on</title>
      <link>https://www.geekyspace.cn/md/spring-framework/core/dependencies/factory-dependson.html</link>
      <guid>https://www.geekyspace.cn/md/spring-framework/core/dependencies/factory-dependson.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">ä½¿ç”¨depends-on</source>
      <description>ä½¿ç”¨depends-on å¦‚æœä¸€ä¸ªBeanæ˜¯å¦ä¸€ä¸ªBeançš„ä¾èµ–é¡¹ï¼Œè¿™æ„å‘³ç€ä¸€ä¸ªBeanè¢«è®¾ç½®ä¸ºå¦ä¸€ä¸ªBeançš„å±æ€§ã€‚ å¯ä»¥é€šè¿‡&amp;lt;ref/&amp;gt;å…ƒç´  æ¥å®ç°è¿™ä¸€ç‚¹ã€‚ ç„¶è€Œï¼Œæœ‰æ—¶Beanä¹‹é—´çš„ä¾èµ–å…³ç³»å¹¶ä¸é‚£ä¹ˆç›´æ¥ã€‚ ä¸¾ä¸ªä¾‹å­ï¼šå½“ä¸€ä¸ªç±»ä¸­çš„é™æ€åˆå§‹åŒ–å™¨éœ€è¦è¢«è§¦å‘æ—¶ï¼Œæ¯”å¦‚æ•°æ®åº“é©±åŠ¨ç¨‹åºçš„æ³¨å†Œã€‚ depends-onå±æ€§å¯ä»¥å¼ºåˆ¶å®¹å™¨åœ¨åˆå§‹åŒ–beanOne Bean...</description>
      <category>Spring</category>
      <pubDate>Tue, 26 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>å¦‚æœä¸€ä¸ªBeanæ˜¯å¦ä¸€ä¸ªBeançš„ä¾èµ–é¡¹ï¼Œè¿™æ„å‘³ç€ä¸€ä¸ªBeanè¢«è®¾ç½®ä¸ºå¦ä¸€ä¸ªBeançš„å±æ€§ã€‚
å¯ä»¥é€šè¿‡<a href="https://docs.spring.io/spring-framework/reference/core/beans/dependencies/factory-dependson.html#beans-ref-element" target="_blank" rel="noopener noreferrer">&lt;ref/&gt;å…ƒç´ </a>
æ¥å®ç°è¿™ä¸€ç‚¹ã€‚ ç„¶è€Œï¼Œæœ‰æ—¶Beanä¹‹é—´çš„ä¾èµ–å…³ç³»å¹¶ä¸é‚£ä¹ˆç›´æ¥ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šå½“ä¸€ä¸ªç±»ä¸­çš„é™æ€åˆå§‹åŒ–å™¨éœ€è¦è¢«è§¦å‘æ—¶ï¼Œæ¯”å¦‚æ•°æ®åº“é©±åŠ¨ç¨‹åºçš„æ³¨å†Œã€‚
<code>depends-on</code>å±æ€§å¯ä»¥å¼ºåˆ¶å®¹å™¨åœ¨åˆå§‹åŒ–<code>beanOne</code> Beanä¹‹å‰å…ˆåˆå§‹åŒ–æŒ‡å®šçš„<code>manager</code> Beanã€‚
ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨<code>depends-on</code>å±æ€§æ¥è¡¨è¾¾å¯¹å•ä¸ªBeançš„ä¾èµ–ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanOne<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ExampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">depends-on</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>manager<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>manager<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ManagerBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>è¦è¡¨è¾¾å¯¹å¤šä¸ªBeançš„ä¾èµ–ï¼Œå¯ä»¥å°†å¤šä¸ªBeanåç§°ä½œä¸º<code>depends-on</code>å±æ€§çš„å€¼æä¾›ï¼ˆé€šè¿‡é€—å·ã€ç©ºæ ¼å’Œåˆ†å·è¿›è¡Œåˆ†éš”ï¼‰ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanOne<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ExampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">depends-on</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>manager,accountDao<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>manager<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>manager<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>manager<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ManagerBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>accountDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>x.y.jdbc.JdbcAccountDao<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p><code>depends-on</code>å±æ€§ä¸ä»…å¯ä»¥æŒ‡å®šåˆå§‹åŒ–æ—¶çš„ä¾èµ–å…³ç³»ï¼Œè€Œä¸”åœ¨
<a href="https://docs.spring.io/spring-framework/reference/core/beans/factory-scopes.html#beans-factory-scopes-singleton" target="_blank" rel="noopener noreferrer">å•ä¾‹</a>
Beançš„æƒ…å†µä¸‹ï¼Œè¿˜å¯ä»¥æŒ‡å®šç›¸åº”çš„é”€æ¯æ—¶ä¾èµ–å…³ç³»ã€‚
<code>depends-on</code>æŒ‡å®šçš„ä¾èµ–Beanä¼šåœ¨ç»™å®šBeanæœ¬èº«è¢«é”€æ¯ä¹‹å‰è¢«é¦–å…ˆé”€æ¯ã€‚å› æ­¤ï¼Œ<code>depends-on</code>ä¹Ÿå¯ä»¥æ§åˆ¶å…³é—­é¡ºåºã€‚</p>
</div>
]]></content:encoded>
    </item>
    <item>
      <title>æ‡’åŠ è½½ï¼ˆLazy Initializationï¼‰Bean</title>
      <link>https://www.geekyspace.cn/md/spring-framework/core/dependencies/factory-lazy-init.html</link>
      <guid>https://www.geekyspace.cn/md/spring-framework/core/dependencies/factory-lazy-init.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">æ‡’åŠ è½½ï¼ˆLazy Initializationï¼‰Bean</source>
      <description>æ‡’åŠ è½½ï¼ˆLazy Initializationï¼‰Bean åœ¨Springæ¡†æ¶ä¸­ï¼ŒApplicationContextçš„é»˜è®¤è¡Œä¸ºæ˜¯åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­ç«‹å³åˆ›å»ºå¹¶é…ç½®æ‰€æœ‰çš„å•ä¾‹Beanã€‚ è¿™ç§åšæ³•æœ‰åˆ©äºåŠæ—¶å‘ç°é…ç½®é”™è¯¯æˆ–ç¯å¢ƒé—®é¢˜ï¼Œé¿å…äº†é”™è¯¯åœ¨åº”ç”¨è¿è¡Œä¸€æ®µæ—¶é—´åæ‰æš´éœ²ã€‚ ç„¶è€Œï¼Œå¦‚æœéœ€è¦æ”¹å˜è¿™ä¸€è¡Œä¸ºï¼Œå¯ä»¥é€šè¿‡è®¾ç½®Beanå®šä¹‰ä¸ºæ‡’åŠ è½½ï¼ˆlazy-initializedï¼‰...</description>
      <category>Spring</category>
      <pubDate>Tue, 26 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>åœ¨Springæ¡†æ¶ä¸­ï¼Œ<code>ApplicationContext</code>çš„é»˜è®¤è¡Œä¸ºæ˜¯åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­ç«‹å³åˆ›å»ºå¹¶é…ç½®æ‰€æœ‰çš„å•ä¾‹Beanã€‚
è¿™ç§åšæ³•æœ‰åˆ©äºåŠæ—¶å‘ç°é…ç½®é”™è¯¯æˆ–ç¯å¢ƒé—®é¢˜ï¼Œé¿å…äº†é”™è¯¯åœ¨åº”ç”¨è¿è¡Œä¸€æ®µæ—¶é—´åæ‰æš´éœ²ã€‚
ç„¶è€Œï¼Œå¦‚æœéœ€è¦æ”¹å˜è¿™ä¸€è¡Œä¸ºï¼Œå¯ä»¥é€šè¿‡è®¾ç½®Beanå®šä¹‰ä¸ºæ‡’åŠ è½½ï¼ˆlazy-initializedï¼‰æ¥å®ç°ã€‚
è¿™æ ·ä¸€æ¥ï¼ŒBeançš„å®ä¾‹åŒ–å°†è¢«æ¨è¿Ÿåˆ°ç¬¬ä¸€æ¬¡å®é™…è¯·æ±‚è¯¥Beanæ—¶è¿›è¡Œï¼Œè€Œä¸æ˜¯åœ¨åº”ç”¨å¯åŠ¨æ—¶å®Œæˆï¼Œä»è€Œæä¾›äº†æ›´å¤§çš„çµæ´»æ€§å’Œæ§åˆ¶ã€‚</p>
<p>åœ¨XMLä¸­ï¼Œé€šè¿‡<code>&lt;bean/&gt;</code>å…ƒç´ ä¸Šçš„<code>lazy-init</code>å±æ€§æ¥æ§åˆ¶è¿™ç§è¡Œä¸ºï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- å°†Beanå®šä¹‰ä¸ºæ‡’åŠ è½½ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lazy<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.something.ExpensiveToCreateBean<span class="token punctuation">"</span></span> <span class="token attr-name">lazy-init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- é»˜è®¤ç«‹å³åˆ›å»ºBean --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>not.lazy<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.something.AnotherBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>å½“ä¸Šè¿°é…ç½®è¢«<code>ApplicationContext</code>åŠ è½½å¯åŠ¨æ—¶ï¼Œ<code>lazy</code> Beanä¸ä¼šç«‹å³é¢„å®ä¾‹åŒ–ï¼Œè€Œ<code>not.lazy</code> Beanåˆ™ä¼šè¢«æ€¥åˆ‡åœ°é¢„å®ä¾‹åŒ–ã€‚</p>
<p>ç„¶è€Œï¼Œå½“ä¸€ä¸ªæ‡’åŠ è½½çš„Beanä½œä¸ºå¦ä¸€ä¸ªæœªæ ‡è®°ä¸ºæ‡’åŠ è½½å•ä¾‹Beançš„ä¾èµ–é¡¹æ—¶ï¼Œ<code>ApplicationContext</code>ä¼šåœ¨å¯åŠ¨æ—¶åˆ›å»ºè¿™ä¸ªæ‡’åŠ è½½çš„Beanï¼Œ
å› ä¸ºå®ƒå¿…é¡»æ»¡è¶³å•ä¾‹Beançš„ä¾èµ–å…³ç³»ã€‚æ‡’åŠ è½½çš„Beanä¼šè¢«æ³¨å…¥åˆ°ä¸€ä¸ªæœªæ ‡è®°ä¸ºæ‡’åŠ è½½çš„å•ä¾‹Beanä¸­ã€‚</p>
<p>ä½ è¿˜å¯ä»¥é€šè¿‡åœ¨<code>&lt;beans/&gt;</code>å…ƒç´ ä¸Šä½¿ç”¨<code>default-lazy-init</code>å±æ€§æ¥æ§åˆ¶å®¹å™¨çº§åˆ«çš„æ‡’åŠ è½½åˆå§‹åŒ–ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">default-lazy-init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- ä¸ä¼šé¢„å®ä¾‹åŒ–ä»»ä½•Bean... --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>æ–¹æ³•æ³¨å…¥</title>
      <link>https://www.geekyspace.cn/md/spring-framework/core/dependencies/factory-method-injection.html</link>
      <guid>https://www.geekyspace.cn/md/spring-framework/core/dependencies/factory-method-injection.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">æ–¹æ³•æ³¨å…¥</source>
      <description>æ–¹æ³•æ³¨å…¥ å¤§å¤šæ•°åº”ç”¨åœºæ™¯ä¸­ï¼Œå®¹å™¨ä¸­çš„å¤§å¤šæ•°Beanéƒ½æ˜¯å•ä¾‹ï¼ˆsingletonï¼‰ çš„ã€‚ å½“ä¸€ä¸ªå•ä¾‹ï¼ˆsingletonï¼‰Beanéœ€è¦ä¸åŸå‹ï¼ˆprototypeï¼‰Beanåä½œæ—¶ï¼Œä¼ ç»Ÿçš„æ³¨å…¥æ–¹å¼å¯èƒ½ä¸å†é€‚ç”¨ã€‚ è¿™æ˜¯å› ä¸ºå•ä¾‹Beanåœ¨æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸå†…åªåˆ›å»ºä¸€æ¬¡ï¼Œè€ŒåŸå‹Beanæ¯æ¬¡è¯·æ±‚æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚ ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯æ”¾å¼ƒä¸€äº›æ§åˆ¶åè½¬ï¼ˆinversio...</description>
      <category>Spring</category>
      <pubDate>Tue, 26 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>å¤§å¤šæ•°åº”ç”¨åœºæ™¯ä¸­ï¼Œå®¹å™¨ä¸­çš„å¤§å¤šæ•°Beanéƒ½æ˜¯<a href="https://docs.spring.io/spring-framework/reference/core/beans/factory-scopes.html#beans-factory-scopes-singleton" target="_blank" rel="noopener noreferrer">å•ä¾‹ï¼ˆsingletonï¼‰</a>
çš„ã€‚
å½“ä¸€ä¸ªå•ä¾‹ï¼ˆsingletonï¼‰Beanéœ€è¦ä¸åŸå‹ï¼ˆprototypeï¼‰Beanåä½œæ—¶ï¼Œä¼ ç»Ÿçš„æ³¨å…¥æ–¹å¼å¯èƒ½ä¸å†é€‚ç”¨ã€‚
è¿™æ˜¯å› ä¸ºå•ä¾‹Beanåœ¨æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸå†…åªåˆ›å»ºä¸€æ¬¡ï¼Œè€ŒåŸå‹Beanæ¯æ¬¡è¯·æ±‚æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</p>
<p>ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯æ”¾å¼ƒä¸€äº›æ§åˆ¶åè½¬ï¼ˆinversion of controlï¼‰ã€‚
é€šè¿‡å®ç°<a href="https://docs.spring.io/spring-framework/reference/core/beans/factory-nature.html#beans-factory-aware" target="_blank" rel="noopener noreferrer">ApplicationContextAware</a>
æ¥å£ä½¿Bean Aæ„è¯†åˆ°Spring IoCå®¹å™¨ ï¼Œå¹¶
<a href="https://docs.spring.io/spring-framework/reference/core/beans/basics.html#beans-factory-client" target="_blank" rel="noopener noreferrer">ä½¿ç”¨å®¹å™¨</a>
è¿›è¡Œ<code>getBean("B")</code>è°ƒç”¨ï¼Œæ¯æ¬¡Bean Aéœ€è¦æ—¶è¯·æ±‚ï¼ˆæ–°å»º<code>new</code>ï¼‰Bean Bå®ä¾‹ã€‚ ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†è¿™ç§æ–¹æ³•ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">fiona<span class="token punctuation">.</span>apple</span><span class="token punctuation">;</span>

<span class="token comment">// å¯¼å…¥ Spring æ¡†æ¶ç›¸å…³ç±»</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span></span><span class="token class-name">BeansException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContextAware</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * ä½¿ç”¨ä¸€ä¸ªæœ‰çŠ¶æ€çš„ Command-style ç±»æ¥æ‰§è¡Œä¸€äº›å¤„ç†çš„ç±»ã€‚
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CommandManager</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationContextAware</span> <span class="token punctuation">{</span>

	<span class="token keyword">private</span> <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">Map</span> commandState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    <span class="token comment">// è·å–ä¸€ä¸ªé€‚å½“çš„ Command çš„æ–°å®ä¾‹</span>
		<span class="token class-name">Command</span> command <span class="token operator">=</span> <span class="token function">createCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// è®¾ç½® Command çš„çŠ¶æ€</span>
		command<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>commandState<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> command<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">protected</span> <span class="token class-name">Command</span> <span class="token function">createCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// æ³¨æ„ Spring API çš„ä¾èµ–ï¼</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"command"</span><span class="token punctuation">,</span> <span class="token class-name">Command</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setApplicationContext</span><span class="token punctuation">(</span>
			<span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext <span class="token operator">=</span> applicationContext<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸Šè¿°æ–¹æ³•å¹¶ä¸ç†æƒ³ï¼Œå› ä¸ºä¸šåŠ¡ä»£ç æ„è¯†åˆ°å¹¶ä¸Springæ¡†æ¶è€¦åˆã€‚
æ–¹æ³•æ³¨å…¥ï¼ˆMethod Injectionï¼‰æ˜¯Spring IoCå®¹å™¨çš„ä¸€ç§é«˜çº§ç‰¹æ€§ï¼Œå¯ä»¥å¹²å‡€åœ°å¤„ç†è¿™ç§ç”¨ä¾‹ã€‚</p>
<blockquote>
<p>ä½ å¯ä»¥åœ¨<a href="https://spring.io/blog/2004/08/06/method-injection/" target="_blank" rel="noopener noreferrer">è¿™ç¯‡åšå®¢æ–‡ç« </a>ä¸­é˜…è¯»æ›´å¤šå…³äºæ–¹æ³•æ³¨å…¥çš„åŠ¨æœºã€‚</p>
</blockquote>
<h2>æŸ¥æ‰¾æ–¹æ³•ä¾èµ–æ³¨å…¥</h2>
<h2>ä»»æ„æ–¹æ³•æ›¿æ¢</h2>
]]></content:encoded>
    </item>
    <item>
      <title>ä¾èµ–å’Œé…ç½®è¯¦è§£</title>
      <link>https://www.geekyspace.cn/md/spring-framework/core/dependencies/factory-properties-detailed.html</link>
      <guid>https://www.geekyspace.cn/md/spring-framework/core/dependencies/factory-properties-detailed.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">ä¾èµ–å’Œé…ç½®è¯¦è§£</source>
      <description>ä¾èµ–å’Œé…ç½®è¯¦è§£ æ­£å¦‚å‰ä¸€èŠ‚æ‰€è¿°ï¼Œæ‚¨å¯ä»¥å°†Beanå±æ€§å’Œæ„é€ å‡½æ•°å‚æ•°å®šä¹‰ä¸ºå¯¹å…¶å®ƒæ‰˜ç®¡Beanï¼ˆåä½œè€…ï¼‰çš„å¼•ç”¨æˆ–å†…è”å®šä¹‰çš„å€¼ã€‚ SpringåŸºäºXMLçš„é…ç½®å…ƒæ•°æ®æ”¯æŒ&amp;lt;property/&amp;gt;å’Œ&amp;lt;constructor-arg/&amp;gt;å…ƒç´ å†…çš„å­å…ƒç´ ç±»å‹ï¼Œä»¥è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚ å­—é¢å€¼ (åŸºæœ¬ç±»å‹ã€ String ç­‰) &amp;lt;property/&amp;gt;å…ƒç´ çš„valueå±æ€§æŒ‡å®šäº†ä¸€ä¸ª...</description>
      <category>Spring</category>
      <pubDate>Tue, 26 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<p>æ­£å¦‚å‰ä¸€èŠ‚æ‰€è¿°ï¼Œæ‚¨å¯ä»¥å°†<code>Bean</code>å±æ€§å’Œæ„é€ å‡½æ•°å‚æ•°å®šä¹‰ä¸ºå¯¹å…¶å®ƒ<mark>æ‰˜ç®¡Beanï¼ˆåä½œè€…ï¼‰çš„å¼•ç”¨</mark>æˆ–<mark>å†…è”å®šä¹‰çš„å€¼</mark>ã€‚
SpringåŸºäºXMLçš„é…ç½®å…ƒæ•°æ®æ”¯æŒ<code>&lt;property/&gt;</code>å’Œ<code>&lt;constructor-arg/&gt;</code>å…ƒç´ å†…çš„å­å…ƒç´ ç±»å‹ï¼Œä»¥è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚</p>
<h2>å­—é¢å€¼ (åŸºæœ¬ç±»å‹ã€ String ç­‰)</h2>
<p><code>&lt;property/&gt;</code>å…ƒç´ çš„<code>value</code>å±æ€§æŒ‡å®šäº†ä¸€ä¸ªå±æ€§æˆ–æ„é€ å‡½æ•°å‚æ•°çš„å¯è¯»å­—ç¬¦ä¸²è¡¨ç¤ºã€‚
Springä½¿ç”¨ <a href="https://docs.spring.io/spring-framework/reference/core/validation/convert.html#core-convert-ConversionService-API" target="_blank" rel="noopener noreferrer">è½¬æ¢æœåŠ¡</a>
æ¥å°†è¿™äº›å€¼ä»å­—ç¬¦ä¸²è½¬æ¢ä¸ºå±æ€§æˆ–å‚æ•°çš„å®é™…ç±»å‹ã€‚ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†è®¾ç½®å„ç§å€¼çš„æ–¹å¼ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myDataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.apache.commons.dbcp.BasicDataSource<span class="token punctuation">"</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>close<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- è°ƒç”¨ setDriverClassName(String) æ–¹æ³• --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driverClassName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.mysql.jdbc.Driver<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbc:mysql://localhost:3306/mydb<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>misterkaoli<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨äº†<a href="#%E4%BD%BF%E7%94%A8p-%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E7%9A%84xml%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F">p-å‘½åç©ºé—´</a>ï¼Œä½¿å¾— XML é…ç½®æ›´åŠ ç®€æ´ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/p<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans
    https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myDataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.apache.commons.dbcp.BasicDataSource<span class="token punctuation">"</span></span>
          <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>close<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">p:</span>driverClassName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.mysql.jdbc.Driver<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">p:</span>url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbc:mysql://localhost:3306/mydb<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">p:</span>username</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">p:</span>password</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>misterkaoli<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å‰é¢çš„ XML æ›´åŠ ç®€æ´ã€‚ä½†æ˜¯ï¼Œæ‹¼å†™é”™è¯¯æ˜¯åœ¨è¿è¡Œæ—¶è€Œä¸æ˜¯è®¾è®¡æ—¶è¢«å‘ç°ã€‚
é™¤éä½ ä½¿ç”¨æ”¯æŒåœ¨åˆ›å»º Bean å®šä¹‰æ—¶è¿›è¡Œè‡ªåŠ¨å±æ€§å®Œæˆçš„é›†æˆå¼€å‘ç¯å¢ƒï¼ˆä¾‹å¦‚<a href="https://www.jetbrains.com/idea/" target="_blank" rel="noopener noreferrer">IntelliJ IDEA</a>
æˆ–<a href="https://spring.io/tools" target="_blank" rel="noopener noreferrer">Spring Tools for Eclipse</a>ï¼‰ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨è¿™ç±» IDE çš„å¸®åŠ©ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥é…ç½®ä¸€ä¸ª<code>java.util.Properties</code>å®ä¾‹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mappings<span class="token punctuation">"</span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.context.support.PropertySourcesPlaceholderConfigurer<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- ä½œä¸º java.util.Properties ç±»å‹ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>properties<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>
            jdbc.driver.className=com.mysql.jdbc.Driver
            jdbc.url=jdbc:mysql://localhost:3306/mydb
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Springå®¹å™¨ä¼šåˆ©ç”¨JavaBeansçš„<code>PropertyEditor</code>æœºåˆ¶ï¼Œå°†<code>&lt;value/&gt;</code>å…ƒç´ å†…çš„æ–‡æœ¬è½¬æ¢ä¸º<code>java.util.Properties</code>å®ä¾‹ã€‚
è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¿«æ·æ–¹å¼ï¼ŒSpringå›¢é˜Ÿä¸­åœ¨ä¸€äº›åœºæ™¯ä¸­æ›´å€¾å‘äºä½¿ç”¨åµŒå¥—çš„<code>&lt;value/&gt;</code>å…ƒç´ è€Œä¸æ˜¯<code>value</code>å±æ€§çš„æ–¹å¼ã€‚</p>
<h3>idrefå…ƒç´ </h3>
<p><code>idref</code>å…ƒç´ ä»…ä»…æ˜¯å°†å®¹å™¨ä¸­å¦ä¸€ä¸ª<code>Bean</code>çš„idï¼ˆä¸€ä¸ªå­—ç¬¦ä¸²å€¼ï¼Œè€Œä¸æ˜¯å¼•ç”¨ï¼‰
ä¼ é€’ç»™<code>&lt;constructor-arg/&gt;</code>æˆ–<code>&lt;property/&gt;</code>å…ƒç´ çš„ä¸€ç§é˜²é”™æ–¹å¼ã€‚ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨å®ƒã€‚</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>theTargetBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>...<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>theClientBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>...<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>targetName<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>idref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>theTargetBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä¸Šé¢çš„ Bean å®šä¹‰ç‰‡æ®µï¼ˆåœ¨è¿è¡Œæ—¶ï¼‰ä¸ä»¥ä¸‹ä»£ç ç‰‡æ®µå®Œå…¨ç­‰ä»·ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>theTargetBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>...<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>client<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>...<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>targetName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>theTargetBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ç¬¬ä¸€ç§å½¢å¼æ¯”ç¬¬äºŒç§å½¢å¼å¥½ï¼Œä½¿ç”¨<code>idref</code>æ ‡ç­¾å¯ä»¥åœ¨éƒ¨ç½²æ—¶éªŒè¯å¼•ç”¨çš„<code>Bean</code>æ˜¯å¦å­˜åœ¨ï¼Œ
é¿å…åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œå½“å®ä¾‹åŒ–æ—¶æ‰å‘ç°æ‹¼å†™é”™è¯¯æˆ–ä¸å­˜åœ¨çš„å¼•ç”¨ï¼ˆå¹¶ä¸”å¯èƒ½å¯¼è‡´è‡´å‘½çš„ç»“æœï¼‰ã€‚è¿™æé«˜äº†é…ç½®æ–‡ä»¶çš„å¯é æ€§å’Œæ˜“è¯»æ€§ã€‚</p>
<div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p>4.0 ç‰ˆBean XSDä¸­ï¼Œä¸å†æ”¯æŒ<code>idref</code>å…ƒç´ ä¸Šçš„<code>local</code>å±æ€§ï¼Œå› ä¸ºå®ƒä¸å¸¸è§„çš„Beanå¼•ç”¨æ²¡æœ‰åŒºåˆ«ã€‚
åœ¨å‡çº§åˆ°4.0æ¨¡å¼æ—¶ï¼Œå°†ä½ ç°æœ‰çš„<code>idref</code>å±€éƒ¨å¼•ç”¨æ”¹ä¸º<code>idref bean</code>ã€‚</p>
</div>
<p><code>&lt;idref/&gt;</code>å…ƒç´ å¸¦æ¥ä»·å€¼çš„ä¸€ä¸ªå¸¸è§åœ°æ–¹ï¼ˆè‡³å°‘åœ¨æ—©äºSpring 2.0çš„ç‰ˆæœ¬ä¸­ï¼‰æ˜¯åœ¨<code>ProxyFactory</code> Bean
å®šä¹‰ä¸­é…ç½® <a href="https://docs.spring.io/spring-framework/reference/core/aop-api/pfb.html#aop-pfb-1" target="_blank" rel="noopener noreferrer">AOP interceptorï¼ˆæ‹¦æˆªå™¨ï¼‰</a>
ã€‚å½“ä½ æŒ‡å®šæ‹¦æˆªå™¨åç§°æ—¶ï¼Œä½¿ç”¨<code>&lt;idref/&gt;</code>å…ƒç´ å¯ä»¥é˜²æ­¢ä½ æŠŠæ‹¦æˆªå™¨çš„IDæ‹¼é”™ã€‚</p>
<h2>å¯¹å…¶ä»–Beançš„å¼•ç”¨ï¼ˆåä½œè€…ï¼‰</h2>
<p><strong><code>ref</code>å…ƒç´ ä½¿ç”¨<code>bean</code>å±æ€§å¼•ç”¨å…¶ä»–Bean</strong></p>
<p><code>ref</code>å…ƒç´ ä½œä¸º<code>&lt;constructor-arg/&gt;</code>æˆ–<code>&lt;property/&gt;</code>å®šä¹‰å…ƒç´ çš„å­å…ƒç´ ï¼Œå¯ä»¥å°†ä¸€ä¸ªBeançš„å±æ€§å€¼è®¾ç½®ä¸ºå®¹å™¨ç®¡ç†çš„å¦ä¸€ä¸ªBeanï¼ˆåä½œè€…ï¼‰çš„å¼•ç”¨ã€‚
è¿™ä¸ªè¢«å¼•ç”¨çš„Beanæ˜¯ä¾èµ–é¡¹ï¼Œå®ƒå°†åœ¨å±æ€§è®¾ç½®ä¹‹å‰è¢«åˆå§‹åŒ–ã€‚ï¼ˆå¦‚æœè¿™ä¸ªåä½œè€…Beanæ˜¯å•ä¾‹çš„ï¼Œå¯èƒ½è¢«å®¹å™¨è¿›è¡Œé¢„å…ˆåˆå§‹åŒ–ï¼‰
ä½œç”¨åŸŸï¼ˆscopeï¼‰å’ŒéªŒè¯å–å†³äºä½ æ˜¯å¦é€šè¿‡<code>bean</code>æˆ–<code>parent</code>å±æ€§æŒ‡å®šäº†å…¶ä»–å¯¹è±¡çš„IDæˆ–åç§°ã€‚</p>
<p>æœ€å¸¸è§çš„ä½¿ç”¨æ–¹å¼æ˜¯é€šè¿‡<code>&lt;ref/&gt;</code>æ ‡ç­¾çš„<code>bean</code>å±æ€§æ¥æŒ‡å®šç›®æ ‡Beanã€‚
è¿™æ ·åšå¯ä»¥åˆ›å»ºå¯¹åŒä¸€å®¹å™¨æˆ–çˆ¶å®¹å™¨ä¸­ä»»ä½•<code>Bean</code>çš„å¼•ç”¨ï¼Œæ— è®ºå®ƒä»¬æ˜¯å¦å®šä¹‰åœ¨åŒä¸€ä¸ªXMLæ–‡ä»¶ä¸­ã€‚
ä½¿ç”¨<code>bean</code>å±æ€§æ—¶ï¼Œä½ å¯ä»¥æŒ‡å®šç›®æ ‡Beançš„<code>id</code>æˆ–<code>name</code>å±æ€§ä¸­çš„ä¸€ä¸ªå€¼ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨<code>&lt;ref/&gt;</code>å…ƒç´ çš„ä¾‹å­ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>someBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p><strong><code>ref</code>å…ƒç´ ä½¿ç”¨<code>parent</code>å±æ€§å¼•ç”¨çˆ¶å®¹å™¨ä¸­çš„Bean</strong></p>
<p>é€šè¿‡<code>parent</code>å±æ€§ï¼Œå¯ä»¥åˆ›å»ºå¯¹å½“å‰å®¹å™¨çš„çˆ¶å®¹å™¨ä¸­çš„Beançš„å¼•ç”¨ã€‚
<code>parent</code>å±æ€§çš„å€¼å¯ä»¥ä¸ç›®æ ‡<code>Bean</code>çš„<code>id</code>å±æ€§æˆ–<code>name</code>å±æ€§ä¸­çš„ä¸€ä¸ªå€¼ç›¸åŒã€‚ ç›®æ ‡<code>Bean</code>å¿…é¡»åœ¨å½“å‰å®¹å™¨çš„çˆ¶å®¹å™¨ä¸­ã€‚
è¿™ç§æ–¹å¼ç‰¹åˆ«é€‚ç”¨äºå½“ä½ æœ‰ä¸€ä¸ªå®¹å™¨å±‚æ¬¡ç»“æ„ï¼Œå¹¶ä¸”å¸Œæœ›åœ¨å­å®¹å™¨ä¸­å¼•ç”¨çˆ¶å®¹å™¨ä¸­çš„ Bean æ—¶ï¼Œä¸”ä»£ç†å…·æœ‰ä¸çˆ¶ Bean å…·æœ‰ç›¸åŒåç§°çš„ Beanã€‚</p>
<p>ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨<code>parent</code>å±æ€§çš„ç¤ºä¾‹ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- åœ¨çˆ¶å®¹å™¨ä¸­ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>accountService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.something.SimpleAccountService<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- æ ¹æ®éœ€è¦åœ¨æ­¤å¤„æ’å…¥ä¾èµ–é¡¹ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- åœ¨å­å®¹å™¨ï¼ˆåä»£ï¼‰ä¸Šä¸‹æ–‡ä¸­ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>accountService<span class="token punctuation">"</span></span> <span class="token attr-name">&lt;!--</span> <span class="token attr-name">beanåç§°ä¸çˆ¶beanç›¸åŒ</span> <span class="token attr-name">--</span><span class="token punctuation">&gt;</span></span>
    class="org.springframework.aop.framework.ProxyFactoryBean"&gt;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>target<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>accountService<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- æ³¨æ„æˆ‘ä»¬æ˜¯å¦‚ä½•å¼•ç”¨çˆ¶beançš„ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- æ’å…¥å…¶ä»–é…ç½®å’Œä¾èµ–é¡¹ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p>4.0 ç‰ˆBean XSDä¸­ï¼Œ<code>ref</code>å…ƒç´ ä¸Šçš„<code>local</code>å±æ€§ä¸åœ¨æ”¯æŒï¼Œå› ä¸ºå®ƒä¸å¸¸è§„çš„Beanå¼•ç”¨æ²¡æœ‰åŒºåˆ«ã€‚
åœ¨å‡çº§åˆ°4.0æ¨¡å¼æ—¶ï¼Œå°†ä½ ç°æœ‰çš„<code>ref</code>å±€éƒ¨å¼•ç”¨æ”¹ä¸º<code>idref bean</code>ã€‚</p>
</div>
<h2>å†…éƒ¨ Bean</h2>
<p>åœ¨<code>&lt;property/&gt;</code>æˆ–<code>&lt;constructor-arg/&gt;</code>å…ƒç´ å†…éƒ¨ä½¿ç”¨<code>&lt;bean/&gt;</code>å…ƒç´ å®šä¹‰äº†ä¸€ä¸ªå†…éƒ¨Beanï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºã€‚</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>...<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ä¸ä½¿ç”¨å¯¹ç›®æ ‡ Bean çš„å¼•ç”¨ï¼Œè€Œæ˜¯ç›´æ¥å†…è”å®šä¹‰ç›®æ ‡ Bean --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>target<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.Person<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- è¿™æ˜¯å†…éƒ¨ Bean --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Fiona Apple<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>age<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>25<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å†…éƒ¨Beanå®šä¹‰ä¸éœ€è¦æŒ‡å®šIDæˆ–åç§°ã€‚å¦‚æœæŒ‡å®šäº†ï¼Œå®¹å™¨ä¸ä¼šå°†å®ƒä»¬ä½œæ ‡è¯†ç¬¦ã€‚
å®¹å™¨åœ¨åˆ›å»ºæ—¶ä¹Ÿä¼šå¿½ç•¥ä½œç”¨åŸŸï¼ˆscopeï¼‰æ ‡å¿—ï¼Œå› ä¸ºå†…éƒ¨Beanæ€»æ˜¯åŒ¿åçš„ï¼Œå¹¶ä¸”å§‹ç»ˆä¸å¤–éƒ¨Beanä¸€èµ·åˆ›å»ºã€‚
æ— æ³•ç‹¬ç«‹åœ°è®¿é—®å†…éƒ¨Beanï¼Œä¹Ÿæ— æ³•å°†å…¶æ³¨å…¥åˆ°é™¤å°é—­Beanä¹‹å¤–çš„å…¶ä»–åä½œBeanä¸­ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªç‰¹ä¾‹ï¼Œå¯ä»¥ä»è‡ªå®šä¹‰ä½œç”¨åŸŸï¼ˆscopeï¼‰ä¸­æ¥æ”¶é”€æ¯å›è°ƒï¼Œä¾‹å¦‚ï¼Œå¯¹äºåŒ…å«åœ¨å•ä¾‹Beanä¸­çš„è¯·æ±‚ä½œç”¨åŸŸï¼ˆscopeï¼‰çš„å†…å±‚Beanã€‚
å†…å±‚Beanå®ä¾‹çš„åˆ›å»ºä¸å…¶åŒ…å«çš„Beanç›¸å…³è”ï¼Œä½†æ˜¯é”€æ¯å›è°ƒå…è®¸å®ƒå‚ä¸åˆ°è¯·æ±‚ä½œç”¨åŸŸï¼ˆscopeï¼‰çš„ç”Ÿå‘½å‘¨æœŸä¸­ã€‚
è¿™å¹¶ä¸æ˜¯ä¸€ç§å¸¸è§çš„æƒ…å†µã€‚å†…å±‚Beané€šå¸¸åªæ˜¯ç®€å•åœ°å…±äº«å…¶åŒ…å«Beançš„ä½œç”¨åŸŸï¼ˆscopeï¼‰ã€‚</p>
<h2>é›†åˆï¼ˆCollectionï¼‰</h2>
<p><code>&lt;list/&gt;</code>ã€<code>&lt;set/&gt;</code>ã€<code>&lt;map/&gt;</code>å’Œ<code>&lt;props/&gt;</code> å…ƒç´ åˆ†åˆ«ç”¨äºè®¾ç½® Java é›†åˆç±»å‹<code>List</code>ã€<code>Set</code>ã€<code>Map</code>å’Œ<code>Properties</code>çš„å±æ€§å’Œå‚æ•°ã€‚</p>
<p>ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨å®ƒä»¬ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>moreComplexObject<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>example.ComplexObject<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- è°ƒç”¨ setAdminEmails(java.util.Properties) æ–¹æ³• --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>adminEmails<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>props</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>administrator<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>administrator@example.org<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>support<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>support@example.org<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>development@example.org<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>props</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- è°ƒç”¨ setSomeList(java.util.List) æ–¹æ³• --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>someList<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>a list element followed by a reference<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myDataSource<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- è°ƒç”¨ setSomeMap(java.util.Map) æ–¹æ³• --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>someMap<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>map</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>an entry<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>just some string<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>a ref<span class="token punctuation">"</span></span> <span class="token attr-name">value-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myDataSource<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>map</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- è°ƒç”¨ setSomeSet(java.util.Set) æ–¹æ³• --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>someSet<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>just some string<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myDataSource<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>Map</code>çš„é”®å€¼å¯¹ä¸­çš„å€¼ã€æˆ–è€…<code>Set</code>ä¸­çš„å…ƒç´ ï¼Œå¯ä»¥æ˜¯ä»¥ä¸‹ä»»ä¸€å…ƒç´ ï¼š</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>bean | ref | idref | list | set | map | props | value | null
</code></pre></div><h3>é›†åˆåˆå¹¶ï¼ˆmergingï¼‰</h3>
<p>Spring å®¹å™¨è¿˜æ”¯æŒé›†åˆåˆå¹¶ã€‚å¼€å‘è€…å¯ä»¥å®šä¹‰ä¸€ä¸ªçˆ¶çº§<code>&lt;list/&gt;</code>ã€<code>&lt;map/&gt;</code>ã€<code>&lt;set/&gt;</code>æˆ–<code>&lt;props/&gt;</code>å…ƒç´ ï¼Œ
å¹¶è®©å­çº§<code>&lt;list/&gt;</code>ã€<code>&lt;map/&gt;</code>ã€<code>&lt;set/&gt;</code> æˆ– <code>&lt;props/&gt;</code>å…ƒç´ ç»§æ‰¿å¹¶è¦†ç›–çˆ¶é›†åˆä¸­çš„å€¼ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå­é›†åˆçš„å€¼æ˜¯åˆå¹¶çˆ¶å­é›†åˆçš„å…ƒç´ åçš„ç»“æœï¼Œå…¶ä¸­å­é›†åˆçš„å…ƒç´ ä¼šè¦†ç›–åœ¨çˆ¶é›†åˆä¸­æŒ‡å®šçš„å€¼ã€‚
è¿™éƒ¨åˆ†å…³äºåˆå¹¶ï¼ˆmergingï¼‰çš„å†…å®¹è®¨è®ºäº†çˆ¶å­Beanæœºåˆ¶ã€‚å¯¹äºä¸ç†Ÿæ‚‰çˆ¶å­Beanå®šä¹‰çš„è¯»è€…ï¼Œå»ºè®®åœ¨ç»§ç»­é˜…è¯»ä¹‹å‰é˜…è¯»<a href="https://docs.spring.io/spring-framework/reference/core/beans/child-bean-definitions.html" target="_blank" rel="noopener noreferrer">ç›¸å…³ç« èŠ‚</a>ã€‚</p>
<p>ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº†é›†åˆåˆå¹¶ï¼ˆmergingï¼‰ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- çˆ¶ Bean å®šä¹‰ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span> <span class="token attr-name">abstract</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>example.ComplexObject<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>adminEmails<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>props</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>administrator<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>administrator@example.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>support<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>support@example.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>props</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- å­ Bean ç»§æ‰¿çˆ¶ Bean å®šä¹‰ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>child<span class="token punctuation">"</span></span> <span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>adminEmails<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- merge åœ¨å­é›†åˆå®šä¹‰ä¸Šè¿›è¡Œäº†æŒ‡å®š --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>props</span> <span class="token attr-name">merge</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sales<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>sales@example.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>support<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>support@example.co.uk<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>props</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>è¯·æ³¨æ„ï¼Œåœ¨å­Beanå®šä¹‰çš„<code>adminEmails</code>å±æ€§çš„<code>&lt;props/&gt;</code>å…ƒç´ ä¸Šä½¿ç”¨äº†<code>merge=true</code>å±æ€§ã€‚
å½“å®¹å™¨è§£æå¹¶å®ä¾‹åŒ–å­Beanæ—¶ï¼Œç”Ÿæˆçš„å®ä¾‹å…·æœ‰ä¸€ä¸ª<code>adminEmails Properties</code>é›†åˆï¼Œ
è¯¥é›†åˆæ˜¯åˆå¹¶å­Beançš„ <code>adminEmails</code>é›†åˆä¸çˆ¶Beançš„<code>adminEmails</code>é›†åˆçš„ç»“æœã€‚</p>
<p>ä»¥ä¸‹åˆ—è¡¨æ˜¾ç¤ºäº†åˆå¹¶çš„ç»“æœï¼š</p>
<div class="language-properties" data-ext="properties" data-title="properties"><pre class="language-properties"><code><span class="token key attr-name">administrator</span><span class="token punctuation">=</span><span class="token value attr-value">administrator@example.com</span>
<span class="token key attr-name">sales</span><span class="token punctuation">=</span><span class="token value attr-value">sales@example.com</span>
<span class="token key attr-name">support</span><span class="token punctuation">=</span><span class="token value attr-value">support@example.co.uk</span>
</code></pre></div><p>å­ä»£<code>Properties</code>é›†åˆçš„å€¼é›†ç»§æ‰¿äº†çˆ¶<code>&lt;props/&gt;</code>ä¸­çš„æ‰€æœ‰å±æ€§å…ƒç´ ï¼Œå¹¶ä¸”å­é›†åˆä¸­å¯¹äº<code>support</code>é”®çš„å€¼ä¼šè¦†ç›–çˆ¶ä»£é›†åˆä¸­çš„å€¼ã€‚</p>
<p>è¿™ç§åˆå¹¶è¡Œä¸ºåŒæ ·é€‚ç”¨äº<code>&lt;list/&gt;</code>ã€<code>&lt;map/&gt;</code> å’Œ <code>&lt;set/&gt;</code>ç­‰é›†åˆç±»å‹ã€‚åœ¨<code>&lt;list/&gt;</code>å…ƒç´ çš„ç‰¹å®šæƒ…å†µä¸‹ï¼Œä¸Listé›†åˆç±»å‹ç›¸å…³çš„è¯­ä¹‰ï¼ˆå³æœ‰åºå€¼é›†åˆçš„æ¦‚å¿µï¼‰è¢«ä¿ç•™ã€‚
çˆ¶é›†åˆçš„å€¼ä½äºå­åˆ—è¡¨æ‰€æœ‰å€¼ä¹‹å‰ã€‚å¯¹äºMapã€Setå’ŒPropertiesé›†åˆç±»å‹ï¼Œä¸å­˜åœ¨ä»»ä½•æ’åºã€‚å› æ­¤ï¼Œåœ¨å®¹å™¨å†…éƒ¨ä½¿ç”¨çš„å…³äº
Mapã€Setå’ŒPropertieså®ç°çš„é›†åˆç±»å‹ï¼Œæ²¡æœ‰æ’åºè¯­ä¹‰ã€‚</p>
<h3>é›†åˆåˆå¹¶çš„é™åˆ¶</h3>
<p>ä½ ä¸èƒ½åˆå¹¶ä¸åŒçš„é›†åˆç±»å‹ï¼ˆä¾‹å¦‚ Map å’Œ Listï¼‰ã€‚å¦‚æœä½ è¯•å›¾è¿™æ ·åšï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé€‚å½“çš„<code>Exception</code>å¼‚å¸¸ã€‚
åˆå¹¶å±æ€§ï¼ˆmerge attributeï¼‰å¿…é¡»åœ¨è¾ƒä½å±‚çº§ã€è¢«ç»§æ‰¿çš„å­å®šä¹‰ä¸ŠæŒ‡å®šã€‚
åœ¨çˆ¶çº§é›†åˆå®šä¹‰ä¸ŠæŒ‡å®š<code>merge</code>å±æ€§æ˜¯å¤šä½™çš„ï¼Œä¸ä¼šäº§ç”ŸæœŸæœ›çš„åˆå¹¶è¡Œä¸ºã€‚</p>
<h3>å¼ºç±»å‹é›†åˆ</h3>
<p>å¾—ç›ŠäºJavaçš„æ³›å‹ç‰¹æ€§ï¼Œä½ èƒ½å¤Ÿåˆ›å»ºç‰¹å®šç±»å‹çš„å¼ºç±»å‹çš„é›†åˆï¼ˆCollectionï¼‰ã€‚
ä¾‹å¦‚ï¼Œå¯ä»¥å£°æ˜ä¸€ä¸ªCollectionç±»å‹ï¼Œä½¿å…¶åªèƒ½åŒ…å«ï¼ˆä¾‹å¦‚ï¼‰Stringå…ƒç´ ã€‚
å½“ä½ é€šè¿‡Springè¿›è¡Œä¾èµ–æ³¨å…¥æ—¶ï¼ŒSpringçš„ç±»å‹è½¬æ¢åŠŸèƒ½å°†ç¡®ä¿Collectionä¸­çš„å…ƒç´ åœ¨æ·»åŠ ä¹‹å‰è¢«è‡ªåŠ¨è½¬æ¢ä¸ºæ­£ç¡®çš„ç±»å‹ã€‚</p>
<p>ä»¥ä¸‹ç¤ºä¾‹ Java ç±»å’Œ Bean å®šä¹‰å±•ç¤ºäº†å¦‚ä½•å®ç°è¿™ä¸€ç‚¹ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SomeClass</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Float</span><span class="token punctuation">&gt;</span></span> accounts<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAccounts</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Float</span><span class="token punctuation">&gt;</span></span> accounts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>accounts <span class="token operator">=</span> accounts<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>something<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>x.y.SomeClass<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>accounts<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>map</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>one<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>9.99<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>two<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2.75<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>six<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3.99<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>map</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å½“å‡†å¤‡æ³¨å…¥<code>something</code> Bean çš„<code>accounts</code>å±æ€§æ—¶ï¼Œå…³äºå¼ºç±»å‹<code>Map&lt;String, Float&gt;</code>çš„å…ƒç´ ç±»å‹çš„æ³›å‹ä¿¡æ¯å¯é€šè¿‡åå°„è·å¾—ã€‚
å› æ­¤ï¼ŒSpring çš„ç±»å‹è½¬æ¢åŸºç¡€è®¾æ–½èƒ½å¤Ÿè¯†åˆ«å‡ºè¿™äº›å€¼å…ƒç´ å±äº <code>Float</code> ç±»å‹ï¼Œå¹¶å°†å­—ç¬¦ä¸²å€¼ï¼ˆ9.99ã€2.75 å’Œ 3.99ï¼‰è½¬æ¢ä¸ºå®é™…çš„ <code>Float</code> ç±»å‹ã€‚</p>
<h2>Nullå’Œç©ºå­—ç¬¦ä¸²å€¼</h2>
<p>Spring å°†å±æ€§ç­‰çš„ç©ºå‚æ•°è§†ä¸ºç©ºå­—ç¬¦ä¸²ã€‚ä¸‹é¢è¿™ä¸ªåŸºäºXMLçš„é…ç½®å…ƒæ•°æ®ç‰‡æ®µå°†<code>email</code>å±æ€§è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²å€¼ï¼ˆ<code>""</code>ï¼‰ã€‚</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä¸Šè¿°ç¤ºä¾‹ç­‰åŒäºä»¥ä¸‹Javaä»£ç ï¼š</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="language-java"><code>exampleBean<span class="token punctuation">.</span><span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2>ä½¿ç”¨ p-å‘½åç©ºé—´</h2>
<p>p-å‘½åç©ºé—´æä¾›äº†ä¸€ç§ä¾¿æ·çš„XMLé…ç½®æ–¹å¼ï¼Œå…è®¸ä½ ç›´æ¥åœ¨<code>bean</code>
å…ƒç´ çš„å±æ€§ä¸­å®šä¹‰å±æ€§å€¼æˆ–å¼•ç”¨å…¶ä»–Beanï¼Œè€Œæ— éœ€ä½¿ç”¨åµŒå¥—çš„<code>&lt;property/&gt;</code>æ ‡ç­¾ã€‚</p>
<p>Springæ¡†æ¶æ”¯æŒé€šè¿‡XML Schemaå®šä¹‰çš„æ‰©å±•é…ç½®æ ¼å¼å’Œå‘½åç©ºé—´ã€‚
è™½ç„¶<code>beans</code>çš„é…ç½®æ ¼å¼åœ¨XML Schemaæ–‡æ¡£ä¸­æœ‰æ‰€å®šä¹‰ï¼Œä½†p-å‘½åç©ºé—´å¹¶æœªåœ¨XSDæ–‡ä»¶ä¸­å£°æ˜ï¼Œå®ƒæ˜¯Springæ¡†æ¶å†…éƒ¨çš„ä¸€ä¸ªç‰¹æ€§ã€‚</p>
<p><strong>ç®€åŒ–beanå±æ€§è®¾ç½®</strong></p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºäº†ä¸¤ç§ä¸åŒçš„XMLé…ç½®ç‰‡æ®µï¼ˆæ ‡å‡†XMLæ ¼å¼å’Œä½¿ç”¨p-å‘½åç©ºé—´çš„æ ¼å¼ï¼‰ï¼Œå®ƒä»¬å°†äº§ç”Ÿç›¸åŒçš„é…ç½®ç»“æœï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/p<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- ç”¨äºbeanè®¾ç½®çš„æ ‡å‡†XMLé…ç½® --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classic<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.ExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>someone@somewhere.com<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- ç”¨äºbeanè®¾ç½®çš„p-å‘½åç©ºé—´å¿«æ·æ–¹å¼ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>p-namespace<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.ExampleBean<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">p:</span>email</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>someone@somewhere.com<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†åœ¨Beanå®šä¹‰ä¸­ï¼Œp-å‘½åç©ºé—´ä¸­æœ‰ä¸€ä¸ªåä¸º<code>email</code>çš„å±æ€§ã€‚è¿™å‘Šè¯‰Springè¦åŒ…å«ä¸€ä¸ªå±æ€§å£°æ˜ã€‚
å¦‚å‰æ‰€è¿°ï¼Œp-å‘½åç©ºé—´æ²¡æœ‰Schemaå®šä¹‰ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨å±æ€§åä½œä¸ºå±æ€§å€¼ï¼Œè€Œæ— éœ€æŒ‰ç…§å¸¸è§„æ–¹å¼æŒ‡å®šå±æ€§å€¼ã€‚</p>
<p><strong>ç®€åŒ–beanå±æ€§å¼•ç”¨</strong></p>
<p>ä»¥ä¸‹ç¤ºä¾‹åŒ…å«äº†ä¸¤ä¸ªbeanå®šä¹‰ï¼Œå®ƒä»¬éƒ½å¼•ç”¨äº†å¦ä¸€ä¸ªbeanï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/p<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans
		https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- ç”¨äºbeanå¼•ç”¨çš„æ ‡å‡†XMLé…ç½® --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>john-classic<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.Person<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>John Doe<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spouse<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jane<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- ç”¨äºbeanå¼•ç”¨çš„p-å‘½åç©ºé—´å¿«æ·æ–¹å¼ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>john-modern<span class="token punctuation">"</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.Person<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">p:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>John Doe<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">p:</span>spouse-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jane<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- å¦ä¸€ä¸ªbeanå®šä¹‰ï¼Œåç§°ä¸ºjane --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jane<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.Person<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Jane Doe<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æ­¤ç¤ºä¾‹ä¸ä»…ä½¿ç”¨p-å‘½åç©ºé—´å£°æ˜äº†å±æ€§å€¼ï¼Œè¿˜ä½¿ç”¨äº†ä¸€ç§ç‰¹æ®Šçš„æ ¼å¼æ¥å£°æ˜å±æ€§çš„å¼•ç”¨ã€‚
ç¬¬ä¸€ä¸ªbeanå®šä¹‰ä½¿ç”¨äº†ä¼ ç»Ÿçš„</p>
<ul>
<li><code>p:name</code>ï¼šè¿™æ˜¯ä½¿ç”¨p-å‘½åç©ºé—´è®¾ç½®nameå±æ€§å€¼çš„ç®€æ´æ–¹å¼</li>
<li><code>p:spouse-ref</code>ï¼šè¿™æ˜¯ä½¿ç”¨p-å‘½åç©ºé—´å£°æ˜spouseå±æ€§çš„å¼•ç”¨ï¼Œ<code>-ref</code>åè·Ÿè¢«å¼•ç”¨Bean</li>
</ul>
<div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p>æ³¨æ„âš ï¸ï¼šp-å‘½åç©ºé—´ä¸å¦‚æ ‡å‡†XMLæ ¼å¼çµæ´»ã€‚ä¾‹å¦‚ï¼Œå£°æ˜å±æ€§å¼•ç”¨çš„æ ¼å¼ä¸ä»¥<code>Ref</code>ç»“å°¾çš„å±æ€§å‘ç”Ÿå†²çªï¼Œè€Œæ ‡å‡†XMLæ ¼å¼åˆ™ä¸ä¼šã€‚
æˆ‘ä»¬å»ºè®®ä½ è°¨æ…é€‰æ‹©è¿™ç§æ–¹å¼ï¼Œå¹¶å°†æ­¤å†³ç­–ä¼ è¾¾ç»™ä½ çš„å›¢é˜Ÿæˆå‘˜ï¼Œä»¥é¿å…åŒæ—¶ä½¿ç”¨è¿™ä¸‰ç§æ ¼å¼çš„XMLæ–‡æ¡£ã€‚</p>
</div>
<h2>ä½¿ç”¨ c-å‘½åç©ºé—´</h2>
<p>ä¸å¸¦æœ‰<a href="#%E4%BD%BF%E7%94%A8-p-%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4">p-å‘½åç©ºé—´çš„XMLå¿«æ·æ–¹å¼</a>ç±»ä¼¼ï¼Œ
Spring 3.1ä¸­å¼•å…¥çš„c-å‘½åç©ºé—´ï¼Œå…è®¸ä½¿ç”¨å†…è”å±æ€§æ¥é…ç½®æ„é€ å‡½æ•°å‚æ•°ï¼Œè€Œä¸æ˜¯åµŒå¥—çš„<code>constructor-arg</code>å…ƒç´ ã€‚</p>
<p>ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨c-å‘½åç©ºé—´æ¥å®ç°ä¸åŸºäºæ„é€ å‡½æ•°ä¾èµ–æ³¨å…¥ç›¸åŒçš„åŠŸèƒ½ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>c</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/c<span class="token punctuation">"</span></span>
	<span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans
		https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanTwo<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>x.y.ThingTwo<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanThree<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>x.y.ThingThree<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

	<span class="token comment">&lt;!-- ä¼ ç»Ÿçš„å£°æ˜ï¼Œå¯ä»¥ä½¿ç”¨å¯é€‰çš„å‚æ•°åç§° --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanOne<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>x.y.ThingOne<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>thingTwo<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanTwo<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>thingThree<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanThree<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>something@somewhere.com<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

	<span class="token comment">&lt;!-- ä½¿ç”¨c-å‘½åç©ºé—´å£°æ˜å‚æ•°åç§° --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanOne<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>x.y.ThingOne<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">c:</span>thingTwo-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanTwo<span class="token punctuation">"</span></span>
		<span class="token attr-name"><span class="token namespace">c:</span>thingThree-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanThree<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">c:</span>email</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>something@somewhere.com<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>c-å‘½åç©ºé—´ä¸p-å‘½åç©ºé—´ä½¿ç”¨ç›¸åŒçš„çº¦å®šï¼ˆä»¥<code>-ref</code>ç»“å°¾è¡¨ç¤ºBeanå¼•ç”¨ï¼‰æ¥é€šè¿‡åç§°è®¾ç½®æ„é€ å‡½æ•°å‚æ•°ã€‚
åŒæ ·ï¼Œå³ä½¿c-å‘½åç©ºé—´åœ¨XSDæ¨¡å¼ä¸­æœªå®šä¹‰ï¼ˆå®ƒå­˜åœ¨äºSpringæ ¸å¿ƒä¸­ï¼‰ï¼Œä½†åœ¨XMLæ–‡ä»¶ä¸­ä»ç„¶éœ€è¦å£°æ˜ã€‚</p>
<p>å¯¹äºæ„é€ å‡½æ•°å‚æ•°åç§°ä¸å¯ç”¨çš„ç½•è§æƒ…å†µï¼ˆé€šå¸¸æ˜¯å› ä¸ºå­—èŠ‚ç æ˜¯åœ¨æ²¡æœ‰è°ƒè¯•debugä¿¡æ¯çš„æƒ…å†µä¸‹ç¼–è¯‘çš„ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨å‚æ•°ç´¢å¼•ï¼ˆä¸‹æ ‡ï¼‰ä½œä¸ºå¤‡ç”¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- c-namespaceç´¢å¼•å£°æ˜ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanOne<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>x.y.ThingOne<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">c:</span>_0-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanTwo<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">c:</span>_1-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanThree<span class="token punctuation">"</span></span>
      <span class="token attr-name"><span class="token namespace">c:</span>_2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>something@somewhere.com<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p>ç”±äºXMLè¯­æ³•é™åˆ¶ï¼Œç´¢å¼•è¡¨ç¤ºæ³•éœ€è¦ä»¥ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰å¼€å¤´ï¼Œå› ä¸ºXMLå±æ€§åä¸èƒ½ä»¥æ•°å­—å¼€å¤´ï¼ˆå°½ç®¡ä¸€äº›IDEå…è®¸è¿™æ ·åšï¼‰ã€‚
å¯¹äº<code>&lt;constructor-arg&gt;</code>å…ƒç´ ï¼Œä¹Ÿæœ‰ç›¸åº”çš„ç´¢å¼•è¡¨ç¤ºæ³•å¯ç”¨ï¼Œä½†å¹¶ä¸å¸¸ç”¨ï¼Œå› ä¸ºé€šå¸¸æƒ…å†µä¸‹ï¼Œæ™®é€šçš„å£°æ˜é¡ºåºå·²ç»è¶³å¤Ÿäº†ã€‚</p>
</div>
<p>åœ¨å®è·µä¸­ï¼Œæ„é€ å‡½æ•°è§£ææœºåˆ¶åœ¨åŒ¹é…å‚æ•°æ–¹é¢éå¸¸é«˜æ•ˆï¼Œå› æ­¤é™¤éç¡®å®éœ€è¦ï¼Œæˆ‘ä»¬å»ºè®®åœ¨æ•´ä¸ªé…ç½®ä¸­å§‹ç»ˆä½¿ç”¨åç§°æ ‡è®°ã€‚</p>
<h2>å¤åˆå±æ€§å</h2>
<p>åœ¨è®¾ç½®Beanå±æ€§æ—¶ï¼Œåªè¦è·¯å¾„ä¸­é™¤æœ€ç»ˆå±æ€§åå¤–çš„æ‰€æœ‰ç»„ä»¶ä¸ä¸ºnullï¼Œå°±å¯ä»¥ä½¿ç”¨å¤åˆæˆ–åµŒå¥—çš„å±æ€§åç§°ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªBeanå®šä¹‰çš„ç¤ºä¾‹ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>something<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>things.ThingOne<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fred.bob.sammy<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>123<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>something</code> Beanæœ‰ä¸€ä¸ª<code>fred</code>å±æ€§ï¼Œè¯¥å±æ€§åˆæœ‰ä¸€ä¸ª<code>bob</code>å±æ€§ï¼Œå±æ€§ä¸‹åˆæœ‰ä¸€ä¸ª<code>sammy</code>å±æ€§ï¼Œæœ€ç»ˆ<code>sammy</code>å±æ€§è¢«è®¾ç½®ä¸ºå€¼ 123ã€‚
ä¸ºäº†ä½¿è¿™ä¸ªè®¾ç½®ç”Ÿæ•ˆï¼Œé™¤äº†æœ€ç»ˆçš„å±æ€§å<code>sammy</code>å¤–ï¼Œè¦ä¿è¯è·¯å¾„ä¸­çš„æ‰€æœ‰å±æ€§ä¸ä¸º <code>null</code>ã€‚å¦åˆ™ï¼Œå°†æŠ›å‡º NullPointerException å¼‚å¸¸ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>æå®¢ç©ºé—´ | ä¸€ä¸ªä¸“æ³¨äºæŠ€æœ¯åˆ†äº«çš„åšå®¢ç½‘ç«™</title>
      <link>https://www.geekyspace.cn/intro.html</link>
      <guid>https://www.geekyspace.cn/intro.html</guid>
      <source url="https://www.geekyspace.cn/rss.xml">æå®¢ç©ºé—´ | ä¸€ä¸ªä¸“æ³¨äºæŠ€æœ¯åˆ†äº«çš„åšå®¢ç½‘ç«™</source>
      <description>ä¸€ä¸ªä¸“æ³¨äºæŠ€æœ¯åˆ†äº«çš„åšå®¢ç½‘ç«™</description>
      <category>ç¨‹åºäººç”Ÿ</category>
      <pubDate>Mon, 14 Dec 1998 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>ğŸš€ å½“åšæŒæˆä¸ºä¸€ç§çƒ­çˆ±ï¼Œæè‡´æˆä¸ºä¸€ç§ç²¾ç¥ï¼Œé‚£ä¹ˆæˆåŠŸå°±æ˜¯ä¸€ç§å¿…ç„¶</p>
</blockquote>
<h2>ä¼šæ•²ä»£ç çš„ç¨‹åºçŒ¿</h2>
<p>Hiï¼Œæˆ‘æ˜¯ä¸€å<em>ä¼šæ•²ä»£ç çš„ç¨‹åºå‘˜</em>ï¼Œåœ¨Javaå’Œç›¸å…³æŠ€æœ¯é¢†åŸŸæ‹¥æœ‰å¤šå¹´çš„ä¸“ä¸šç»éªŒã€‚
ç›®å‰ï¼Œæˆ‘åœ¨ <a href="https://www.liquido.com/" target="_blank" rel="noopener noreferrer">Liquido</a> å·¥ä½œï¼Œè¿™æ˜¯ä¸€å®¶ä¸“æ³¨äºé‡‘èé¢†åŸŸï¼Œ
æä¾›æ‹‰ç¾åœ°åŒº<a href="https://mp.weixin.qq.com/s/UzPsaVvXqrvW8T8PDPnhZw" target="_blank" rel="noopener noreferrer">æ”¯ä»˜è§£å†³æ–¹æ¡ˆ</a>çš„å…¬å¸ã€‚</p>
<h2>ç¼–ç¨‹ä¹‹è·¯</h2>
<ul>
<li>å¯è’™æ—©æœŸï¼šåˆä¸­æ—¶æœŸæ¥è§¦ç¼–ç¨‹ï¼Œå‚ä¸ç¼–ç¨‹æ¯”èµ›ï¼ŒåŸ¹å…»äº†å¯¹ç¼–ç¨‹çš„æµ“åšå…´è¶£</li>
<li>åšå®¢åˆ†äº«ï¼šè¿è¥ä¸ªäººåšå®¢ <a href="https://www.geekyspace.cn/" target="_blank" rel="noopener noreferrer">GeekySpace</a>ï¼Œåˆ†äº«ç¼–ç¨‹ç»éªŒå’ŒæŠ€æœ¯å¹²è´§ï¼Œè‡´åŠ›äºå¸®åŠ©ä»–äººå°‘èµ°å¼¯è·¯</li>
<li>ä¸ªäººæ¥å•æœåŠ¡ï¼šä¸ºå®¢æˆ·æä¾›ä¸“ä¸šçš„è½¯ä»¶å¼€å‘æœåŠ¡ï¼Œæ¶µç›–Java Webå¼€å‘å’Œå¾®æœåŠ¡æ¶æ„ç­‰é¢†åŸŸ</li>
<li>æŒç»­æˆé•¿ï¼šé€šè¿‡ä¸æ–­å­¦ä¹ å’Œå®è·µï¼ŒæŒç»­æå‡æŠ€æœ¯èƒ½åŠ›ï¼Œè‡´åŠ›äºæˆä¸ºæ›´ä¼˜ç§€çš„è½¯ä»¶å·¥ç¨‹å¸ˆ</li>
</ul>
<h2>æ¢ç´¢åšå®¢ä¸–ç•Œ</h2>
<p>GeekySpace æ˜¯ä¸€ä¸ªä¸“æ³¨äºè½¯ä»¶å¼€å‘è€…å’ŒæŠ€æœ¯é¢†å¯¼è€…çš„åœ¨çº¿ä¿¡æ¯å¹³å°ã€‚
æˆ‘ä»¬æä¾›äº†æ¶µç›–è½¯ä»¶å¼€å‘ã€æ•æ·æ–¹æ³•ã€DevOpsã€å¤§æ•°æ®ã€äººå·¥æ™ºèƒ½ã€å¾®æœåŠ¡ã€äº‘è®¡ç®—ç­‰æŠ€æœ¯é¢†åŸŸçš„ä¸°å¯Œæ–‡ç« ã€åšå®¢å†…å®¹ã€‚
æˆ‘ä»¬çš„ä½¿å‘½æ˜¯ä¸ºè½¯ä»¶å¼€å‘ç¤¾åŒºæä¾›æœ€æ–°çš„æŠ€æœ¯è¶‹åŠ¿ã€æœ€ä½³å®è·µå’Œè¡Œä¸šåŠ¨æ€ï¼Œå¸®åŠ©å¼€å‘è€…ä»¬ä¸æ–­å­¦ä¹ å’Œæˆé•¿ã€‚</p>
<p>æ¬¢è¿è®¿é—®æˆ‘ä»¬çš„ç½‘ç«™ <a href="www.geekyspace.cn">www.geekyspace.cn</a>ï¼Œä¸æˆ‘ä»¬ä¸€èµ·æ¢ç´¢ç§‘æŠ€çš„æœªæ¥ï¼</p>
]]></content:encoded>
      <enclosure url="https://www.geekyspace.cn/assets/images/cover3.jpg" type="image/jpeg"/>
    </item>
  </channel>
</rss>